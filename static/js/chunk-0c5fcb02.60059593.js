(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0c5fcb02"],{"8cb0":function(t,a,e){"use strict";e.r(a);var r=function(){var t=this,a=t._self._c;return a("div",{staticClass:"box"},[a("div",{staticClass:"container"},[a("h4",[t._v("个人信息")]),a("el-row",[a("el-col",{attrs:{span:15}},[a("el-form",{ref:"form",attrs:{model:t.form,rules:t.rules}},[a("el-form-item",{attrs:{label:"登录账号:"}},[a("p",[t._v(t._s(t.form.mobile))])]),a("el-form-item",{attrs:{label:"电子邮箱:"}},[a("p",[a("span",[t._v(t._s(t.form.email?t.form.email:"未设置邮箱"))]),a("el-button",{staticStyle:{"margin-left":"20px","font-weight":"300"},attrs:{type:"text",icon:"el-icon-edit-outline"},on:{click:t.toEmail}},[t._v(t._s(t.form.email?"修改邮箱":"设置邮箱"))])],1)]),a("el-form-item",{attrs:{label:"昵称:",prop:"nickname"}},[a("el-input",{attrs:{size:"medium",placeholder:"给自己起个名字"},model:{value:t.form.nickname,callback:function(a){t.$set(t.form,"nickname",a)},expression:"form.nickname"}})],1),a("el-form-item",{attrs:{label:"性别:"}},[a("el-radio-group",{model:{value:t.form.gender,callback:function(a){t.$set(t.form,"gender",a)},expression:"form.gender"}},[a("el-radio",{attrs:{label:1}},[t._v("男")]),a("el-radio",{attrs:{label:2}},[t._v("女")])],1)],1),a("el-form-item",{attrs:{label:"座右铭:"}},[a("el-input",{attrs:{type:"textarea",rows:"3",placeholder:"编辑我的座右铭..."},model:{value:t.form.motto,callback:function(a){t.$set(t.form,"motto",a)},expression:"form.motto"}})],1),a("el-form-item",[a("el-button",{attrs:{type:"primary",size:"medium",loading:t.loading},on:{click:t.onSubmit}},[t._v("立即修改")])],1)],1)],1),a("el-col",{staticClass:"avatar-col",attrs:{span:8}},[a("div",{staticClass:"avatar-box"},[a("img",{directives:[{name:"show",rawName:"v-show",value:t.form.avatar,expression:"form.avatar"}],attrs:{src:t.form.avatar}}),a("div",{staticClass:"upload-icon"},[a("i",{staticClass:"el-icon-upload"})]),a("div",{staticClass:"upload-mask",on:{click:function(a){t.isAvatarCropper=!0}}},[a("i",{staticClass:"el-icon-plus"})])]),a("p",[t._v("设置头像")])])],1)],1),t.isAvatarCropper?a("AvatarCropper",{on:{close:t.closeAvatarCropper}}):t._e()],1)},o=[],i=(e("14d9"),e("0016")),s=e("c24f"),l={name:"UsrBasePage",components:{AvatarCropper:i["a"]},data(){return{isAvatarCropper:!1,form:{nickname:"",gender:"",avatar:"",motto:"",email:"",mobile:""},rules:{nickname:[{required:!0,message:"用户昵称不能为空!",trigger:"blur"}]},loading:!1}},created(){this.getUserDetail()},methods:{toEmail(){this.$router.push({path:"/settings/security"})},onSubmit(){this.$refs["form"].validate(t=>{if(!t)return!1;this.editUserDetail()})},closeAvatarCropper(t,a=""){this.isAvatarCropper=!1,1==t&&""!=a&&(this.form.avatar=a)},getUserDetail(){Object(s["a"])().then(t=>{200==t.code&&(this.form.mobile=t.data.mobile.replace(/(\d{3})\d{4}(\d{4})/,"$1****$2"),this.form.nickname=t.data.nickname,this.form.avatar=t.data.avatar,this.form.motto=t.data.motto,this.form.email=t.data.email,this.form.gender=t.data.gender)})},editUserDetail(){this.loading=!0,Object(s["f"])({nickname:this.form.nickname,avatar:this.form.avatar,motto:this.form.motto,gender:this.form.gender}).then(t=>{200==t.code&&(this.$store.commit("UPDATE_USER_INFO",{nickname:this.form.nickname,sex:this.form.gender,signature:this.form.motto,avatar:this.form.avatar}),this.$message({message:"信息修改成功...",type:"success"}))}).finally(()=>{this.loading=!1})}}},m=l,n=(e("a979"),e("2877")),c=Object(n["a"])(m,r,o,!1,null,"debff482",null);a["default"]=c.exports},a979:function(t,a,e){"use strict";e("f4ca")},f4ca:function(t,a,e){}}]);