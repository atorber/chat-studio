(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-36529214"],{"1b68":function(t,s,e){"use strict";var a=function(){var t=this,s=t._self._c;return s("div",[s("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"lum-dialog-mask"},[s("el-container",{directives:[{name:"outside",rawName:"v-outside",value:t.close,expression:"close"}],staticClass:"lum-dialog-box"},[s("el-header",{staticClass:"header",attrs:{height:"50px"}},[s("p",[t._v("添加好友")]),s("p",{staticClass:"tools"},[s("i",{staticClass:"el-icon-close",on:{click:t.close}})])]),s("el-main",{staticClass:"main"},[s("el-input",{staticClass:"input",attrs:{id:"serach-mobile","prefix-icon":"el-icon-search",placeholder:"请输入对方手机号(精确查找)",clearable:""},on:{input:function(s){t.error=!1}},nativeOn:{keyup:function(s){return!s.type.indexOf("key")&&t._k(s.keyCode,"enter",13,s.key,"Enter")?null:t.onSubmit.apply(null,arguments)}},model:{value:t.mobile,callback:function(s){t.mobile=s},expression:"mobile"}}),s("p",{directives:[{name:"show",rawName:"v-show",value:t.error,expression:"error"}],staticClass:"error"},[t._v(" 无法找到该用户，请检查搜索内容并重试 ")]),s("el-button",{attrs:{type:"primary",size:"small",loading:t.loading},on:{click:t.onSubmit}},[t._v("立即查找 ")])],1)],1)],1)])},i=[],o=e("dc4c"),r={name:"UserSearch",data(){return{loading:!1,isShow:!1,mobile:"",error:!1}},methods:{open(){this.mobile="",this.isShow=!0,this.$nextTick(()=>{document.getElementById("serach-mobile").focus()})},close(){this.isShow=!1},onSubmit(){let{mobile:t}=this;if(""==t)return!1;this.loading=!0,Object(o["i"])({mobile:t}).then(t=>{200==t.code?(this.$user(t.data.id),this.close()):this.error=!0}).finally(()=>{this.loading=!1})}}},n=r,c=(e("7fa9"),e("2877")),l=Object(c["a"])(n,a,i,!1,null,"48d02639",null);s["a"]=l.exports},"2f87":function(t,s,e){},"56f1":function(t,s,e){},6300:function(t,s,e){"use strict";var a=function(){var t=this,s=t._self._c;return s("div",{staticClass:"body-bag",class:t.themeBagImg},[s("el-container",{staticClass:"main-layout",class:{"full-mode":t.themeMode}},[s("el-aside",{staticClass:"side-edge",attrs:{width:"70px"}},[s("el-container",{staticClass:"full-height"},[s("el-header",{staticClass:"logo-header",attrs:{height:"100px"}},[s("div",{directives:[{name:"popover",rawName:"v-popover:usercard",arg:"usercard"}],staticClass:"userlogo"},[s("img",{attrs:{src:t.userAvatar,onerror:t.detaultAvatar}})]),s("p",{staticClass:"user-status"},[t.socketStatus?s("span",{staticClass:"online"},[t._v("在线")]):s("span",[t._v("连接中...")])])]),s("el-main",{staticClass:"sidebar-menu"},[s("el-tooltip",{attrs:{content:"我的消息",placement:"right","visible-arrow":!1}},[s("router-link",{attrs:{to:"/message"}},[s("div",{staticClass:"menu-items",class:{active:0==t.idx}},[s("i",{staticClass:"el-icon-chat-line-round"}),s("span",{directives:[{name:"show",rawName:"v-show",value:t.unreadNum,expression:"unreadNum"}],staticClass:"notify"})])])],1),s("el-tooltip",{attrs:{content:"我的联系人",placement:"right","visible-arrow":!1}},[s("router-link",{attrs:{to:"/contacts"}},[s("div",{staticClass:"menu-items",class:{active:1==t.idx}},[s("i",{staticClass:"el-icon-user-solid"}),s("span",{directives:[{name:"show",rawName:"v-show",value:t.applyNum,expression:"applyNum"}],staticClass:"notify"})])])],1),s("el-tooltip",{attrs:{content:"我的笔记",placement:"right","visible-arrow":!1}},[s("router-link",{attrs:{to:"/note"}},[s("div",{staticClass:"menu-items",class:{active:2==t.idx}},[s("i",{staticClass:"el-icon-notebook-1"})])])],1),s("el-tooltip",{attrs:{content:"我的设置",placement:"right","visible-arrow":!1}},[s("router-link",{attrs:{to:"/settings"}},[s("div",{staticClass:"menu-items",class:{active:3==t.idx}},[s("i",{staticClass:"el-icon-setting"})])])],1),s("el-tooltip",{attrs:{content:"Gitub 源码",placement:"right","visible-arrow":!1}},[s("a",{attrs:{target:"_blank",href:"https://github.com/gzydong/LumenIM"}},[s("div",{staticClass:"menu-items"},[s("i",{staticClass:"iconfont icon-github"})])])])],1),s("el-footer",{staticClass:"fixed-sidebar",attrs:{height:"60px"}},[s("div",{staticClass:"menu-items",on:{click:t.logout}},[s("span",{staticClass:"logout"},[t._v("退出")])])])],1)],1),s("el-main",{staticClass:"no-padding",staticStyle:{background:"white"}},[t._t("container")],2)],1),s("el-popover",{ref:"usercard",attrs:{trigger:"hover",placement:"right-start","popper-class":"no-padding","visible-arrow":!1}},[s("AccountCard")],1),t._m(0),s("RewardModule"),s("AbsModule")],1)},i=[function(){var t=this,s=t._self._c;return s("audio",{attrs:{id:"audio",preload:"auto"}},[s("source",{attrs:{src:e("99d6"),type:"audio/mp3"}})])}],o=e("2f62"),r=function(){var t=this,s=t._self._c;return s("div",[s("div",{staticClass:"user-card animated fadeIn"},[s("div",{staticClass:"card-header"},[s("img",{staticClass:"no-select",attrs:{src:t.$store.state.user.visitCardBag}}),s("div",{staticClass:"user-avatar no-select"},[s("img",{attrs:{src:t.$store.state.user.avatar,onerror:t.$store.state.detaultAvatar}})]),s("div",{staticClass:"user-nickname"},[s("i",{staticClass:"iconfont icon-qianming"}),s("span",{domProps:{textContent:t._s(t.$store.state.user.nickname)}})])]),s("div",{staticClass:"card-main"},[s("div",{staticClass:"usersign"},[s("div",{staticClass:"arrow"}),t.$store.state.user.signature?s("span",[s("span",{staticStyle:{"font-weight":"600"}},[t._v("个性签名")]),t._v(" ： "+t._s(t.$store.state.user.signature)+" ")]):s("span",[s("i",{staticClass:"iconfont icon-bianji"}),s("span",[t._v("编辑个签，展示我的独特态度。")])])])])])])},n=[],c={name:"AccountCard"},l=c,u=(e("b70a"),e("2877")),d=Object(u["a"])(l,r,n,!1,null,"3f3336c9",null),m=d.exports,p=function(){var t=this,s=t._self._c;return s("div",[s("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"reward"},[s("div",{staticClass:"title"},[s("span",[t._v("Donate")]),s("i",{staticClass:"el-icon-circle-close",on:{click:t.close}})]),t._m(0),s("div",{staticClass:"footer"},[t._v(" 开源不易，如果你觉得项目对你有帮助，可以请作者喝杯咖啡☕️！鼓励下... ")])])])},h=[function(){var t=this,s=t._self._c;return s("div",{staticClass:"main"},[s("div",{staticClass:"pay-box"},[s("img",{attrs:{src:"https://cdn.learnku.com/uploads/images/202101/30/46424/PPYHOUhCb4.jpg"}}),s("p",[t._v("支付宝")])]),s("div",{staticClass:"pay-box"},[s("img",{attrs:{src:"https://cdn.learnku.com/uploads/images/202101/30/46424/XLmCJjbvlQ.png"}}),s("p",[t._v("微信")])])])}],v={data(){return{isShow:!1}},created(){this.getNum()<=3&&setTimeout(()=>{this.isShow=!0},3e4)},methods:{getNum(){return parseInt(localStorage.getItem("REWARD_BOX"))||0},close(){localStorage.setItem("REWARD_BOX",this.getNum()+1),this.isShow=!1}}},g=v,f=(e("d381"),Object(u["a"])(g,p,h,!1,null,"2e09a46a",null)),b=f.exports,C=function(){var t=this,s=t._self._c;return s("div",[s("div",{directives:[{name:"show",rawName:"v-show",value:t.isShow,expression:"isShow"}],staticClass:"abs-module"},[s("div",{staticClass:"abs-box"},[s("i",{staticClass:"el-icon-circle-close",on:{click:t.close}}),t._m(0)])])])},w=[function(){var t=this,s=t._self._c;return s("a",{attrs:{href:"https://www.aliyun.com/minisite/goods?userCode=kqyyppx2",target:"_blank"}},[s("img",{attrs:{src:e("8203"),width:"300"}})])}],_={data(){return{isShow:!1}},created(){this.getNum()<=2&&setTimeout(()=>{this.isShow=!0},12e4)},methods:{getNum(){return parseInt(sessionStorage.getItem("ABS_BOX"))||0},close(){sessionStorage.setItem("ABS_BOX",this.getNum()+1),this.isShow=!1}}},y=_,x=(e("b86e"),Object(u["a"])(y,C,w,!1,null,"3ea94f90",null)),k=x.exports,S=e("dc4c"),N={name:"MainLayout",components:{AccountCard:m,RewardModule:b,AbsModule:k},props:{idx:{type:Number,default:0}},computed:{...Object(o["c"])({userAvatar:t=>t.user.avatar,detaultAvatar:t=>t.detaultAvatar,socketStatus:t=>t.socketStatus,applyNum:t=>t.notify.applyNum,notifyCueTone:t=>t.settings.notifyCueTone,themeMode:t=>t.settings.themeMode,themeBagImg:t=>t.settings.themeBagImg}),...Object(o["b"])(["unreadNum"])},watch:{unreadNum(t,s){t>0&&t>s&&this.notifyCueTone&&this.play()}},created(){this.setApplyNum()},methods:{play(){document.querySelector("#audio").play()},logout(){this.$store.dispatch("ACT_USER_LOGOUT")},setApplyNum(){Object(S["f"])().then(t=>{200==t.code&&t.data.unread_num>0&&this.$store.commit("INCR_APPLY_NUM")})}}},A=N,O=(e("daeb"),Object(u["a"])(A,a,i,!1,null,null,null));s["a"]=O.exports},"7fa9":function(t,s,e){"use strict";e("8db2")},8203:function(t,s,e){t.exports=e.p+"static/img/aliyun-abs.9fd3de13.jpg"},"8db2":function(t,s,e){},"8e59":function(t,s,e){},"99d6":function(t,s,e){t.exports=e.p+"static/media/1701.17ccc6b7.mp3"},b70a:function(t,s,e){"use strict";e("2f87")},b86e:function(t,s,e){"use strict";e("8e59")},d381:function(t,s,e){"use strict";e("56f1")},d432:function(t,s,e){},daeb:function(t,s,e){"use strict";e("d432")}}]);