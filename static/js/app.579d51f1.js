(function(e){function t(t){for(var s,n,o=t[0],c=t[1],l=t[2],d=0,u=[];d<o.length;d++)n=o[d],Object.prototype.hasOwnProperty.call(a,n)&&a[n]&&u.push(a[n][0]),a[n]=0;for(s in c)Object.prototype.hasOwnProperty.call(c,s)&&(e[s]=c[s]);m&&m(t);while(u.length)u.shift()();return r.push.apply(r,l||[]),i()}function i(){for(var e,t=0;t<r.length;t++){for(var i=r[t],s=!0,n=1;n<i.length;n++){var o=i[n];0!==a[o]&&(s=!1)}s&&(r.splice(t--,1),e=c(c.s=i[0]))}return e}var s={},n={app:0},a={app:0},r=[];function o(e){return c.p+"static/js/"+({}[e]||e)+"."+{"chunk-2da147f7":"bb0bf769","chunk-0c5fcb02":"60059593","chunk-36529214":"0df23756","chunk-dd55f63e":"e5386c8a","chunk-3685d128":"15e21786","chunk-391be96a":"d500115d","chunk-3c23c872":"635bafb4","chunk-4b4dbc70":"82d3cf23","chunk-53324ea6":"a760353e","chunk-56095c0e":"042714af","chunk-6e4984c5":"6de063de","chunk-8b1066e6":"64bc9e0f","chunk-a4d24326":"3fcd46c3","chunk-bd9e2e00":"8537bfff","chunk-c2346170":"766ad2cc","chunk-2cdb6fa8":"da28a53c","chunk-106ff195":"0edc2fbf","chunk-eb65d764":"c7a525ea","chunk-7129bc80":"d40447a1","chunk-c47c2652":"2bd01ccf","chunk-d50dcbba":"a759a09d","chunk-ded8f098":"3be503f0"}[e]+".js"}function c(t){if(s[t])return s[t].exports;var i=s[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,c),i.l=!0,i.exports}c.e=function(e){var t=[],i={"chunk-2da147f7":1,"chunk-0c5fcb02":1,"chunk-36529214":1,"chunk-dd55f63e":1,"chunk-3685d128":1,"chunk-391be96a":1,"chunk-3c23c872":1,"chunk-4b4dbc70":1,"chunk-53324ea6":1,"chunk-56095c0e":1,"chunk-6e4984c5":1,"chunk-8b1066e6":1,"chunk-a4d24326":1,"chunk-bd9e2e00":1,"chunk-2cdb6fa8":1,"chunk-106ff195":1,"chunk-eb65d764":1,"chunk-7129bc80":1,"chunk-c47c2652":1,"chunk-d50dcbba":1,"chunk-ded8f098":1};n[e]?t.push(n[e]):0!==n[e]&&i[e]&&t.push(n[e]=new Promise((function(t,i){for(var s="static/css/"+({}[e]||e)+"."+{"chunk-2da147f7":"be6c4c87","chunk-0c5fcb02":"b8bb8be4","chunk-36529214":"945d9bd1","chunk-dd55f63e":"d8b24bf0","chunk-3685d128":"bd4f077f","chunk-391be96a":"08521554","chunk-3c23c872":"7cf4cbbb","chunk-4b4dbc70":"3c38d5a7","chunk-53324ea6":"7fd87efb","chunk-56095c0e":"152fe7e7","chunk-6e4984c5":"f8d43d18","chunk-8b1066e6":"09772a8b","chunk-a4d24326":"7542818d","chunk-bd9e2e00":"78545db6","chunk-c2346170":"31d6cfe0","chunk-2cdb6fa8":"d6a19908","chunk-106ff195":"5fd5612e","chunk-eb65d764":"f43e2ed8","chunk-7129bc80":"ebef9c7e","chunk-c47c2652":"2ca0ba65","chunk-d50dcbba":"8761392d","chunk-ded8f098":"b122d2e0"}[e]+".css",a=c.p+s,r=document.getElementsByTagName("link"),o=0;o<r.length;o++){var l=r[o],d=l.getAttribute("data-href")||l.getAttribute("href");if("stylesheet"===l.rel&&(d===s||d===a))return t()}var u=document.getElementsByTagName("style");for(o=0;o<u.length;o++){l=u[o],d=l.getAttribute("data-href");if(d===s||d===a)return t()}var m=document.createElement("link");m.rel="stylesheet",m.type="text/css",m.onload=t,m.onerror=function(t){var s=t&&t.target&&t.target.src||a,r=new Error("Loading CSS chunk "+e+" failed.\n("+s+")");r.code="CSS_CHUNK_LOAD_FAILED",r.request=s,delete n[e],m.parentNode.removeChild(m),i(r)},m.href=a;var A=document.getElementsByTagName("head")[0];A.appendChild(m)})).then((function(){n[e]=0})));var s=a[e];if(0!==s)if(s)t.push(s[2]);else{var r=new Promise((function(t,i){s=a[e]=[t,i]}));t.push(s[2]=r);var l,d=document.createElement("script");d.charset="utf-8",d.timeout=120,c.nc&&d.setAttribute("nonce",c.nc),d.src=o(e);var u=new Error;l=function(t){d.onerror=d.onload=null,clearTimeout(m);var i=a[e];if(0!==i){if(i){var s=t&&("load"===t.type?"missing":t.type),n=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+s+": "+n+")",u.name="ChunkLoadError",u.type=s,u.request=n,i[1](u)}a[e]=void 0}};var m=setTimeout((function(){l({type:"timeout",target:d})}),12e4);d.onerror=d.onload=l,document.head.appendChild(d)}return Promise.all(t)},c.m=e,c.c=s,c.d=function(e,t,i){c.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:i})},c.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},c.t=function(e,t){if(1&t&&(e=c(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var i=Object.create(null);if(c.r(i),Object.defineProperty(i,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var s in e)c.d(i,s,function(t){return e[t]}.bind(null,s));return i},c.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return c.d(t,"a",t),t},c.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},c.p="/",c.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],d=l.push.bind(l);l.push=t,l=l.slice();for(var u=0;u<l.length;u++)t(l[u]);var m=d;r.push([0,"chunk-vendors"]),i()})({0:function(e,t,i){e.exports=i("56d7")},"00e2":function(e,t,i){},"03dc":function(e,t,i){},"098a":function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAYAAACM/rhtAAAABGdBTUEAALGPC/xhBQAAACBjSFJNAAB6JgAAgIQAAPoAAACA6AAAdTAAAOpgAAA6mAAAF3CculE8AAAABmJLR0QAAAAAAAD5Q7t/AAAACXBIWXMAAAsSAAALEgHS3X78AAAC1klEQVRYw+2XX0hTcRTHP3eOCgOtNCOI/lBYvQSNXtL8t0yRgnI3yjCil7AQkggignwoiN7ypYcopB5cFtypkYRmm38yX6Sgl6YQRQSRpqWUhOhOD9vcmnO781p3D/vCYez3O7/z+9zf+e3uHEgpJXOlLDQhqmoB7MBhIA/YDKQDI8A7wAM0KZr2OdYGoqobgGqgBNgJ5ABTwEdgAGgF3Iqm+XQDiqqqwA0gN84DzgLNwBVF0z5FxNgYiFEFpMWJMwxcUjStLSagz+FYDtwDTiaYiZ9AncXlagzEqQLuABkJxmkEzllcrul5gD6Hwwo8ASoSDBquW4APuGggRhtw1OJyzQBYg6MiUm8QDuCCwfXgv/P1AfOf4Gzlka2ANxzYZM0AO9JaWt9bAEQ4L4JVBJLErCLUETwxETlo9pFFUcUcIMgWs2miaNMcoIhYzKaJoulwwAkg02yiCE2FAJHRJAQcDwGKeIFtZhNFaAjAf/dE+s1+r0SxgTlAEWkXEZLM2iHsv/hXRflrYLfZeQ3ozcpnHbZQigGBBvF/JoM1BLlCgCIPRcSbBKn1ikhzkOuvenCy/EAZ0GFyesszOp53RgUEmCgrdQInTIJzZnZ2VYcPzC+vRGoAG7D9P8MNAWcjB6P2JD9K7bvwNzTp/wluCti7qsv9VhcgwPfSkkOABiz7x3DTgLq6y/M02qQSa+X4/uJq4AHxu7LFygecWvOiu2khByVehDF70Rn8HVpc3wQlQE2Wu+duLCddm47ZC48D94EVSwT3Gzid5e59FM9R96l8KynYAzwGjFbfH4Bj2Z6+QT3OuivpbE/foAg2EZwGihSnCDa9cAmdYLhGi/dVAreB9TqXfAFq13a/bEl0r0Vf/JGi/AzgGlDLwv30TOBB6nN6+icXs4/hX+ZIUX4ucBOojJhqAS7n9PQPG4m/ZK+Or4V5BcD1wNer63pf9S1V7JRSMlN/AO6lbgA7RvQLAAAAAElFTkSuQmCC"},"0ad5":function(e,t,i){},"0e77":function(e,t,i){"use strict";i.d(t,"b",(function(){return c})),i.d(t,"a",(function(){return l})),i.d(t,"c",(function(){return d})),i.d(t,"e",(function(){return u})),i.d(t,"d",(function(){return m}));i("14d9");var s=i("4360"),n=i("a18c"),a=i("7f6d"),r=i("d800");const o="send_message_index_name";function c(e){return s["a"].state.talks.items.findIndex(t=>t.index_name==e)}function l(e){return s["a"].state.talks.items.find(t=>t.index_name==e)}function d(e){let t={id:0,talk_type:1,receiver_id:0,name:"未设置昵称",remark_name:"",avatar:"",is_disturb:0,is_top:0,is_online:0,is_robot:0,unread_num:0,content:"......",draft_text:"",msg_text:"",index_name:"",created_at:Object(a["j"])(new Date)};return Object.assign(t,e),t.index_name=`${t.talk_type}_${t.receiver_id}`,t}function u(e,t){Object(r["d"])({talk_type:parseInt(e),receiver_id:parseInt(t)}).then(({code:i,data:a})=>{200==i&&(sessionStorage.setItem(o,`${e}_${t}`),-1==c(`${e}_${t}`)&&s["a"].commit("PUSH_TALK_ITEM",d(a)),n["a"].push({path:"/message",query:{v:(new Date).getTime()}}))})}function m(){let e=sessionStorage.getItem(o);return e&&sessionStorage.removeItem(o),e}},1330:function(e,t,i){"use strict";i("19a3")},1418:function(e,t,i){"use strict";i("03dc")},"164c":function(e,t,i){},1666:function(e,t,i){"use strict";i.d(t,"a",(function(){return r})),i.d(t,"b",(function(){return c}));const s={"[微笑]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/0.gif'>","[撇嘴]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/1.gif'>","[色]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/2.gif'>","[发呆]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/3.gif'>","[得意]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/4.gif'>","[流泪]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/5.gif'>","[害羞]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/6.gif'>","[闭嘴]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/7.gif'>","[睡]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/8.gif'>","[大哭]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/9.gif'>","[尴尬]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/10.gif'>","[发怒]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/11.gif'>","[调皮]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/12.gif'>","[呲牙]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/13.gif'>","[惊讶]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/14.gif'>","[难过]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/15.gif'>","[酷]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/16.gif'>","[冷汗]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/17.gif'>","[抓狂]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/18.gif'>","[吐]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/19.gif'>","[偷笑]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/20.gif'>","[可爱]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/21.gif'>","[白眼]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/22.gif'>","[傲慢]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/23.gif'>","[饥饿]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/24.gif'>","[困]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/25.gif'>","[惊恐]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/26.gif'>","[流汗]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/27.gif'>","[憨笑]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/28.gif'>","[大兵]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/29.gif'>","[奋斗]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/30.gif'>","[咒骂]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/31.gif'>","[疑问]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/32.gif'>","[嘘]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/33.gif'>","[晕]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/34.gif'>","[折磨]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/35.gif'>","[衰]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/36.gif'>","[骷髅]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/37.gif'>","[敲打]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/38.gif'>","[再见]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/39.gif'>","[擦汗]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/40.gif'>","[抠鼻]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/41.gif'>","[鼓掌]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/42.gif'>","[糗大了]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/43.gif'>","[坏笑]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/44.gif'>","[左哼哼]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/45.gif'>","[右哼哼]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/46.gif'>","[哈欠]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/47.gif'>","[鄙视]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/48.gif'>","[委屈]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/49.gif'>","[快哭了]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/50.gif'>","[阴险]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/51.gif'>","[亲亲]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/52.gif'>","[吓]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/53.gif'>","[可怜]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/54.gif'>","[菜刀]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/55.gif'>","[西瓜]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/56.gif'>","[啤酒]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/57.gif'>","[篮球]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/58.gif'>","[咖啡]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/60.gif'>","[饭]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/61.gif'>","[猪头]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/62.gif'>","[玫瑰]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/63.gif'>","[凋谢]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/64.gif'>","[示爱]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/65.gif'>","[爱心]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/66.gif'>","[心碎]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/67.gif'>","[蛋糕]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/68.gif'>","[炸弹]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/70.gif'>","[刀]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/71.gif'>","[足球]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/72.gif'>","[礼物]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/77.gif'>","[拥抱]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/78.gif'>","[强]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/79.gif'>","[弱]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/80.gif'>","[握手]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/81.gif'>","[胜利]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/82.gif'>","[抱拳]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/83.gif'>","[勾引]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/84.gif'>","[拳头]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/85.gif'>","[差劲]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/86.gif'>","[爱你]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/87.gif'>","[NO]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/88.gif'>","[OK]":"<img src='https://res.wx.qq.com/mpres/htmledition/images/icon/emotion/89.gif'>"},n=["😠","😩","😲","😞","😵","😰","😒","😍","😤","😜","😝","😋","😘","😚","😷","😳","😃","😅","😆","😁","😂","😊","☺","😄","😢","😭","😨","😣","😡","😌","😖","😔","😱","😪","😏","😓","😥","😫","😉","✊","✋","✌","👊","👍","☝","👆","👇","👈","👉","👋","👏","👌","👎"],a=Object.keys(s),r={symbol:n,emojis:s},o=a.map(e=>"|\\"+e).join("").replace("|","");function c(e){return e.replace(new RegExp(`(${o})`,"gi"),(e,t)=>s[t])}},1718:function(e,t,i){},"19a3":function(e,t,i){},"1e9c":function(e,t,i){},"23ba":function(e,t,i){"use strict";i.d(t,"f",(function(){return n})),i.d(t,"h",(function(){return a})),i.d(t,"a",(function(){return r})),i.d(t,"b",(function(){return o})),i.d(t,"i",(function(){return c})),i.d(t,"j",(function(){return l})),i.d(t,"k",(function(){return d})),i.d(t,"l",(function(){return u})),i.d(t,"g",(function(){return m})),i.d(t,"d",(function(){return A})),i.d(t,"e",(function(){return h})),i.d(t,"c",(function(){return p}));var s=i("b775");const n=()=>Object(s["a"])("/api/v1/group/list"),a=e=>Object(s["a"])("/api/v1/group/detail",e),r=e=>Object(s["b"])("/api/v1/group/create",e),o=e=>Object(s["b"])("/api/v1/group/setting",e),c=e=>Object(s["b"])("/api/v1/group/invite",e),l=e=>Object(s["b"])("/api/v1/group/member/remove",e),d=e=>Object(s["b"])("/api/v1/group/secede",e),u=e=>Object(s["b"])("/api/v1/group/member/remark",e),m=e=>Object(s["a"])("/api/v1/group/member/invites",e),A=e=>Object(s["a"])("/api/v1/group/member/list",e),h=e=>Object(s["a"])("/api/v1/group/notice/list",e),p=e=>Object(s["b"])("/api/v1/group/notice/edit",e)},"297e":function(e,t,i){},"2fc4":function(e,t,i){},"31a6":function(e,t,i){"use strict";i("605e")},3222:function(e,t,i){},3786:function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"d",(function(){return a})),i.d(t,"c",(function(){return r})),i.d(t,"a",(function(){return o}));var s=i("b775");const n=e=>Object(s["b"])("/api/v1/auth/login",e),a=e=>Object(s["b"])("/api/v1/auth/register",e),r=e=>Object(s["b"])("/api/v1/auth/logout",e),o=e=>Object(s["b"])("/api/v1/auth/forget",e)},"39ea":function(e,t,i){},"3e34":function(e,t,i){},4017:function(e,t,i){},4068:function(e,t,i){"use strict";i("4017")},4360:function(e,t,i){"use strict";var s=i("2b0e"),n=i("2f62"),a=i("5f87"),r=i("3786");let o={uid:0,nickname:"",sex:0,signature:"",avatar:i("e366"),visitCardBag:i("d3d4"),loginStatus:!1};if(Object(a["a"])()){let e=Object(a["b"])();o.uid=e.uid,o.nickname=e.nickname,o.signature=e.signature,o.avatar=e.avatar?e.avatar:o.avatar,o.loginStatus=!0}const c={state:o,mutations:{USER_LOGOUT(e){e.uid=0,e.avatar="",e.nickname="",e.loginStatus=!1},UPDATE_LOGIN_STATUS(e){e.loginStatus=!0},UPDATE_USER_INFO(e,t){for(const i in t)e.hasOwnProperty(i)&&(e[i]=t[i]);Object(a["f"])({uid:e.uid,nickname:e.nickname,signature:e.signature,avatar:e.avatar})}},actions:{ACT_USER_LOGOUT({commit:e}){e("USER_LOGOUT"),Object(r["c"])().finally(()=>{Object(a["d"])(),location.reload()})}}};var l=c,d=(i("13d5"),i("14d9"),i("7f6d")),u=i("d800"),m=i("0e77");const A={state:{loadStatus:1,items:[],unreadMessage:{num:0,nickname:"未知",content:"..."}},getters:{topItems:e=>e.items.filter(e=>1==e.is_top),talkItems:e=>e.items.sort(Object(d["g"])([Object(d["h"])((e,t)=>e.updated_at>t.updated_at)])),unreadNum:e=>e.items.reduce((e,t)=>e+parseInt(t.unread_num),0),talkNum:e=>e.items.length},mutations:{SET_LOAD_STATUS(e,t){e.loadStatus=t},SET_TALK_ITEMS(e,t){e.items=t.items},UPDATE_TALK_ITEM(e,t){for(const i of e.items)if(i.index_name===t.index_name){Object.assign(i,t);break}},PUSH_TALK_ITEM(e,t){e.items.push(t)},REMOVE_TALK_ITEM(e,t){for(let i in e.items)if(e.items[i].index_name===t){e.items.splice(i,1);break}},UPDATE_TALK_MESSAGE(e,t){for(const i of e.items)if(i.index_name===t.index_name){i.unread_num++,i.msg_text=t.msg_text,i.updated_at=t.updated_at;break}},SET_TLAK_UNREAD_MESSAGE(e,t){e.unreadMessage.num++,e.unreadMessage.nickname=t.nickname,e.unreadMessage.content=t.content},CLEAR_TLAK_UNREAD_MESSAGE(e){e.unreadMessage={num:0,nickname:"未知",content:"..."}}},actions:{LOAD_TALK_ITEMS(e){e.commit("SET_LOAD_STATUS",2),Object(u["i"])().then(({code:t,data:i})=>{200===t&&(e.commit("SET_TALK_ITEMS",{items:i.map(e=>Object(m["c"])(e))}),e.commit("SET_LOAD_STATUS",3))}).catch(()=>{e.commit("SET_LOAD_STATUS",4)})}}};var h=A,p={state:{applyNum:0,inputEvent:0},mutations:{INCR_APPLY_NUM(e){e.applyNum++},SET_APPLY_NUM(e,t){e.applyNum=t},UPDATE_KEYBOARD_EVENT(e){e.inputEvent++}}};let f={themeMode:!0,themeBagImg:"bag003",themeColor:"",notifyCueTone:!0,keyboardEventNotify:!0};Object(a["a"])()&&Object.assign(f,Object(a["c"])());const g={state:f,mutations:{SET_THEME_MODE(e,t){e.themeMode=t,Object(a["g"])(e)},SET_THEME_BAGIMG(e,t){e.themeBagImg=t,Object(a["g"])(e)},SET_THEME_COLOR(e,t){e.themeColor=t,Object(a["g"])(e)},SET_NOTIFY_CUE_TONE(e,t){e.notifyCueTone=t,Object(a["g"])(e)},SET_KEYBOARD_EVENT_NOTIFY(e,t){e.keyboardEventNotify=t,Object(a["g"])(e)}}};var v=g,_=i("e5f2"),b=i.n(_),k=i("91d2"),w={state:{items:[{emoticon_id:-1,name:"QQ表情/符号表情",url:i("a7dc"),list:[]},{emoticon_id:0,name:"我的收藏",url:i("098a"),list:[]}]},mutations:{LOAD_USER_EMOTICON(e){Object(k["b"])().then(t=>{if(200==t.code){const{collect_emoticon:i,sys_emoticon:s}=t.data;e.items=e.items.slice(0,2),e.items[1].list=i,e.items.push(...s)}})},SAVE_USER_EMOTICON(e,t){Object(u["b"])({record_id:t.record_id}).then(e=>{200==e.code&&(b()({title:"收藏提示",message:"表情包收藏成功...",type:"success"}),this.commit("LOAD_USER_EMOTICON"))}).catch(()=>{b()({title:"收藏提示",message:"表情包收藏失败...",type:"warning"})})},UPLOAD_USER_EMOTICON(e,t){let i=new FormData;i.append("emoticon",t.file),Object(k["d"])(i).then(t=>{200==t.code&&e.items[1].list.push(t.data)}).catch(()=>{b()({message:"网络异常请稍后再试...",type:"error",duration:3e3})})},APPEND_SYS_EMOTICON(e,t){e.items.push(t)},REMOVE_SYS_EMOTICON(e,t){for(let i in e.items)if(e.items[i].emoticon_id===t.emoticon_id){e.items.splice(i,1);break}}}},x=(i("3c65"),{state:{talk_type:0,receiver_id:0,is_robot:0,records:[],index_name:null},mutations:{UPDATE_DIALOGUE_MESSAGE(e,t){e.records=[],e.talk_type=parseInt(t.talk_type),e.receiver_id=parseInt(t.receiver_id),e.is_robot=parseInt(t.is_robot),0===e.talk_type||0===e.receiver_id?e.index_name=null:e.index_name=t.talk_type+"_"+t.receiver_id},UNSHIFT_DIALOGUE(e,t){e.records.unshift(...t)},PUSH_DIALOGUE(e,t){e.records.push(t)},UPDATE_DIALOGUE(e,t){for(const i of e.records)if(i.id===t.id){Object.assign(i,t);break}},DELETE_DIALOGUE(e,t){e.records.splice(t,1)},BATCH_DELETE_DIALOGUE(e,t){t.forEach(t=>{let i=e.records.findIndex(e=>e.id==t);i>=0&&e.records.splice(i,1)})},SET_DIALOGUE(e,t){e.records=t}}});const y={state:{tags:[],class:[]},getters:{},mutations:{SET_NOTE_TAGS(e,t){e.tags=t},PUSH_NOTE_TAG(e,t){e.tags.unshift(t)}}};var O=y;const C=i("e366"),S={socketStatus:!1,website_name:"Lumen IM",copyright:'©2020 - 2021 Lumen IM 在线聊天 <a href="https://github.com/gzydong/LumenIM" style="color: #777272;font-weight: 400;" target="_blank">Github源码</a>',detaultAvatar:"this.src='"+C+"'"};var T=S;const E={loginStatus:e=>e.user.loginStatus,socketStatus:e=>e.socketStatus};var j=E;const q={UPDATE_SOCKET_STATUS(e,t){e.socketStatus=t}};var I=q;s["default"].use(n["a"]);const M=new n["a"].Store({modules:{user:l,notify:p,talks:h,settings:v,emoticon:w,dialogue:x,note:O},state:T,getters:j,mutations:I});t["a"]=M},"46d5":function(e,t,i){"use strict";i("3222")},"4c75":function(e,t,i){e.exports=i.p+"assets/not-fount.d88922e5.svg"},"4ed3":function(e,t,i){"use strict";i("2fc4")},"51ff":function(e,t,i){var s={"./mention-down.svg":"59e0","./not-data.svg":"677e","./not-fount.svg":"4c75","./note-book.svg":"64fb","./note.svg":"8798","./zhuangfa.svg":"69d9"};function n(e){var t=a(e);return i(t)}function a(e){if(!i.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}n.keys=function(){return Object.keys(s)},n.resolve=a,e.exports=n,n.id="51ff"},"52bf":function(e,t,i){"use strict";i("8e1d")},"56d7":function(e,t,i){"use strict";i.r(t);i("2d26"),i("96cf");var s=i("2b0e"),n=function(){var e=this,t=e._self._c;return t("div",{attrs:{id:"app"}},[e.showView?t("router-view"):e._e()],1)},a=[],r={name:"App",data(){return{showView:!0}},methods:{refreshView(){this.showView=!1,this.$nextTick(()=>this.showView=!0)}}},o=r,c=i("2877"),l=Object(c["a"])(o,n,a,!1,null,null,null),d=l.exports,u=i("4360"),m=i("a18c"),A=i("d6d2"),h=i("c24f"),p={created(){this.$store.getters.loginStatus&&(this.initialize(),this.$store.dispatch("LOAD_TALK_ITEMS"))},methods:{initialize(){A["a"].connect(),this.loadUserSetting()},loadUserSetting(){Object(h["b"])().then(({code:e,data:t})=>{if(200==e){const{user_info:e}=t;this.$store.commit("UPDATE_USER_INFO",{uid:e.uid,nickname:e.nickname,sex:e.gender,signature:e.motto,avatar:e.avatar})}})},reload(){this.$root.$children[0].refreshView()}}},f=i("6ed5"),g=i.n(f),v=i("f529"),_=i.n(v),b=i("e5f2"),k=i.n(b),w=i("896a"),x=i.n(w),y=i("df33"),O=i.n(y),C=i("c284"),S=i.n(C),T=i("6ac5"),E=i.n(T),j=i("dcdc"),q=i.n(j),I=i("f494"),M=i.n(I),P=i("4f0c"),N=i.n(P),L=i("14e9"),D=i.n(L),R=i("58b8"),B=i.n(R),U=i("299c"),z=i.n(U),F=i("a447"),H=i.n(F),G=i("7bc3"),Y=i.n(G),W=i("3787"),J=i.n(W),K=i("4105"),V=i.n(K),Q=i("f3ad"),Z=i.n(Q),$=i("c2cc"),X=i.n($),ee=i("0f6c"),te=i.n(ee),ie=i("c673"),se=i.n(ie),ne=i("eedf"),ae=i.n(ne),re=i("3803"),oe=i.n(re),ce=i("4cb2"),le=i.n(ce),de=i("f58e"),ue=i.n(de),me=i("443e"),Ae=i.n(me),he=i("aa2f"),pe=i.n(he),fe=i("c69e"),ge=i.n(fe),ve=i("5cc3"),_e=i.n(ve),be=i("7b31"),ke=i.n(be),we=i("3d2d"),xe=i.n(we),ye=i("18ff"),Oe=i.n(ye),Ce=i("defb"),Se=i.n(Ce),Te=i("b370"),Ee=i.n(Te),je=i("b35b"),qe=i.n(je),Ie=i("6ac9"),Me=i.n(Ie),Pe=(i("0fae"),i("e5d9")),Ne=i("bd0c"),Le=i.n(Ne);s["default"].use(Me.a),s["default"].use(qe.a),s["default"].use(Ee.a),s["default"].use(Se.a),s["default"].use(Oe.a),s["default"].use(xe.a),s["default"].use(ke.a),s["default"].use(_e.a),s["default"].use(ge.a),s["default"].use(pe.a),s["default"].use(Ae.a),s["default"].use(ue.a),s["default"].use(le.a),s["default"].use(oe.a),s["default"].use(ae.a),s["default"].use(se.a),s["default"].use(te.a),s["default"].use(X.a),s["default"].use(Z.a),s["default"].use(V.a),s["default"].use(J.a),s["default"].use(Y.a),s["default"].use(H.a),s["default"].use(z.a),s["default"].use(B.a),s["default"].use(D.a),s["default"].use(N.a),s["default"].use(M.a),s["default"].use(q.a),s["default"].use(E.a),s["default"].use(S.a),s["default"].use(O.a),s["default"].use(x.a.directive),s["default"].prototype.$notify=k.a,s["default"].prototype.$message=_.a,s["default"].prototype.$confirm=g.a.confirm,s["default"].prototype.$prompt=g.a.prompt,s["default"].prototype.$alert=g.a.alert,s["default"].prototype.$dialog=g.a.Dialog,s["default"].use(Pe["a"]),s["default"].use(Le.a,{ak:""});var De=function(){var e=this,t=e._self._c;return t("div",{staticClass:"audio-message"},[t("div",{staticClass:"videodisc"},[t("div",{staticClass:"disc",class:{play:e.isPlay},on:{click:e.toPlay}},[e.loading?t("i",{staticClass:"el-icon-loading"}):e.isPlay?t("i",{staticClass:"el-icon-video-pause"}):t("i",{staticClass:"el-icon-video-play"}),t("audio",{ref:"audio",attrs:{preload:"auto",type:"audio/mp3,audio/wav",src:e.src},on:{timeupdate:e.timeupdate,ended:e.ended,canplay:e.canplay,error:e.onError}})])]),t("div",{staticClass:"detail"},[t("div",{staticClass:"text"},[t("i",{staticClass:"el-icon-service"}),t("span",[e._v(e._s(e.getCurrDuration)+" / "+e._s(e.getTotalDuration))])]),t("div",{staticClass:"process"},[t("el-progress",{attrs:{percentage:e.progress,color:"#ff5722","show-text":!1,"stroke-width":4}})],1)])])},Re=[];function Be(e){var t=parseInt(e),i=0,s=0;t>60&&(i=parseInt(t/60),t=parseInt(t%60),i>60&&(s=parseInt(i/60),i=parseInt(i%60)));var n=""+parseInt(t);return n=10>t>0?"0"+parseInt(t):""+parseInt(t),n=10>i>0?"0"+parseInt(i)+":"+n:parseInt(i)+":"+n,s>0&&(n=parseInt(s)+":"+n),n}var Ue={name:"AudioMessage",props:{src:{type:String,default:""}},data(){return{loading:!0,isPlay:!1,duration:0,currentTime:0,progress:0,error:!1}},computed:{getTotalDuration(){return Be(this.duration)},getCurrDuration(){return Be(this.currentTime)}},methods:{toPlay(){if(this.loading||this.error)return;let e=this.$refs.audio;this.isPlay?e.pause():e.play(),this.isPlay=!this.isPlay},timeupdate(){let e=this.$refs.audio;0==e.duration?this.progress=0:(this.currentTime=e.currentTime,this.progress=e.currentTime/e.duration*100)},canplay(){this.duration=this.$refs.audio.duration,this.loading=!1},ended(){this.isPlay=!1,this.progress=0},onError(){this.error=!0,this.loading=!1}}},ze=Ue,Fe=(i("9078"),Object(c["a"])(ze,De,Re,!1,null,"34401cfc",null)),He=Fe.exports,Ge=function(){var e=this,t=e._self._c;return t("div",{staticClass:"code-message",class:{"max-height":e.lineNumber>6,"max-width":e.maxwidth,"full-screen":e.fullscreen}},[t("i",{class:e.fullscreen?"el-icon-close":"iconfont icon-tubiao_chakangongyi",on:{click:function(t){e.fullscreen=!e.fullscreen}}}),t("pre",{staticClass:"lum-scrollbar",domProps:{innerHTML:e._s(e.formatCode(e.code,e.lang))}})])},Ye=[],We=i("8c7a"),Je=i.n(We),Ke=(i("6cf3"),i("6605"),i("f9fc"),i("cb55"),i("416b"),i("457d"),i("826c"),i("af8a"),i("5c81"),i("f393"),i("8009"),i("a0d9"),i("d9eb"),i("6217"),i("8e9b"),i("922d"),i("1989"),i("3d21"),i("b130"),i("0477"),i("86e1"),i("4cbf"),i("9528"),i("91f8"),i("6701"),i("7ced"),i("9eb2"),i("bf2e"),i("fa97"),{name:"CodeMessage",props:{code:{type:[String,Number],default:""},lang:{type:String,default:""},maxwidth:{type:Boolean,default:!1}},data(){return{fullscreen:!1,lineNumber:0}},created(){this.lineNumber=this.code.split(/\n/).length},methods:{formatCode(e,t){try{return Je.a.highlight(e,Je.a.languages[t],t)+"<br/>"}catch(i){return e}}}}),Ve=Ke,Qe=(i("8033"),Object(c["a"])(Ve,Ge,Ye,!1,null,"7ebefabd",null)),Ze=Qe.exports,$e=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"forward-message",on:{click:e.catForwardRecords}},[t("div",{staticClass:"title"},[e._v(e._s(e.title))]),e._l(e.records,(function(i,s){return t("div",{key:s,staticClass:"lists"},[t("p",[t("span",[e._v(e._s(i.nickname)+"：")]),t("span",[e._v(e._s(i.text))])])])})),t("div",{staticClass:"footer"},[t("span",[e._v("转发：聊天会话记录 ("+e._s(e.num)+"条)")])])],2),t("talk-forward-record",{ref:"forwardRecordsRef"})],1)},Xe=[],et=function(){var e=this,t=e._self._c;return t("div",{directives:[{name:"show",rawName:"v-show",value:e.isShow,expression:"isShow"}],staticClass:"lum-dialog-mask"},[t("el-container",{directives:[{name:"outside",rawName:"v-outside",value:e.close,expression:"close"}],staticClass:"lum-dialog-box"},[t("el-header",{staticClass:"no-padding header",attrs:{height:"60px"}},[t("p",[e._v("会话记录 ("+e._s(e.records.length)+")")]),t("p",{staticClass:"tools"},[t("i",{staticClass:"el-icon-close",on:{click:e.close}})])]),t("el-main",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"no-padding main"},[t("el-scrollbar",{staticClass:"full-height",attrs:{tag:"section",native:!1}},e._l(e.records,(function(i){return t("div",{key:i.id,staticClass:"message-group"},[t("div",{staticClass:"left-box"},[t("el-avatar",{attrs:{fit:"contain",shape:"square",size:30,src:i.avatar}})],1),t("div",{staticClass:"right-box"},[t("div",{staticClass:"msg-header"},[t("span",{staticClass:"name"},[e._v(" "+e._s(i.nickname_remarks?i.nickname_remarks:i.nickname)+" ")]),t("el-divider",{attrs:{direction:"vertical"}}),t("span",{staticClass:"time"},[e._v(e._s(i.created_at))])],1),1==i.msg_type?t("text-message",{attrs:{content:i.content}}):2==i.msg_type&&1==i.file.type?t("image-message",{attrs:{src:i.file.url}}):2==i.msg_type&&2==i.file.type?t("audio-message",{attrs:{src:i.file.url}}):2==i.msg_type&&3==i.file.type?t("video-message",{attrs:{src:i.file.url}}):2==i.msg_type&&4==i.file.file_type?t("file-message",{attrs:{file:i.file,record_id:i.id}}):4==i.msg_type?t("code-message",{attrs:{code:i.code_block.code,lang:i.code_block.lang}}):t("div",{staticClass:"other-message"},[e._v("未知消息类型")])],1)])})),0)],1)],1)],1)},tt=[],it=i("d800"),st={name:"TalkForwardRecord",data(){return{record_id:0,records:[],loading:!1,isShow:!1}},methods:{open(e){e!==this.record_id&&(this.record_id=e,this.records=[],this.loadRecords()),this.isShow=!0},close(){this.isShow=!1},loadRecords(){this.loading=!0,Object(it["h"])({record_id:this.record_id}).then(e=>{200==e.code&&(this.records=e.data.rows)}).finally(()=>{this.loading=!1})}}},nt=st,at=(i("b5fa"),Object(c["a"])(nt,et,tt,!1,null,"750a5182",null)),rt=at.exports,ot={name:"ForwardMessage",components:{TalkForwardRecord:rt},props:{forward:{type:Object,required:!0},record_id:{type:Number,required:!0,default:0}},data(){return{title:"",records:[],num:0}},methods:{catForwardRecords(){this.$refs.forwardRecordsRef.open(this.record_id)},getForwardTitle(e){let t=[...new Set(e.map(e=>e.nickname))];return t.join("、")+"的会话记录"}},created(){let e=this.forward;this.num=e.num,this.records=e.list,this.title=this.getForwardTitle(this.records)}},ct=ot,lt=(i("8953"),Object(c["a"])(ct,$e,Xe,!1,null,"59dfa8db",null)),dt=lt.exports,ut=function(){var e=this,t=e._self._c;return t("div",{staticClass:"image-message no-select"},[t("el-image",{style:e.getImgStyle(e.src),attrs:{fit:"cover",src:e.src,lazy:!0,"preview-src-list":[e.src]}},[t("div",{staticClass:"image-slot",attrs:{slot:"error"},slot:"error"},[e._v("图片加载失败...")]),t("div",{staticClass:"image-slot",attrs:{slot:"placeholder"},slot:"placeholder"},[e._v("图片加载中...")])])],1)},mt=[],At=i("7f6d"),ht={name:"ImageMessage",props:{src:{type:String,default:""}},methods:{getImgStyle(e){return Object(At["i"])(e,200)}}},pt=ht,ft=(i("89ea"),Object(c["a"])(pt,ut,mt,!1,null,"7bdc20a9",null)),gt=ft.exports,vt=function(){var e=this,t=e._self._c;return t("div",{staticClass:"text-message",class:{left:"left"==e.float,right:"right"==e.float,"max-width":!e.fullWidth}},[e.arrow?t("div",{staticClass:"arrow"}):e._e(),t("pre",{domProps:{innerHTML:e._s(e.html)}})])},_t=[],bt=i("1666"),kt={name:"TextMessage",props:{content:{type:[String,Number],default:""},float:{type:String,default:"left"},fullWidth:{type:Boolean,default:!0},arrow:{type:Boolean,default:!1}},data(){return{html:""}},created(){const e=Object(At["k"])(this.content,"right"==this.float?"#ffffff":"rgb(9 149 208)");this.html=Object(bt["b"])(e)}},wt=kt,xt=(i("9e65"),Object(c["a"])(wt,vt,_t,!1,null,"0886f08f",null)),yt=xt.exports,Ot=function(){var e=this,t=e._self._c;return t("div",{staticClass:"video-message",class:{full:e.isFull}},[t("div",{staticClass:"mask"},[t("div",{staticClass:"toolbar"},[t("p",[e.isPlay?t("i",{staticClass:"el-icon-video-pause",on:{click:e.toPlay}}):t("i",{staticClass:"el-icon-video-play",on:{click:e.toPlay}})]),t("p",{directives:[{name:"show",rawName:"v-show",value:e.isFull,expression:"isFull"}]},[t("i",{staticClass:"el-icon-refresh-left",on:{click:e.refresh}})]),t("p",[t("i",{staticClass:"el-icon-full-screen",on:{click:e.full}})]),t("p",{directives:[{name:"show",rawName:"v-show",value:e.isFull,expression:"isFull"}]},[e._v("工具栏")])])]),t("video",{ref:"video",attrs:{height:"300",preload:"auto",src:e.src},on:{ended:e.ended,pause:e.onPause,error:e.onError,resize:e.onResize,canplay:e.onLoadstart}})])},Ct=[],St={name:"VideoMessage",props:{src:{type:String,default:""}},data(){return{isPlay:!1,isFull:!1,error:!1,duration:0}},methods:{full(){this.isFull=!this.isFull},onPause(){this.isPlay=!1},ended(){this.isPlay=!1},toPlay(){let e=this.$refs.video;this.error||(this.isPlay?e.pause():e.play(),this.isPlay=!this.isPlay)},onError(){this.error=!0},onResize(){console.log("onResize")},refresh(){this.$refs.video.currentTime=0},onLoadstart(){}}},Tt=St,Et=(i("f6d2"),Object(c["a"])(Tt,Ot,Ct,!1,null,"1513b65a",null)),jt=Et.exports,qt=function(){var e=this,t=e._self._c;return t("div",{staticClass:"voice-message"})},It=[],Mt={name:"VoiceMessage",components:{},data(){return{}},methods:{},created(){}},Pt=Mt,Nt=Object(c["a"])(Pt,qt,It,!1,null,"027af3ae",null),Lt=Nt.exports,Dt=function(){var e=this,t=e._self._c;return t("div",{staticClass:"system-text-message"},[t("div",{staticClass:"content"},[e._v(e._s(e.content))])])},Rt=[],Bt={name:"SystemTextMessage",props:{content:String},methods:{sendTime:At["e"]}},Ut=Bt,zt=(i("f383"),Object(c["a"])(Ut,Dt,Rt,!1,null,"02353ee5",null)),Ft=zt.exports,Ht=function(){var e=this,t=e._self._c;return t("div",{staticClass:"file-message"},[t("div",{staticClass:"main"},[t("div",{staticClass:"ext"},[e._v(e._s(e.ext))]),t("div",{staticClass:"file-box"},[t("p",{staticClass:"info"},[t("span",{staticClass:"name"},[e._v(e._s(e.fileName))]),t("span",{staticClass:"size"},[e._v("("+e._s(e.fileSize)+")")])]),t("p",{staticClass:"notice"},[e._v("文件已成功发送, 文件助手永久保存")])])]),t("div",{staticClass:"footer"},[t("a",{on:{click:function(t){return e.download(e.record_id)}}},[e._v("下载")]),t("a",[e._v("在线预览")])])])},Gt=[],Yt={name:"FileMessage",props:{file:{type:Object,required:!0},record_id:{type:Number,required:!0,default:0}},data(){return{file_id:0,ext:"",fileName:"",fileSize:""}},created(){this.file_id=this.file.id,this.ext=this.file.suffix.toUpperCase(),this.fileName=this.file.original_name,this.fileSize=Object(At["d"])(this.file.size)},methods:{download:At["c"]}},Wt=Yt,Jt=(i("9a11"),Object(c["a"])(Wt,Ht,Gt,!1,null,"2b6e7336",null)),Kt=Jt.exports,Vt=function(){var e=this,t=e._self._c;return t("div",{staticClass:"invite-message"},[1==e.invite.type||3==e.invite.type?t("div",{staticClass:"system-msg"},[t("a",{on:{click:function(t){return e.toUser(e.invite.operate_user.id)}}},[e._v(" "+e._s(e.invite.operate_user.nickname)+" ")]),t("span",[e._v(e._s(1==e.invite.type?"邀请了":"将"))]),e._l(e.invite.users,(function(i,s){return[t("a",{on:{click:function(t){return e.toUser(i.id)}}},[e._v(e._s(i.nickname))]),t("em",{directives:[{name:"show",rawName:"v-show",value:s<e.invite.users.length-1,expression:"uidx < invite.users.length - 1"}]},[e._v("、")])]})),t("span",[e._v(e._s(1==e.invite.type?"加入了群聊":"踢出了群聊"))])],2):2==e.invite.type?t("div",{staticClass:"system-msg"},[t("a",{on:{click:function(t){return e.toUser(e.invite.operate_user.id)}}},[e._v(" "+e._s(e.invite.operate_user.nickname)+" ")]),t("span",[e._v("退出了群聊")])]):e._e()])},Qt=[],Zt={name:"InviteMessage",props:{invite:{type:Object,required:!0}},methods:{toUser(e){this.$emit("cat",e)}}},$t=Zt,Xt=(i("31a6"),Object(c["a"])($t,Vt,Qt,!1,null,"a7a03292",null)),ei=Xt.exports,ti=function(){var e=this,t=e._self._c;return t("div",{staticClass:"revoke-message"},[t("div",{staticClass:"content"},[e.$store.state.user.uid==e.item.user_id?t("span",[e._v(" 你撤回了一条消息 | "+e._s(e.sendTime(e.item.created_at))+" ")]):1==e.item.talk_type?t("span",[e._v(" 对方撤回了一条消息 | "+e._s(e.sendTime(e.item.created_at))+" ")]):t("span",[e._v(' "'+e._s(e.item.nickname)+'" 撤回了一条消息 | '+e._s(e.sendTime(e.item.created_at))+" ")])])])},ii=[],si={name:"RevokeMessage",props:{item:{type:Object}},methods:{sendTime:At["e"]}},ni=si,ai=(i("f843"),Object(c["a"])(ni,ti,ii,!1,null,"7e00062d",null)),ri=ai.exports,oi=function(){var e=this,t=e._self._c;return t("div",{staticClass:"visit-card-message"},[t("div",{staticClass:"user flex-center"},[t("div",{staticClass:"avatar flex-center"},[t("el-avatar",{attrs:{size:28,src:e.avatar}})],1),t("div",{staticClass:"content flex-center"},[t("p",{staticClass:"ellipsis"},[e._v(e._s(e.nickname))])]),e._m(0)]),t("div",{staticClass:"sign"},[t("span",[e._v("个性签名 : ")]),e._v(e._s(e.sign))]),t("div",{staticClass:"share no-select ellipsis"},[t("a",{staticClass:"pointer",on:{click:function(t){return e.openVisitCard(e.friendId)}}},[e._v("你是谁?")]),e._v(" 分享了用户名片，可点击添加好友 ... ")])])},ci=[function(){var e=this,t=e._self._c;return t("div",{staticClass:"tools flex-center"},[t("span",{staticClass:"flex-center pointer"},[t("i",{staticClass:"el-icon-plus"}),e._v(" 加好友 ")])])}],li={name:"VisitCardMessage",data(){return{userId:0,friendId:0,avatar:"http://im-serve0.gzydong.club/static/image/sys-head/2019012107542668696.jpg",sign:"这个社会，是赢家通吃，输者一无所有，社会，永远都是只以成败论英雄。",nickname:"氨基酸纳氨基酸纳氨基酸纳氨基酸纳氨基酸纳氨基酸纳氨基酸纳氨基酸纳"}},created(){},methods:{openVisitCard(e){this.$emit("openVisitCard",e)}}},di=li,ui=(i("ff0f"),Object(c["a"])(di,oi,ci,!1,null,"dab76438",null)),mi=ui.exports,Ai=function(){var e=this,t=e._self._c;return t("div",{staticClass:"reply-message"},[e._v("这是回复的消息[预留]")])},hi=[],pi={name:"ReplyMessage",data(){return{}},created(){},methods:{}},fi=pi,gi=(i("e062"),Object(c["a"])(fi,Ai,hi,!1,null,"f4f6465e",null)),vi=gi.exports,_i=function(){var e=this,t=e._self._c;return t("div",[t("div",{staticClass:"vote-message"},[t("div",{staticClass:"vote-from"},[t("div",{staticClass:"vheader"},[t("p",[e._v(" "+e._s(1==e.answer_mode?"[多选投票]":"[单选投票]")+" "),t("i",{directives:[{name:"show",rawName:"v-show",value:e.is_vote,expression:"is_vote"}],staticClass:"pointer",class:{"el-icon-loading":e.refresh,"el-icon-refresh":!e.refresh},attrs:{title:"刷新投票结果"},on:{click:e.loadRefresh}})]),t("p",[e._v(e._s(e.title))])]),e.is_vote?[t("div",{staticClass:"vbody"},e._l(e.options,(function(i,s){return t("div",{staticClass:"vote-view"},[t("p",{staticClass:"vote-option"},[e._v(e._s(i.value)+". "+e._s(i.text))]),t("p",{staticClass:"vote-census"},[e._v(" "+e._s(i.num)+" 票 "+e._s(i.progress)+"% ")]),t("p",{staticClass:"vote-progress"},[t("el-progress",{attrs:{"show-text":!1,percentage:parseInt(i.progress)}})],1)])})),0),t("div",{staticClass:"vfooter vote-view"},[t("p",[e._v("应参与人数："+e._s(e.answer_num)+" 人")]),t("p",[e._v("实际参与人数："+e._s(e.answered_num)+" 人")])])]:[t("div",{staticClass:"vbody"},e._l(e.options,(function(i,s){return t("p",{staticClass:"option",class:{"option-radio":0==e.answer_mode}},[t("el-checkbox",{on:{change:function(t){return e.toSelect2(i)}},model:{value:i.is_checked,callback:function(t){e.$set(i,"is_checked",t)},expression:"option.is_checked"}}),t("span",{staticStyle:{"margin-left":"10px"},on:{click:function(t){return e.toSelect(i,s)}}},[e._v(" "+e._s(i.value)+" 、"+e._s(i.text)+" ")])],1)})),0),t("div",{staticClass:"vfooter"},[t("el-button",{attrs:{plain:"",round:""},on:{click:e.toVote}},[e._v(" "+e._s(e.isUserVote?"立即投票":"请选择进行投票")+" ")])],1)]],2)])])},bi=[],ki=(i("14d9"),{name:"VoteMessage",props:{vote:{type:Object,required:!0},record_id:{type:Number,required:!0}},data(){return{answer_mode:0,title:"",radio_value:"",options:[],is_vote:!1,answer_num:0,answered_num:0,refresh:!1}},computed:{isUserVote(){return this.options.some(e=>e.is_checked)}},created(){let e=this.$store.state.user.uid,{detail:t,statistics:i,vote_users:s}=this.vote;this.answer_mode=t.answer_mode,this.answer_num=t.answer_num,this.answered_num=t.answered_num,this.title=t.title,t.answer_option.forEach(e=>{this.options.push({value:e.key,text:e.value,is_checked:!1,num:0,progress:"00.0"})}),this.is_vote=s.some(t=>t==e),this.updateStatistics(i)},methods:{loadRefresh(){this.refresh=!0,setTimeout(()=>{this.refresh=!1},500)},updateStatistics(e){let t=e.count;this.options.forEach(i=>{i.num=e.options[i.value],t>0&&(i.progress=e.options[i.value]/t*100)})},toSelect(e,t){0==this.answer_mode&&this.options.forEach(e=>{e.is_checked=!1}),this.options[t].is_checked=!e.is_checked},toSelect2(e){0==this.answer_mode&&this.options.forEach(t=>{e.value==t.value?t.is_checked=e.is_checked:t.is_checked=!1})},toVote(){if(0==this.isUserVote)return!1;let e=[];this.options.forEach(t=>{t.is_checked&&e.push(t.value)}),Object(it["c"])({record_id:this.record_id,options:e.join(",")}).then(e=>{200==e.code&&(this.is_vote=!0,this.updateStatistics(e.data))})}}}),wi=ki,xi=(i("4ed3"),Object(c["a"])(wi,_i,bi,!1,null,"3ba43a14",null)),yi=xi.exports,Oi=function(){var e=this,t=e._self._c;return t("div",{staticClass:"login-message"},[t("h4",[e._v("登录操作通知")]),t("p",[e._v("登录时间："+e._s(e.datetime)+" (CST)")]),t("p",[e._v("IP地址："+e._s(e.ip))]),t("p",[e._v("登录地点："+e._s(e.address))]),t("p",[e._v("登录设备："+e._s(e.platform))]),t("p",[e._v("异常原因："+e._s(e.reason))])])},Ci=[],Si={name:"LoginMessage",props:{detail:{type:Object,required:!0}},data(){return{datetime:"",ip:"",address:"",platform:"",reason:"常用设备登录"}},created(){void 0!=this.detail&&(this.ip=this.detail.ip||"",this.datetime=Object(At["j"])(this.detail.created_at,"{y}年{m}月{d}日 {h}:{i}:{s}"),this.address=this.detail.address,this.reason=this.detail.reason,this.platform=this.getExploreName(this.detail.agent)+" / "+this.getExploreOs(this.detail.agent))},methods:{getExploreName(e=""){return e.indexOf("Opera")>-1||e.indexOf("OPR")>-1?"Opera":e.indexOf("compatible")>-1&&e.indexOf("MSIE")>-1?"IE":e.indexOf("Edge")>-1?"Edge":e.indexOf("Firefox")>-1?"Firefox":e.indexOf("Safari")>-1&&-1==e.indexOf("Chrome")?"Safari":e.indexOf("Chrome")>-1&&e.indexOf("Safari")>-1?"Chrome":"Unkonwn"},getExploreOs(e=""){return e.indexOf("Mac OS")>-1?"Mac OS":"Windows"}}},Ti=Si,Ei=(i("cb70"),Object(c["a"])(Ti,Oi,Ci,!1,null,"767ad11d",null)),ji=Ei.exports,qi=function(){var e=this,t=e._self._c;return t("div",{staticClass:"location-message",class:{full:e.full}},[t("baidu-map",{staticClass:"bm-view",attrs:{center:e.center,zoom:e.zoom},on:{ready:e.handler}}),t("div",{staticClass:"icon",attrs:{title:"放大/缩放"},on:{click:function(t){e.full=!e.full}}},[e.full?t("i",{staticClass:"el-icon-zoom-out"}):t("i",{staticClass:"el-icon-zoom-in"})])],1)},Ii=[],Mi={name:"LocationMessage",props:{lng:0,lat:0},data(){return{center:{lng:0,lat:0},zoom:0,full:!1}},methods:{handler({BMap:e,map:t}){this.center.lng=this.lng,this.center.lat=this.lat,this.zoom=13}}},Pi=Mi,Ni=(i("52bf"),Object(c["a"])(Pi,qi,Ii,!1,null,"12bed40d",null)),Li=Ni.exports,Di=function(){var e=this,t=e._self._c;return t("div",{staticClass:"lum-dialog-mask animated fadeIn"},[t("el-container",{directives:[{name:"outside",rawName:"v-outside",value:e.close,expression:"close"}],staticClass:"container"},[t("el-header",{staticClass:"no-padding header",attrs:{height:"180px"}},[t("i",{staticClass:"close el-icon-error pointer",on:{click:e.close}}),t("div",{staticClass:"img-banner"},[t("img",{staticClass:"img-banner",attrs:{src:e.detail.bag}})]),t("div",{staticClass:"user-header"},[t("div",{staticClass:"avatar"},[t("div",{staticClass:"avatar-box"},[t("img",{attrs:{src:e.detail.avatar,onerror:e.$store.state.detaultAvatar}})])]),t("div",{staticClass:"nickname"},[t("i",{staticClass:"iconfont icon-qianming"}),t("span",[e._v(e._s(e.detail.nickname||"未设置昵称"))]),t("div",{staticClass:"share no-select"},[t("i",{staticClass:"iconfont icon-fenxiang3"}),e._v(" "),t("span",[e._v("分享")])])])])]),t("el-main",{staticClass:"no-padding main"},[t("div",{staticClass:"user-sign"},[t("div",{staticClass:"sign-arrow"}),t("i",{staticClass:"iconfont icon-bianji"}),t("span",[e._v("编辑个签，展示我的独特态度。 ")])]),t("div",{staticClass:"card-rows no-select"},[t("div",{staticClass:"card-row"},[t("label",[e._v("手机")]),t("span",[e._v(e._s(e._f("mobile")(e.detail.mobile)))])]),t("div",{staticClass:"card-row"},[t("label",[e._v("昵称")]),t("span",[e._v(e._s(e.detail.nickname||"未设置昵称"))])]),t("div",{staticClass:"card-row"},[t("label",[e._v("性别")]),t("span",[e._v(e._s(e._f("gender")(e.detail.gender)))])]),t("div",{directives:[{name:"show",rawName:"v-show",value:2==e.detail.friend_status,expression:"detail.friend_status == 2"}],staticClass:"card-row"},[t("label",[e._v("备注")]),0==e.editRemark.isShow?t("span",[e._v(e._s(e.detail.nickname_remark?e.detail.nickname_remark:"暂无备注"))]):t("span",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.editRemark.text,expression:"editRemark.text"},{name:"focus",rawName:"v-focus"}],staticClass:"friend-remark",attrs:{type:"text"},domProps:{value:e.editRemark.text},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.editRemarkSubmit.apply(null,arguments)},input:function(t){t.target.composing||e.$set(e.editRemark,"text",t.target.value)}}})]),t("i",{directives:[{name:"show",rawName:"v-show",value:!e.editRemark.isShow,expression:"!editRemark.isShow"}],staticClass:"el-icon-edit-outline",on:{click:e.clickEditRemark}})]),t("div",{staticClass:"card-row"},[t("label",[e._v("邮箱")]),t("span",[e._v("未设置")])])])]),t("el-footer",{directives:[{name:"show",rawName:"v-show",value:0!==e.detail.friend_status,expression:"detail.friend_status !== 0"}],staticClass:"no-padding footer",attrs:{height:"50px"}},[1==e.detail.friend_status&&0==e.detail.friend_apply?t("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-circle-plus-outline"},on:{click:function(t){e.apply.isShow=!0}}},[e._v("添加好友 ")]):1==e.detail.friend_apply?t("el-button",{attrs:{type:"primary",size:"small"}},[e._v("已发送好友申请，请耐心等待... ")]):2==e.detail.friend_status?t("el-button",{attrs:{type:"primary",size:"small",icon:"el-icon-s-promotion"},on:{click:function(t){return e.sendMessage(e.detail)}}},[e._v("发消息 ")]):e._e()],1),t("div",{directives:[{name:"outside",rawName:"v-outside",value:e.closeApply,expression:"closeApply"}],staticClass:"friend-from",class:{"friend-from-show":e.apply.isShow}},[t("p",[t("span",[e._v("请填写好友申请备注：")]),t("span",{on:{click:e.closeApply}},[e._v("取消")])]),t("div",[t("input",{directives:[{name:"model",rawName:"v-model",value:e.apply.text,expression:"apply.text"}],attrs:{type:"text",placeholder:"(必填项)"},domProps:{value:e.apply.text},on:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.sendApply.apply(null,arguments)},input:function(t){t.target.composing||e.$set(e.apply,"text",t.target.value)}}}),t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.sendApply}},[e._v(" 立即提交 ")])],1)])],1)],1)},Ri=[],Bi=i("dc4c"),Ui=i("0e77"),zi={name:"UserCardDetail",props:{user_id:{type:[Number,String],default:0}},filters:{gender(e){let t=["未知","男","女"];return t[e]||"未知"},mobile(e){return e.substr(0,3)+" "+e.substr(3,4)+" "+e.substr(7,4)}},data(){return{detail:{mobile:"",nickname:"",avatar:"",motto:"",friend_status:0,friend_apply:0,nickname_remark:"",bag:i("d3d4"),gender:0},editRemark:{isShow:!1,text:""},apply:{isShow:!1,text:""},contacts:!1}},created(){this.loadUserDetail()},methods:{close(){if(this.contacts)return!1;this.$emit("close")},clickEditRemark(){this.editRemark.isShow=!0,this.editRemark.text=this.detail.nickname_remark},loadUserDetail(){Object(Bi["j"])({user_id:this.user_id}).then(e=>{200==e.code&&(this.detail.user_id=e.data.id,Object.assign(this.detail,e.data))})},sendApply(){""!=this.apply.text&&Object(Bi["c"])({friend_id:this.detail.user_id,remark:this.apply.text}).then(e=>{200==e.code?(this.apply.isShow=!1,this.apply.text="",this.detail.friend_apply=1):alert("发送好友申请失败,请稍后再试...")})},editRemarkSubmit(){let e={friend_id:this.detail.user_id,remarks:this.editRemark.text};e.remarks!=this.detail.nickname_remark?Object(Bi["e"])(e).then(t=>{200==t.code&&(this.editRemark.isShow=!1,this.detail.nickname_remark=e.remarks,this.$emit("changeRemark",e))}):this.editRemark.isShow=!1},closeApply(){this.apply.isShow=!1},sendMessage(){this.close(),Object(Ui["e"])(1,this.user_id)}}},Fi=zi,Hi=(i("46d5"),Object(c["a"])(Fi,Di,Ri,!1,null,"22588d20",null)),Gi=Hi.exports,Yi={install(e){function t(t,i){let s=this;const n=new e({router:s.$router,store:s.$store,render(e){return e(Gi,{on:{close:()=>{n.$destroy(),document.body.removeChild(n.$el)},changeRemark:e=>{i.editRemarkCallbak&&i.editRemarkCallbak(e)}},props:{user_id:t}})}}).$mount();document.body.appendChild(n.$el)}e.prototype.$user=t}},Wi=function(){var e=this,t=e._self._c;return t("div",{staticClass:"lum-dialog-mask"},[t("el-container",{directives:[{name:"outside",rawName:"v-outside",value:e.close,expression:"close"}],staticClass:"lum-dialog-box"},[t("el-header",{staticClass:"no-padding header no-select",attrs:{height:"60px"}},[t("p",[e._v("我的联系人")]),t("p",{staticClass:"tools"},[t("i",{staticClass:"el-icon-close",on:{click:e.close}})])]),t("el-main",{staticClass:"main no-padding"},[t("el-container",{staticClass:"full-height"},[t("el-aside",{staticClass:"aside-border",attrs:{width:"250px"}},[t("el-container",{staticClass:"full-height no-select"},[t("el-header",{staticClass:"no-padding search-header",class:{shadow:e.headerShadow},attrs:{height:"50px"}},[t("el-input",{attrs:{clearable:"",size:"small",placeholder:"搜索 | 好友 or 群组","prefix-icon":"el-icon-search"},model:{value:e.keywords,callback:function(t){e.keywords=t},expression:"keywords"}})],1),t("el-main",{staticClass:"no-padding"},[t("el-scrollbar",{ref:"scrollbar2",staticClass:"full-height",attrs:{tag:"section",native:!1}},[t("ul",{staticClass:"friend-items no-select"},e._l(e.search,(function(s){return t("li",{key:s.index_name,on:{click:function(t){return e.triggerContacts(s)}}},[t("el-avatar",{staticClass:"avatar",staticStyle:{"margin-top":"5px"},attrs:{size:25,src:s.avatar}},[t("img",{attrs:{src:i("e366")}})]),t("span",{staticClass:"nickname"},[e._v(" ["+e._s(1==s.type?"友":"群")+"] "+e._s(s.nickname)+" ")]),t("span",{staticClass:"select-btn"},[t("i",{staticClass:"el-icon-success",class:{"i-color-green":s.checked}})])],1)})),0)])],1)],1)],1),t("el-main",{staticClass:"no-padding"},[t("el-container",{staticClass:"full-height"},[t("el-header",{attrs:{height:"40px"}},[t("el-divider",{staticClass:"no-select",attrs:{"content-position":"left"}},[t("span",{staticStyle:{color:"#c4c5c7"}},[e._v(" 已选联系人 ("+e._s(e.selected.length)+") ")])])],1),t("el-main",[t("el-scrollbar",{staticClass:"full-height",attrs:{native:!1,tag:"section"}},[t("div",{staticClass:"selectd-items"},e._l(e.selected,(function(s){return t("div",{key:s.index_name,staticClass:"selectd-item no-select"},[t("el-avatar",{attrs:{size:25,src:s.avatar}},[t("img",{attrs:{src:i("e366")}})]),t("p",[e._v(e._s(s.nickname))]),t("div",{staticClass:"triangle-topleft",class:{group:2==s.type}}),t("div",{staticClass:"del-mask",on:{click:function(t){return e.delContacts(s)}}},[t("i",{staticClass:"el-icon-delete"})])],1)})),0)])],1)],1)],1)],1)],1),t("el-footer",{staticClass:"no-padding footer",attrs:{height:"50px"}},[t("el-button",{attrs:{size:"small",plain:""},on:{click:e.close}},[e._v("取消")]),t("el-button",{attrs:{type:"primary",size:"small"},on:{click:e.confirm}},[e._v(" 确认选择"),t("span",{directives:[{name:"show",rawName:"v-show",value:e.selected.length,expression:"selected.length"}]},[e._v("("+e._s(e.selected.length)+")")])])],1)],1)],1)},Ji=[],Ki=i("23ba"),Vi={name:"UserContacts",data(){return{contacts:[],search:[],keywords:"",headerShadow:!1}},computed:{selected(){return this.contacts.filter(e=>e.checked)}},watch:{keywords(e){this.search=""==e?this.contacts:this.contacts.filter(e=>null!=e.nickname.match(this.keywords))},contacts(e){""==this.keywords&&(this.search=e)}},mounted(){this.scrollEvent()},created(){this.loadFriends(),this.loadUserGroups()},methods:{triggerContacts(e){let t=this.contacts.findIndex(t=>t.index_name==e.index_name);this.contacts[t].checked=!this.contacts[t].checked},delContacts(e){let t=this.contacts.findIndex(t=>t.index_name==e.index_name);this.contacts[t].checked=!1},delAll(){this.contacts.forEach((e,t)=>{this.contacts[t].checked=!1})},close(e){this.delAll(),this.$emit("close"),e.stopPropagation()},confirm(){const e=this.selected.map(e=>({id:e.id,type:e.type}));this.$emit("confirm",e)},loadFriends(){Object(Bi["h"])().then(e=>{if(200==e.code)for(let t of e.data)this.contacts.push({id:t.id,type:1,index_name:"1_"+t.id,nickname:t.friend_remark?t.friend_remark:t.nickname,avatar:t.avatar,checked:!1})})},loadUserGroups(){Object(Ki["f"])().then(e=>{if(200==e.code)for(let t of e.data.rows)this.contacts.push({id:t.id,type:2,index_name:"2_"+t.id,nickname:t.group_name,avatar:t.avatar,checked:!1})})},scrollEvent(){let e=this.$refs.scrollbar2.wrap;e.onscroll=()=>{this.headerShadow=e.scrollTop>0}}}},Qi=Vi,Zi=(i("1330"),Object(c["a"])(Qi,Wi,Ji,!1,null,"4aff93fd",null)),$i=Zi.exports,Xi={install(e){function t(t){let i=this,s=()=>{n.$destroy(),document.body.removeChild(n.$el)};const n=new e({router:i.$router,store:i.$store,render(e){return e($i,{on:{close:s,confirm:e=>{t.confirm(e),s()}},props:{}})}}).$mount();document.body.appendChild(n.$el)}e.prototype.$contacts=t}};s["default"].component(He.name,He),s["default"].component(Ze.name,Ze),s["default"].component(dt.name,dt),s["default"].component(gt.name,gt),s["default"].component(yt.name,yt),s["default"].component(jt.name,jt),s["default"].component(Lt.name,Lt),s["default"].component(Ft.name,Ft),s["default"].component(Kt.name,Kt),s["default"].component(ei.name,ei),s["default"].component(ri.name,ri),s["default"].component(mi.name,mi),s["default"].component(vi.name,vi),s["default"].component(yi.name,yi),s["default"].component(ji.name,ji),s["default"].component(Li.name,Li),s["default"].use(Yi),s["default"].use(Xi);i("8773");var es=i("9169");s["default"].directive("focus",{inserted(e){e.focus()}}),s["default"].directive("paste",{bind(e,t,i){e.addEventListener("paste",(function(e){t.value(e)}))}}),s["default"].directive("drag",{bind(e,t,i){e.addEventListener("dragenter",(function(e){e.stopPropagation(),e.preventDefault()})),e.addEventListener("dragover",(function(e){e.stopPropagation(),e.preventDefault()})),e.addEventListener("dragleave",(function(e){e.stopPropagation(),e.preventDefault()})),e.addEventListener("drop",(function(e){e.stopPropagation(),e.preventDefault(),t.value(e)}))}}),s["default"].directive("outside",es["a"]);var ts=i("323e"),is=i.n(ts),ss=(i("a5d8"),i("a078")),ns=i("5f87");is.a.configure({showSpinner:!1});const as=ss["a"].WEBSITE_NAME,rs=["/auth/login","/auth/register","/auth/forget"];m["a"].beforeEach((e,t,i)=>{document.title=e.meta.title?`${as} | ${e.meta.title}`:as,Object(ns["a"])()?rs.indexOf(e.path)>=0&&i("/"):e.meta.needLogin&&i("/auth/login"),is.a.start(),i()}),m["a"].afterEach(()=>{is.a.done()});var os=function(){var e=this,t=e._self._c;return t("svg",e._g({class:e.svgClass,attrs:{"aria-hidden":"true"}},e.$listeners),[t("use",{attrs:{"xlink:href":e.iconName}})])},cs=[],ls={name:"svg-icon",props:{iconClass:{type:String,required:!0},className:{type:String,default:""}},computed:{iconName(){return"#icon-"+this.iconClass},svgClass(){return this.className?"svg-icon "+this.className:"svg-icon"}}},ds=ls,us=(i("1418"),Object(c["a"])(ds,os,cs,!1,null,"4dd1898d",null)),ms=us.exports;s["default"].component("svg-icon",ms);const As=i("51ff"),hs=e=>e.keys().map(e);hs(As);i("bd4b");s["default"].config.productionTip=!1;const ps=new s["default"]({router:m["a"],store:u["a"],mixins:[p],render:e=>e(d)}).$mount("#app");t["default"]=ps},"59e0":function(e,t,i){e.exports=i.p+"assets/mention-down.04a92f23.svg"},"5f87":function(e,t,i){"use strict";i.d(t,"e",(function(){return c})),i.d(t,"a",(function(){return l})),i.d(t,"f",(function(){return d})),i.d(t,"b",(function(){return u})),i.d(t,"c",(function(){return m})),i.d(t,"g",(function(){return A})),i.d(t,"d",(function(){return h}));var s=i("27ae"),n=i.n(s);const a="LUMNEIM-TOKEN",r="LUMNEIM-USERINFO",o="LUMENIM_SETTING";function c(e,t){return t=(new Date).getTime()+1e3*t-1e5,localStorage.setItem(a,JSON.stringify({token:e,expires:t}))}function l(){const e=JSON.parse(localStorage.getItem(a)||JSON.stringify({token:"",expires:0}));let t=(new Date).getTime();return e.expires<=t?(localStorage.removeItem(a),""):e.token}function d(e){localStorage.setItem(r,n.a.Base64.encode(JSON.stringify(e)))}function u(){const e=n.a.Base64.decode(localStorage.getItem(r)||"");return e?JSON.parse(e):{}}function m(){const e=localStorage.getItem(o);return e?JSON.parse(e):{}}function A(e){localStorage.setItem(o,JSON.stringify(e))}function h(){localStorage.removeItem(a),localStorage.removeItem(r),localStorage.removeItem(o)}},"605e":function(e,t,i){},"64fb":function(e,t,i){e.exports=i.p+"assets/note-book.27dc8515.svg"},"677e":function(e,t,i){e.exports=i.p+"assets/not-data.429b806a.svg"},"69d9":function(e,t,i){e.exports=i.p+"assets/zhuangfa.500e43db.svg"},"782d":function(e,t,i){"use strict";var s=function(){var e=this,t=e._self._c;return t("div",{staticClass:"notify-box pointer"},[t("div",{staticClass:"lbox"},[t("el-avatar",{attrs:{size:"medium",shape:"square",src:e.avatar}})],1),t("div",{staticClass:"rbox"},[t("div",{staticClass:"xheader"},[t("p",{staticClass:"title"},[e._v(" "+e._s(1==e.talk_type?"私信消息通知":"群聊消息通知")+" ")]),t("p",{staticClass:"time"},[t("i",{staticClass:"el-icon-time"}),e._v(" "+e._s(e._f("format")(e.datetime)))])]),t("div",{staticClass:"xbody"},[t("p",[e._v("@"+e._s(e.nickname))]),t("div",[e._v(e._s(e.content))])])])])},n=[],a=i("7f6d"),r={components:{},props:{avatar:{type:String,default:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"},talk_type:{type:Number,default:1},nickname:{type:String,default:""},content:{type:String,default:""},datetime:{type:String,default:""}},data(){return{}},filters:{format(e){return e=e||new Date,Object(a["j"])(e,"{m}/{d} {h}:{i} 分")}}},o=r,c=(i("4068"),i("2877")),l=Object(c["a"])(o,s,n,!1,null,"3f9a8aa4",null);t["a"]=l.exports},"78b1":function(e,t,i){},"7f6d":function(e,t,i){"use strict";i.d(t,"e",(function(){return a})),i.d(t,"d",(function(){return r})),i.d(t,"f",(function(){return o})),i.d(t,"c",(function(){return l})),i.d(t,"j",(function(){return d})),i.d(t,"i",(function(){return u})),i.d(t,"b",(function(){return m})),i.d(t,"a",(function(){return A})),i.d(t,"h",(function(){return h})),i.d(t,"g",(function(){return p})),i.d(t,"k",(function(){return f}));i("14d9");var s=i("5f87"),n=i("a078");function a(e){if(null==e)return"";e=e.replace(/-/g,"/");let t=new Date,i=new Date(e);if(/^[1-9]\d*$/.test(e)&&(i=new Date(1e3*parseInt(e))),t.getTime()<i.getTime()||t.getFullYear()!=i.getFullYear())return d(i,"{y}-{m}-{d} {h}:{i}");if(t.getMonth()!=i.getMonth())return d(i,"{m}-{d} {h}:{i}");if(t.getDate()!=i.getDate()){let e=i.getDate()-t.getDate();return d(i,-1==e?"昨天 {h}:{i}":-2==e?"前天 {h}:{i}":"{m}-{d} {h}:{i}")}let s=t.getTime()-i.getTime();if(t.getHours()!=i.getHours()||s>18e5)return d(i,"{h}:{i}");let n=i.getMinutes()-t.getMinutes();return 0==n?"刚刚":(n=Math.abs(n),n+"分钟前")}function r(e){if(null==e||""==e)return"0";let t=["Bytes","KB","MB","GB","TB","PB","EB","ZB","YB"],i=0,s=parseFloat(e);i=Math.floor(Math.log(s)/Math.log(1e3));let n=s/Math.pow(1e3,i);return n=n.toFixed(2),n+t[i]}function o(e){let t=e.split(".");return t=t[t.length-1],t}function c(e){let t={width:0,height:0},i=e.split("_");if(1==i.length)return t;let s=i[i.length-1].match(/\d+x\d+/g);return null==s?t:(s=s[0].split("x"),{width:parseInt(s[0]),height:parseInt(s[1])})}function l(e){let t=n["a"].BASE_API_URL,i=Object(s["a"])();try{let s=document.createElement("a");s.target="_blank",s.href=`${t}/api/v1/talk/records/file/download?cr_id=${e}&token=${i}`,s.click()}catch(a){}}function d(e,t){if(0===arguments.length)return null;let i;const s=t||"{y}-{m}-{d} {h}:{i}:{s}";"object"===typeof e?i=e:("string"===typeof e&&/^[0-9]+$/.test(e)&&(e=parseInt(e)),"number"===typeof e&&10===e.toString().length&&(e*=1e3),i=new Date(e.replace(/-/g,"/")));const n={y:i.getFullYear(),m:i.getMonth()+1,d:i.getDate(),h:i.getHours(),i:i.getMinutes(),s:i.getSeconds(),a:i.getDay()},a=s.replace(/{([ymdhisa])+}/g,(e,t)=>{const i=n[t];return"a"===t?["日","一","二","三","四","五","六"][i]:i.toString().padStart(2,"0")});return a}function u(e,t=200){const i=c(e);return i.width<t?{width:i.width+"px",height:i.height+"px"}:{width:t+"px",height:parseInt(i.height/(i.width/t))+"px"}}const m=(e,t)=>{let i=document.createElement("textarea");i.style.background="transparent",i.value=e,document.body.appendChild(i),i.select();try{document.execCommand("copy"),t&&t()}catch(s){alert("Oops, unable to copy")}document.body.removeChild(i)};function A(e=""){if(null==e)return"";e=e.replace(/-/g,"/");let t=new Date,i=new Date(e);if(/^[1-9]\d*$/.test(e)&&(i=new Date(1e3*parseInt(e))),t.getTime()<i.getTime())return d(i,"{y}/{m}/{d}");if(t.getFullYear()!=i.getFullYear())return d(i,"{y}/{m}/{d}");if(t.getMonth()!=i.getMonth())return d(i,"{m}/{d}");if(t.getDate()!=i.getDate()){let e=i.getDate()-t.getDate();return d(i,-1==e?"昨天 {h}:{i}":-2==e?"前天 {h}:{i}":"{m}-{d}")}if(t.getHours()!=i.getHours())return d(i,"{h}:{i}");let s=i.getMinutes()-t.getMinutes();return 0==s?"刚刚":(s=Math.abs(s),s+"分钟前")}function h(e){return function(t,i){let s=0;return e.call(this,t,i)?s=-1:e.call(this,i,t)&&(s=1),s}}function p(e){return function(t,i){let s,n=0;do{s=e[n++](t,i)}while(0==s&&n<e.length);return s}}function f(e,t="#409eff"){let i=/(\b(https?|ftp|file):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gi;return e.replace(i,`<a href='$1' target="_blank" style="color:${t};text-decoration: revert;">$1</a >`)}},8033:function(e,t,i){"use strict";i("1718")},8773:function(e,t){},8798:function(e,t,i){e.exports=i.p+"assets/note.edfc14f2.svg"},8953:function(e,t,i){"use strict";i("c77c")},"89ea":function(e,t,i){"use strict";i("f009")},"8e1d":function(e,t,i){},9078:function(e,t,i){"use strict";i("297e")},"91d2":function(e,t,i){"use strict";i.d(t,"b",(function(){return n})),i.d(t,"a",(function(){return a})),i.d(t,"c",(function(){return r})),i.d(t,"d",(function(){return o}));var s=i("b775");const n=()=>Object(s["a"])("/api/v1/emoticon/list"),a=()=>Object(s["a"])("/api/v1/emoticon/system/list"),r=e=>Object(s["b"])("/api/v1/emoticon/system/install",e),o=e=>Object(s["c"])("/api/v1/emoticon/customize/create",e)},"9a11":function(e,t,i){"use strict";i("cf46")},"9e65":function(e,t,i){"use strict";i("b3f1")},a078:function(e,t,i){"use strict";t["a"]={WEBSITE_NAME:"Lumen IM",BASE_API_URL:"https://im-api.gzydong.club",BASE_WS_URL:"wss://im-api.gzydong.club/wss/default.io"}},a18c:function(e,t,i){"use strict";var s=i("2b0e"),n=i("8c4f"),a={path:"/auth",name:"auth",redirect:"/auth/login",component:()=>i.e("chunk-56095c0e").then(i.bind(null,"a853")),children:[{path:"/auth/login",meta:{title:"账号登录？",needLogin:!1},component:()=>i.e("chunk-a4d24326").then(i.bind(null,"bd01"))},{path:"/auth/register",meta:{title:"账号注册？",needLogin:!1},component:()=>i.e("chunk-ded8f098").then(i.bind(null,"6d75"))},{path:"/auth/forget",meta:{title:"找回密码？",needLogin:!1},component:()=>i.e("chunk-bd9e2e00").then(i.bind(null,"7934"))}]},r={path:"/settings",name:"settings",meta:{title:"个人设置",needLogin:!0},redirect:"/settings/detail",component:()=>i.e("chunk-3685d128").then(i.bind(null,"7e3b")),children:[{path:"/settings/detail",meta:{title:"个人信息",needLogin:!0},component:()=>Promise.all([i.e("chunk-2da147f7"),i.e("chunk-0c5fcb02")]).then(i.bind(null,"8cb0"))},{path:"/settings/security",meta:{title:"安全设置",needLogin:!0},component:()=>i.e("chunk-391be96a").then(i.bind(null,"54f1"))},{path:"/settings/binding",meta:{title:"账户绑定",needLogin:!0},component:()=>i.e("chunk-6e4984c5").then(i.bind(null,"7783"))},{path:"/settings/personalize",meta:{title:"个性化设置",needLogin:!0},component:()=>i.e("chunk-53324ea6").then(i.bind(null,"d636"))},{path:"/settings/notification",meta:{title:"消息设置",needLogin:!0},component:()=>i.e("chunk-8b1066e6").then(i.bind(null,"8c9d"))}]},o={path:"/contacts",name:"contacts",redirect:"/contacts/apply",component:()=>Promise.all([i.e("chunk-36529214"),i.e("chunk-dd55f63e")]).then(i.bind(null,"9bf6")),children:[{path:"/contacts/apply",meta:{title:"我的联系人",needLogin:!0},component:()=>i.e("chunk-3c23c872").then(i.bind(null,"cac2"))},{path:"/contacts/friends",meta:{title:"我的好友",needLogin:!0},component:()=>i.e("chunk-d50dcbba").then(i.bind(null,"6382"))},{path:"/contacts/groups",meta:{title:"我的群组",needLogin:!0},component:()=>Promise.all([i.e("chunk-c2346170"),i.e("chunk-2da147f7"),i.e("chunk-2cdb6fa8"),i.e("chunk-eb65d764")]).then(i.bind(null,"52c1"))}]};s["default"].use(n["a"]);const c=[a,r,o,{path:"/",name:"home",component:()=>Promise.all([i.e("chunk-c2346170"),i.e("chunk-2da147f7"),i.e("chunk-2cdb6fa8"),i.e("chunk-36529214"),i.e("chunk-106ff195")]).then(i.bind(null,"1d11")),meta:{title:"",needLogin:!0}},{path:"/message",name:"message",component:()=>Promise.all([i.e("chunk-c2346170"),i.e("chunk-2da147f7"),i.e("chunk-2cdb6fa8"),i.e("chunk-36529214"),i.e("chunk-106ff195")]).then(i.bind(null,"1d11")),meta:{title:"消息通知",needLogin:!0}},{path:"/note",name:"note",component:()=>Promise.all([i.e("chunk-c2346170"),i.e("chunk-7129bc80")]).then(i.bind(null,"4024")),meta:{title:"我的笔记",needLogin:!0}},{path:"/example",name:"example",component:()=>i.e("chunk-4b4dbc70").then(i.bind(null,"ceda")),meta:{title:"测试案例",needLogin:!1}},{path:"*",name:"404 NotFound",component:()=>Promise.all([i.e("chunk-c2346170"),i.e("chunk-c47c2652")]).then(i.bind(null,"038c")),meta:{title:"404 NotFound",needLogin:!1}}];t["a"]=new n["a"]({routes:c,mode:"history"})},a7dc:function(e,t){e.exports="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACgAAAAoCAMAAAC7IEhfAAAAzFBMVEUAAAD7ywP7ywT80wH6wwb6xgX80wH6wwb7zwL7zgP5xAb7ywT5xAb5wgf7ywT80gH80gL7ywP80gH7ywT7zgP6yAX80wH5wQf80QL80wH6xgb81AH5wgf6xwX81AH5wQf81AH5wwb80gL5wQf7zgP5wgf80gH7zAP5wwb6ygT6xwX70AL7zgOudAD6xQb2wgXVnwLwvwPRmgLDigG1ewCxdwDgqQTcpgPYoQPrvALhsAG6gQHosgTntAP1yAPMlQLJkgLJkQK/hgG3fgAADXCMAAAAJnRSTlMATgT7znJxcHAM/fnz7uzs09HMqS4mJfry8u3t1tXVqqpcWy0tD14bIcIAAAGzSURBVDjLnZTXcsIwEEUdcAFCCy290GwgLHKld/7/n6IVljBGDgznxbtXZzSz9niVO+noP+X3dPq9/KN3kq2s/mVG+NKzUi2VKZkxSpnUpdeomBIqjbj38GpKeX0491ppM4F06+w+9JLMyJ2NF/MfXhpiXjGHnAqfPfN7hUz4nkvXxFKWiboI5u7sdDpz56LWmVgehswBgjVv1gHAnDdl9GpDjg0AM97MaGOLoxqOIjrHB8/ijeWB74gjHKdqCfqOFcHpn+oqFZ+sG3iiYvEWsUjFx1vERxT7N4Bi8VgOpAKPizgMFuQQrGTeKjgQfOIwVSyWAP5Acp8PwC7A16MNKCQAsAcX2AABwULDT8iiKQBM4t6EhlNW1RTKJys9Gm5IVCMbGnms/FQQ7RjvaezbDtcc26fBnrBGY2L2bYSQLSCLnTudursFIFvCjt7ClWGMjowXcMZiHB4Y/OdSw6A39kDgjXthrIrFUs/3OGQ5sV3XniyJiPL1yALI9RLJnS2VZi7Ra8aWVF7u5fl9groq89S6ZJEahbhWMFKKjK72EdU+tK6SSNv4VgvPzwX122gr9/EHUym1IM88uoYAAAAASUVORK5CYII="},b3f1:function(e,t,i){},b5fa:function(e,t,i){"use strict";i("39ea")},b775:function(e,t,i){"use strict";i.d(t,"a",(function(){return u})),i.d(t,"b",(function(){return m})),i.d(t,"c",(function(){return A}));var s=i("e5f2"),n=i.n(s),a=i("bc3a"),r=i.n(a),o=i("a078"),c=i("5f87");const l=r.a.create({baseURL:o["a"].BASE_API_URL,timeout:2e4}),d=e=>(e.response&&(401==e.response.status?(Object(c["d"])(),location.reload()):403==e.response.status?n()({title:"警告",type:"warning",message:"无权限操作 ...",position:"top-right"}):n()({message:"网络异常,请稍后再试...",position:"top-right"})),Promise.reject(e));l.interceptors.request.use(e=>{const t=Object(c["a"])();return t&&(e.headers["Authorization"]="Bearer "+t),e},d),l.interceptors.response.use(e=>e.data,d);const u=(e,t={},i={})=>l({url:e,params:t,method:"get",...i}),m=(e,t={},i={})=>l({url:e,method:"post",data:t,...i}),A=(e,t={},i={})=>l({url:e,method:"post",data:t,...i})},bd4b:function(e,t,i){},c24f:function(e,t,i){"use strict";i.d(t,"e",(function(){return n})),i.d(t,"d",(function(){return a})),i.d(t,"c",(function(){return r})),i.d(t,"f",(function(){return o})),i.d(t,"a",(function(){return c})),i.d(t,"b",(function(){return l}));var s=i("b775");const n=e=>Object(s["b"])("/api/v1/users/change/password",e),a=e=>Object(s["b"])("/api/v1/users/change/mobile",e),r=e=>Object(s["b"])("/api/v1/users/change/email",e),o=e=>Object(s["b"])("/api/v1/users/change/detail",e),c=()=>Object(s["a"])("/api/v1/users/detail"),l=()=>Object(s["a"])("/api/v1/users/setting")},c77c:function(e,t,i){},cb70:function(e,t,i){"use strict";i("164c")},cf46:function(e,t,i){},d3d4:function(e,t,i){e.exports=i.p+"static/img/default-user-banner.a7207270.png"},d6d2:function(e,t,i){"use strict";var s=i("e5f2"),n=i.n(s),a=i("ade3"),r=i("4360"),o=i("a078");class c{constructor(e,t){Object(a["a"])(this,"connect",null),Object(a["a"])(this,"config",{heartbeat:{setInterval:null,pingInterval:2e4,pingTimeout:6e4},reconnect:{lockReconnect:!1,setTimeout:null,time:5e3,number:1e3}}),Object(a["a"])(this,"lastTime",0),Object(a["a"])(this,"onCallBacks",[]),Object(a["a"])(this,"defaultEvent",{onError:e=>{},onOpen:e=>{},onClose:e=>{}}),this.urlCallBack=e,this.events=Object.assign({},this.defaultEvent,t),this.on("connect",e=>{this.config.heartbeat.pingInterval=1e3*e.ping_interval,this.config.heartbeat.pingTimeout=1e3*e.ping_timeout,this.heartbeat()})}on(e,t){return this.onCallBacks[e]=t,this}loadSocket(){const e=this.urlCallBack(),t=new WebSocket(e);t.onerror=this.onError.bind(this),t.onopen=this.onOpen.bind(this),t.onmessage=this.onMessage.bind(this),t.onclose=this.onClose.bind(this),this.connect=t}connection(){null==this.connect&&this.loadSocket()}reconnect(){clearTimeout(this.config.reconnect.setTimeout),this.config.reconnect.setTimeout=setTimeout(()=>{this.connection(),console.log("网络连接已断开，正在尝试重新连接...")},this.config.reconnect.time)}onParse(e){const{event:t,content:i}=JSON.parse(e.data);return{event:t,data:i,orginData:e.data}}onOpen(e){this.lastTime=(new Date).getTime(),this.events.onOpen(e),this.ping()}onClose(e){this.events.onClose(e),this.connect.close(),this.connect=null,1006==e.code&&this.reconnect()}onError(e){this.events.onError(e),this.connect.close(),this.connect=null,this.reconnect()}onMessage(e){this.lastTime=(new Date).getTime();let t=this.onParse(e);this.onCallBacks.hasOwnProperty(t.event)?this.onCallBacks[t.event](t.data,t.orginData):console.warn(`WsSocket 消息事件[${t.event}]未绑定...`)}heartbeat(){this.config.heartbeat.setInterval=setInterval(()=>{let e=(new Date).getTime();e-this.lastTime>this.config.heartbeat.pingTimeout?(this.connect&&this.connect.close(),this.reconnect()):this.ping()},this.config.heartbeat.pingInterval)}ping(){this.connect.send('{"event":"heartbeat","content":"ping"}')}send(e){this.connect.send(JSON.stringify(e))}close(){this.connect.close()}emit(e,t){const i=JSON.stringify({event:e,data:t});this.connect&&1===this.connect.readyState?this.connect.send(i):(alert("WebSocket 连接已关闭..."),console.error("WebSocket 连接已关闭...",this.connect))}}var l=c,d=i("5f87"),u=i("a18c");class m{constructor(){this.$notify=n.a}getStoreInstance(){return r["a"]}getAccountId(){return r["a"].state.user.uid}getTalkParams(){let{talk_type:e,receiver_id:t,index_name:i}=r["a"].state.dialogue;return{talk_type:e,receiver_id:t,index_name:i}}isTalk(e,t,i){let s=this.getTalkParams();return e==s.talk_type&&(s.receiver_id==i||s.receiver_id==t)}isTalkPage(){let e=u["a"].currentRoute.path;return!("/message"!=e&&"/"!=e)}}var A=m;class h extends A{constructor(e){super(),Object(a["a"])(this,"resource",void 0),this.resource=e}handle(){let e=this.getTalkParams();return null!==e.index_name&&(1==e.talk_type&&(e.receiver_id==this.resource.sender_id&&void this.getStoreInstance().commit("UPDATE_KEYBOARD_EVENT")))}}var p=h;class f extends A{constructor(e){super(),Object(a["a"])(this,"resource",void 0),this.resource=e}handle(){this.getStoreInstance().commit("UPDATE_TALK_ITEM",{index_name:"1_"+this.resource.user_id,is_online:this.resource.status})}}var g=f,v=i("2b0e"),_=i("56d7"),b=i("782d"),k=i("d800"),w=i("0e77"),x=i("7f6d");class y extends A{constructor(e){super(),Object(a["a"])(this,"resource",void 0),Object(a["a"])(this,"sender_id",0),Object(a["a"])(this,"receiver_id",0),Object(a["a"])(this,"talk_type",0),this.sender_id=e.sender_id,this.receiver_id=e.receiver_id,this.talk_type=e.talk_type,this.resource=e.data}isCurrSender(){return this.sender_id==this.getAccountId()}getIndexName(){if(2==this.talk_type)return`${this.talk_type}_${this.receiver_id}`;let e=this.isCurrSender()?this.receiver_id:this.sender_id;return`${this.talk_type}_${e}`}getFloatType(){let e=this.resource.user_id;return 0==e?"center":e==this.getAccountId()?"right":"left"}getTalkText(){let e=this.resource.content;switch(this.resource.msg_type){case 2:let t=this.resource.file.file_type;e=1==t?"[图片消息]":"[文件消息]";break;case 3:e="[会话记录]";break;case 4:e="[代码消息]";break;case 8:e="[登录提醒]";break}return e}handle(){if(this.isTalkPage()||!this.isCurrSender()&&this.showMessageNocice(),-1==Object(w["b"])(this.getIndexName()))return this.addTalkItem();let e=this.isTalk(this.talk_type,this.receiver_id,this.sender_id);e?this.insertTalkRecord():this.updateTalkItem()}showMessageNocice(){let e=this.resource.avatar,t=this.resource.nickname,i=this.resource.talk_type,s=this.receiver_id;2==i?(e=this.resource.group_avatar,t+=`【 ${this.resource.group_name} 】`):s=this.sender_id,this.$notify({message:_["default"].$createElement(b["a"],{props:{avatar:e,talk_type:i,nickname:t,content:this.getTalkText(),datetime:this.resource.created_at}}),customClass:"im-notify",duration:3e3,position:"top-right",onClick:function(){this.close(),Object(w["e"])(i,s)}})}addTalkItem(){let e=this.sender_id,t=this.talk_type;(1==t&&this.receiver_id!=this.getAccountId()||2==t)&&(e=this.receiver_id),Object(k["d"])({talk_type:t,receiver_id:e}).then(({code:e,data:t})=>{200==e&&this.getStoreInstance().commit("PUSH_TALK_ITEM",Object(w["c"])(t))})}insertTalkRecord(){let e=this.getStoreInstance(),t=this.resource;t.float=this.getFloatType(),e.commit("PUSH_DIALOGUE",t);let i=document.getElementById("lumenChatPanel"),s=Math.ceil(i.scrollTop)+i.clientHeight>=i.scrollHeight;s||t.user_id==this.getAccountId()?v["default"].nextTick(()=>{i.scrollTop=i.scrollHeight}):e.commit("SET_TLAK_UNREAD_MESSAGE",{content:this.getTalkText(),nickname:t.nickname}),e.commit("UPDATE_TALK_ITEM",{index_name:this.getIndexName(),msg_text:this.getTalkText(),updated_at:Object(x["j"])(new Date)}),1==this.talk_type&&this.getAccountId()!==this.sender_id&&Object(k["a"])({talk_type:1,receiver_id:this.sender_id})}updateTalkItem(){let e=this.getStoreInstance();e.commit("UPDATE_TALK_MESSAGE",{index_name:this.getIndexName(),msg_text:this.getTalkText(),updated_at:Object(x["j"])(new Date)})}}var O=y;class C extends A{constructor(e){super(),Object(a["a"])(this,"resource",void 0),this.resource=e}handle(){this.isTalk(this.resource.talk_type,this.resource.receiver_id,this.resource.sender_id)&&r["a"].commit("UPDATE_DIALOGUE",{id:this.resource.record_id,is_revoke:1})}}var S=C;class T extends A{constructor(e){super(),Object(a["a"])(this,"resource",void 0),this.resource=e}handle(){this.$notify({message:"您有一条入群消息通知,请注意查收...",duration:5e3})}}var E=T;i("14d9");class j extends A{constructor(e){super(),Object(a["a"])(this,"resource",void 0),this.resource=e}handle(){r["a"].commit("INCR_APPLY_NUM"),this.$notify({title:"好友申请",dangerouslyUseHTMLString:!0,message:'<p style="color:red;margin-top:10px;">您有一条好友申请消息,请注意查收...</p>',duration:0,type:"info",customClass:"pointer",onClick:function(){r["a"].commit("SET_APPLY_NUM",0),u["a"].push({path:"/contacts/apply",query:{t:(new Date).getTime()}}),this.close()}})}}var q=j;class I{constructor(){Object(a["a"])(this,"socket",void 0),this.socket=new l(()=>{let e=Object(d["a"])();return""==e&&window.location.reload(),o["a"].BASE_WS_URL+"?token="+Object(d["a"])()},{onError:e=>{console.log("Websocket 连接失败回调方法")},onOpen:e=>{r["a"].commit("UPDATE_SOCKET_STATUS",!0),r["a"].dispatch("LOAD_TALK_ITEMS")},onClose:e=>{r["a"].commit("UPDATE_SOCKET_STATUS",!1)}}),this.registerEvents()}connect(){this.socket.connection()}registerEvents(){this.socket.on("heartbeat",e=>{}),this.socket.on("event_talk",e=>{new O(e).handle()}),this.socket.on("event_login",e=>{new g(e).handle()}),this.socket.on("event_talk_keyboard",e=>{new p(e).handle()}),this.socket.on("event_talk_revoke",e=>{new S(e).handle()}),this.socket.on("event_contact_apply",e=>{new q(e).handle()}),this.socket.on("event_talk_join_group",e=>{new E(e).handle()}),this.socket.on("event_error",e=>{n()({title:"友情提示",message:e.message,type:"warning"})})}send(e){this.socket.send(e)}emit(e,t){this.socket.emit(e,t)}}t["a"]=new I},d800:function(e,t,i){"use strict";i.d(t,"i",(function(){return n})),i.d(t,"d",(function(){return a})),i.d(t,"e",(function(){return r})),i.d(t,"t",(function(){return o})),i.d(t,"a",(function(){return c})),i.d(t,"s",(function(){return l})),i.d(t,"h",(function(){return d})),i.d(t,"r",(function(){return u})),i.d(t,"f",(function(){return m})),i.d(t,"p",(function(){return A})),i.d(t,"m",(function(){return h})),i.d(t,"n",(function(){return p})),i.d(t,"o",(function(){return f})),i.d(t,"l",(function(){return g})),i.d(t,"g",(function(){return v})),i.d(t,"k",(function(){return _})),i.d(t,"j",(function(){return b})),i.d(t,"b",(function(){return k})),i.d(t,"q",(function(){return w})),i.d(t,"c",(function(){return x}));var s=i("b775");const n=e=>Object(s["a"])("/api/v1/talk/list",e),a=e=>Object(s["b"])("/api/v1/talk/create",e),r=e=>Object(s["b"])("/api/v1/talk/delete",e),o=e=>Object(s["b"])("/api/v1/talk/topping",e),c=e=>Object(s["b"])("/api/v1/talk/unread/clear",e),l=e=>Object(s["a"])("/api/v1/talk/records",e),d=e=>Object(s["a"])("/api/v1/talk/records/forward",e),u=e=>Object(s["b"])("/api/v1/talk/disturb",e),m=e=>Object(s["a"])("/api/v1/talk/records/history",e),A=e=>Object(s["b"])("/api/v1/talk/message/text",e),h=e=>Object(s["b"])("/api/v1/talk/message/code",e),p=e=>Object(s["b"])("/api/v1/talk/message/file",e),f=e=>Object(s["c"])("/api/v1/talk/message/image",e),g=e=>Object(s["b"])("/api/v1/talk/message/emoticon",e),v=e=>Object(s["b"])("/api/v1/talk/message/forward",e),_=e=>Object(s["b"])("/api/v1/talk/message/revoke",e),b=e=>Object(s["b"])("/api/v1/talk/message/delete",e),k=e=>Object(s["b"])("/api/v1/talk/message/collect",e),w=e=>Object(s["b"])("/api/v1/talk/message/vote",e),x=e=>Object(s["b"])("/api/v1/talk/message/vote/handle",e)},dc4c:function(e,t,i){"use strict";i.d(t,"h",(function(){return n})),i.d(t,"d",(function(){return a})),i.d(t,"e",(function(){return r})),i.d(t,"i",(function(){return o})),i.d(t,"c",(function(){return c})),i.d(t,"g",(function(){return l})),i.d(t,"a",(function(){return d})),i.d(t,"b",(function(){return u})),i.d(t,"f",(function(){return m})),i.d(t,"j",(function(){return A}));var s=i("b775");const n=e=>Object(s["a"])("/api/v1/contact/list",e),a=e=>Object(s["b"])("/api/v1/contact/delete",e),r=e=>Object(s["b"])("/api/v1/contact/edit-remark",e),o=e=>Object(s["a"])("/api/v1/contact/search",e),c=e=>Object(s["b"])("/api/v1/contact/apply/create",e),l=e=>Object(s["a"])("/api/v1/contact/apply/records",e),d=e=>Object(s["b"])("/api/v1/contact/apply/accept",e),u=e=>Object(s["b"])("/api/v1/contact/apply/decline",e),m=()=>Object(s["a"])("/api/v1/contact/apply/unread-num"),A=e=>Object(s["a"])("/api/v1/contact/detail",e)},e062:function(e,t,i){"use strict";i("3e34")},e366:function(e,t){e.exports="data:image/jpeg;base64,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"},f009:function(e,t,i){},f383:function(e,t,i){"use strict";i("0ad5")},f6d2:function(e,t,i){"use strict";i("00e2")},f843:function(e,t,i){"use strict";i("1e9c")},ff0f:function(e,t,i){"use strict";i("78b1")}});