import{_ as R,r as U,m as H,o as ue,b as V,c as i,e as F,w as M,f as e,j as I,g as d,a as s,i as p,F as D,y as E,t as f,k as S,aO as ae,v as N,aP as ce,a1 as pe,aQ as me,aR as ve,aS as he,aT as fe,aU as ge,aV as we,K,L as j,aW as Y,ab as ee,A as T,E as ne,l as G,aX as ye,C as Ce,ae as de,x as Q,n as ke,aY as $e,aZ as re,p as X,D as xe,a_ as be,B as Se,a$ as Me,a8 as oe,b0 as ze,b1 as Ne,b2 as Ie,b3 as De,z as Ve}from"./index-cfea8079.js";import{_ as te}from"./no-data-bde0995b.js";import{L as Z}from"./Loading-62718f47.js";import{C as Ae,T as Fe,S as Te,F as Le,O as Ee,E as ie,I as Be,a as Ue,b as Re,D as Ke,_ as je}from"./md-7274cdb4.js";import{a as le,U as Oe}from"./UploadOne-7e19dbec.js";import{I as J}from"./Delete-45955bb9.js";import{P as Pe}from"./Plus-ac52bf6f.js";import{D as Xe,S as Ye}from"./Share-14d9d3e0.js";import{S as We}from"./Search-f8233675.js";import{f as Ge}from"./strings-8042df5b.js";import{C as He}from"./Close-ba5b9ed5.js";const q=m=>(K("data-v-09eb5c64"),m=m(),j(),m),qe={class:"main-box el-container is-vertical o-hidden"},Qe={class:"el-header bdr-b header",style:{height:"50px"}},Ze={class:"type-items"},Je={style:{display:"flex","align-items":"center"}},et=q(()=>e("img",{src:te,alt:""},null,-1)),tt={class:"at-header"},st={class:"at-name"},nt={class:"text-ellipsis"},ot={class:"at-tool"},it=q(()=>e("div",{class:"tip"},"剩余15天",-1)),lt={class:"icons"},at={class:"at-body pointer"},ct={class:"content"},dt={class:"datetime"},rt={class:"abstract"},_t={class:"image"},ut=q(()=>e("img",{src:te,alt:""},null,-1)),pt={class:"at-header"},mt={class:"at-name"},vt={class:"text-ellipsis"},ht={class:"at-tool"},ft={class:"tip"},gt={class:"icons"},wt={class:"at-body pointer"},yt={class:"content"},Ct={class:"abstract"},kt=q(()=>e("footer",{class:"el-footer footer"},"移动至回收站的笔记及附件，将在 30 天后自动清除。",-1)),$t={__name:"RecycleModal",emits:["close"],setup(m,{emit:t}){const g=t,a=U(!0),n=H({note:{loading:!1,items:[]},annex:{loading:!1,items:[]}}),_=U(1),y=()=>{g("close")},w=b=>{_.value=b},u=()=>{n.note.loading=!0,me({page:1,find_type:5}).then(b=>{n.note.items=b.data.items}).finally(()=>{n.note.loading=!1})},C=()=>{n.annex.loading=!0,ve().then(b=>{b.code==200&&(n.annex.items=b.data.items||[])}).finally(()=>{n.annex.loading=!1})},x=(b,z)=>{he({article_id:z}).then(o=>{o.code==200&&n.note.items.splice(b,1)})},B=(b,z)=>{fe({article_id:z}).then(o=>{o.code==200&&n.note.items.splice(b,1)})},O=(b,z)=>{ge({annex_id:data.id}).then(o=>{o.code==200&&n.annex.items.splice(b,1)})},W=(b,z)=>{we({annex_id:z}).then(o=>{o.code==200&&n.annex.items.splice(b,1)})};return ue(()=>{u(),C()}),(b,z)=>{const o=V("n-icon"),c=V("n-empty");return i(),F(s(pe),{show:a.value,"onUpdate:show":z[2]||(z[2]=v=>a.value=v),preset:"card",title:"回收站管理",class:"modal-radius",style:{"max-width":"750px"},"on-after-leave":y,segmented:{content:!0},"header-style":{padding:"20px 15px"},"content-style":{padding:0}},{default:M(()=>[e("section",qe,[e("header",Qe,[e("div",Ze,[e("span",{class:I({active:_.value==1}),onClick:z[0]||(z[0]=v=>w(1))}," 笔记列表 ",2),e("span",{class:I({active:_.value==2}),onClick:z[1]||(z[1]=v=>w(2))}," 附件列表 ",2)]),e("div",Je,[d(o,{size:20,class:"pointer",component:s(Ae)},null,8,["component"])])]),_.value==1?(i(),p("main",{key:0,class:I(["el-main me-scrollbar me-scrollbar-thumb",{"flex-center":n.note.items.length==0,"main-bag":n.note.items.length>0}])},[n.note.loading?(i(),F(Z,{key:0})):n.note.items.length===0?(i(),F(c,{key:1,size:"200",description:"暂无相关数据"},{icon:M(()=>[et]),_:1})):(i(!0),p(D,{key:2},E(n.note.items,(v,l)=>(i(),p("div",{class:"article",key:v.id},[e("div",tt,[e("div",st,[e("span",nt,f(v.title),1)]),e("div",ot,[it,e("div",lt,[d(o,{size:18,color:"#03a9f4",class:"pointer",component:s(le),onClick:r=>B(l,v.id)},null,8,["component","onClick"]),d(o,{size:18,color:"red",class:"pointer",component:s(J),onClick:r=>x(l,v.id)},null,8,["component","onClick"])])])]),e("div",at,[e("div",ct,[e("div",dt,[e("span",null,f(v.created_at.substr(0,10)),1),e("span",null,f(v.class_name),1)]),e("div",rt,f(v.abstract.replace(/[\r\n]/g,"").replace(/(<([^>]+)>)/gi,"")),1)]),S(e("div",_t,[d(s(ae),{width:"56",height:"56","preview-disabled":"",style:{"border-radius":"2px"},src:v.image,"fallback-src":"https://07akioni.oss-cn-beijing.aliyuncs.com/07akioni.jpeg"},null,8,["src"])],512),[[N,v.image]])])]))),128))],2)):(i(),p("main",{key:1,class:I(["el-main me-scrollbar",{"flex-center":n.annex.items.length==0,"main-bag":n.annex.items.length>0}])},[n.annex.loading?(i(),F(Z,{key:0})):n.annex.items.length==0?(i(),F(c,{key:1,size:"200",description:"暂无相关数据"},{icon:M(()=>[ut]),_:1})):(i(!0),p(D,{key:2},E(n.annex.items,(v,l)=>(i(),p("div",{class:"article",key:v.id},[e("div",pt,[e("div",mt,[e("span",vt,f(v.original_name),1)]),e("div",ht,[e("div",ft,"剩余"+f(v.day)+"天",1),e("div",gt,[d(o,{size:18,color:"#03a9f4",class:"pointer",component:s(Fe),onClick:r=>s(ce)(v.id)},null,8,["component","onClick"]),d(o,{size:18,color:"#03a9f4",class:"pointer",component:s(le),onClick:r=>O(l,v.id)},null,8,["component","onClick"]),d(o,{size:18,color:"red",class:"pointer",component:s(J),onClick:r=>W(l,v.id)},null,8,["component","onClick"])])])]),e("div",wt,[e("div",yt,[e("div",Ct,"所属笔记："+f(v.title),1)])])]))),128))],2)),kt])]),_:1},8,["show"])}}},xt=R($t,[["__scopeId","data-v-09eb5c64"]]);const _e=m=>(K("data-v-0a8fbbff"),m=m(),j(),m),bt={class:"el-container is-vertical section"},St={class:"el-header menu-header"},Mt={class:"el-header menu-subheader"},zt=_e(()=>e("span",null,"我的笔记",-1)),Nt={class:"el-main height100"},It=["onClick"],Dt=_e(()=>e("span",{class:"dot"},"●",-1)),Vt=["onClick"],At={key:0},Ft=["value","onBlur"],Tt=["onContextmenu"],Lt={key:0},Et={__name:"NoteMenu",setup(m){const t=Y();let g=U("0-0");const a=H([{name:"近期编辑",indexName:"0-0",submenus:[]},{name:"我的收藏",indexName:"1-0",submenus:[]},{name:"笔记分类",indexName:"2-1",isShowSub:!0,isShowCount:!0,isSubNode:!0,submenus:[]},{name:"笔记标签",indexName:"3-0",isShowSub:!1,isShowCount:!0,isSubNode:!0,submenus:[]}]),n=U(!1),_=H({options:[],show:!1,dropdownX:0,dropdownY:0,item:{}}),y=()=>{Q(()=>t.class,()=>{let o=[];for(const c of t.class)o.push({id:c.id,name:c.class_name,count:c.count,isEdit:!1,indexName:"2-"+c.id});a[2].submenus=o},{deep:!0})},w=()=>{Q(()=>t.tags,()=>{let o=[];for(const c of t.tags)o.push({id:c.id,name:c.tag_name,count:c.count,isEdit:!1,indexName:"3-"+c.id});a[3].submenus=o},{deep:!0})},u=()=>{let o=g.value;return o.substring(0,1)!="2"?0:parseInt(o.substring(2))},C=(o,c)=>{if(o.isSubNode)o.isShowSub=!o.isShowSub;else switch(g.value=o.indexName,c){case 0:t.loadNoteList({page:1,find_type:1});break;case 1:t.loadNoteList({page:1,find_type:2});break}},x=(o,c)=>{o.isEdit||(c===2?t.loadNoteList({page:1,find_type:3,cid:o.id}):c===3&&t.loadNoteList({page:1,find_type:4,cid:o.id}),g.value=o.indexName)},B=o=>{o=="class"?(a[2].isShowSub=!0,a[2].submenus.unshift({id:-1,name:"",isEdit:!0,indexName:"2--1"})):o=="tag"&&(a[3].isShowSub=!0,a[3].submenus.unshift({id:-1,name:"",isEdit:!0,indexName:"3--1"}))},O=(o,c,v,l)=>{let r=o.target.value.trim(),h=l.id==-1?0:l.id;if(r==""&&l.id==-1)return a[c].submenus.splice(v,1);if(r==""&&l.id>0)return l.isEdit=!1;c==2?t.editClass(h,r):c==3&&t.editTag(h,r)},W=(o,c,v,l)=>{_.show=!1,_.item={index:c,index2:v,submenu:l},_.options=[{label:"重命名",key:"rename"},{label:"删除",key:"delete"}],ke(()=>{_.show=!0,_.dropdownX=o.clientX,_.dropdownY=o.clientY}),o.preventDefault()},b=o=>{let c=a[_.item.index].submenus[_.item.index2];o=="rename"?c.isEdit=!0:o=="delete"&&(_.item.index==2?t.deleteClass(c.id):_.item.index==3&&t.deleteTag(c.id)),_.show=!1};return(()=>{t.loadClass(),t.loadTags(),t.loadNoteList({},!0)})(),y(),w(),(o,c)=>{const v=V("n-button"),l=V("n-icon"),r=ee("focus");return i(),p(D,null,[e("section",bt,[e("header",St,[d(v,{type:"primary",round:"",onClick:c[0]||(c[0]=()=>{s(t).addNewNote(u())}),class:"btn-add"},{default:M(()=>[T(" + 新建笔记 ")]),_:1}),d(s(ne),{class:"tools-menus",animated:!0,trigger:"click","show-arrow":!1,onSelect:B,options:[{label:"创建分类",key:"class"},{label:"创建标签",key:"tag"}]},{default:M(()=>[d(v,{circle:""},{default:M(()=>[d(l,{size:22,component:s(Pe)},null,8,["component"])]),_:1})]),_:1})]),e("header",Mt,[zt,e("span",null,[d(v,{type:"primary",size:"tiny",ghost:"",round:"",color:"red",onClick:c[1]||(c[1]=h=>n.value=!0)},{default:M(()=>[T(" 回收站 ")]),_:1})])]),e("main",Nt,[d(s(de),null,{default:M(()=>[(i(!0),p(D,null,E(a,(h,$)=>(i(),p("div",{key:$,class:"menu"},[e("div",{class:I(["menu-level1 pointer",{actived:h.indexName==s(g)}]),onClick:k=>C(h,$)},[Dt,e("span",null,[T(f(h.name)+" ",1),h.isShowCount?(i(),p(D,{key:0},[T(" ("+f(h.submenus.length)+") ",1)],64)):G("",!0)]),S(d(l,{class:"nav-icon",size:"18",component:s(Xe)},null,8,["component"]),[[N,h.submenus.length]])],10,It),(i(!0),p(D,null,E(h.submenus,(k,A)=>S((i(),p("div",{key:A,class:I(["menu-level2 pointer",{actived:k.indexName==s(g)}]),onClick:P=>x(k,$)},[k.isEdit?(i(),p("p",At,[S(e("input",{value:k.name,onKeyup:c[2]||(c[2]=ye(P=>P.target.blur(),["enter"])),onBlur:P=>O(P,$,A,k),type:"text"},null,40,Ft),[[r]])])):(i(),p("p",{key:1,onContextmenu:Ce(P=>W(P,$,A,k),["prevent"])},[e("span",null,"|- "+f(k.name),1),k.count?(i(),p("span",Lt,"("+f(k.count)+")",1)):G("",!0)],40,Tt))],10,Vt)),[[N,h.isShowSub]])),128))]))),128))]),_:1})])]),d(s(ne),{show:_.show,x:_.dropdownX,y:_.dropdownY,options:_.options,onSelect:b,onClickoutside:c[3]||(c[3]=()=>{_.show=!1,_.item={}})},null,8,["show","x","y","options"]),n.value?(i(),F(xt,{key:0,onClose:c[4]||(c[4]=h=>n.value=!1)})):G("",!0)],64)}}},Bt=R(Et,[["__scopeId","data-v-0a8fbbff"]]);const Ut=m=>(K("data-v-f89eea99"),m=m(),j(),m),Rt={class:"el-container is-vertical section"},Kt={class:"el-header search-header"},jt={class:"icon"},Ot={class:"el-header sub-header"},Pt={class:"menu-icon"},Xt={key:0,class:"el-main height100 flex-center"},Yt={key:1,class:"el-main height100 flex-center"},Wt=Ut(()=>e("img",{src:te,alt:""},null,-1)),Gt={key:2,class:"el-main"},Ht=["onClick"],qt={class:"article-title"},Qt={class:"article-main pointer"},Zt={class:"content"},Jt={class:"datetime"},es={class:"abstract"},ts={class:"image"},ss={__name:"NoteList",setup(m){const t=Y(),g=n=>{t.loadDetail(n.id)},a=re(n=>{t.loadNoteList({},!1)},500);return(n,_)=>{const y=V("n-icon"),w=V("n-empty");return i(),p("section",Rt,[e("header",Kt,[e("div",jt,[d(y,{size:"18",component:s(We)},null,8,["component"])]),S(e("input",{type:"text",class:"search","onUpdate:modelValue":_[0]||(_[0]=u=>s(t).notes.params.keyword=u),placeholder:"搜索我的笔记 ...",maxlength:"30",onInput:_[1]||(_[1]=(...u)=>s(a)&&s(a)(...u))},null,544),[[$e,s(t).notes.params.keyword]])]),e("header",Ot,[e("span",null,f(s(t).notes.items.length)+" 篇笔记",1),e("div",Pt,[d(y,{size:"18",component:s(Te)},null,8,["component"])])]),s(t).notes.loadStatus==0?(i(),p("main",Xt,[d(Z)])):s(t).notes.items.length?(i(),p("main",Gt,[d(s(de),null,{default:M(()=>[(i(!0),p(D,null,E(s(t).notes.items,u=>(i(),p("div",{class:I(["article",{selectd:s(t).view.loadId==u.id}]),key:u.id,onClick:C=>g(u)},[e("div",qt,[e("span",null,f(u.title),1)]),e("div",Qt,[e("div",Zt,[e("div",Jt,[e("span",null,f(u.created_at.substr(0,10)),1),e("span",null,f(u.class_name),1)]),e("div",es,f(u.abstract.replace(/[\r\n]/g,"").replace(/(<([^>]+)>)/gi,"")),1)]),S(e("div",ts,[d(s(ae),{width:"56",height:"56","preview-disabled":"",style:{"border-radius":"2px"},src:u.image,"fallback-src":"https://07akioni.oss-cn-beijing.aliyuncs.com/07akioni.jpeg"},null,8,["src"])],512),[[N,u.image]])])],10,Ht))),128))]),_:1})])):(i(),p("main",Yt,[d(w,{size:"200",description:"暂无相关数据"},{icon:M(()=>[Wt]),_:1})]))])}}},ns=R(ss,[["__scopeId","data-v-f89eea99"]]);const os=m=>(K("data-v-afa8b77e"),m=m(),j(),m),is={class:"section"},ls={class:"title"},as={class:"annex-box"},cs={class:"annex-main me-scrollbar me-scrollbar-thumb"},ds={class:"empty-text"},rs={class:"suffix"},_s={class:"content"},us={class:"filename"},ps={class:"filetool"},ms={class:"size"},vs={class:"tools"},hs={class:"annex-footer"},fs=os(()=>e("p",{class:"notice-text"},[T("文件大小在5M以内"),e("br"),T("最多可支持上传10个附件")],-1)),gs={__name:"AnnexUploadModal",setup(m){const t=Y(),g=X(()=>t.view.detail),a=U(!1);function n(){document.getElementById("upload-annex").click()}async function _(y){if(y.target.files.length==0)return!1;let w=y.target.files[0];if(w.size/(1024*1024)>5)return window.$message.info("笔记附件不能大于5M!"),!1;let u=new FormData;u.append("annex",w),u.append("article_id",g.value.id),a.value=!0;let C=await be(u).finally(()=>a.value=!1);if(C&&C.code==200){let{data:x}=C;t.view.detail.files.push({id:x.id,original_name:x.original_name,created_at:Se(new Date),size:x.size,suffix:x.suffix})}}return(y,w)=>{const u=V("n-button"),C=V("n-icon");return i(),p(D,null,[e("input",{type:"file",id:"upload-annex",onChange:_,style:{display:"none"}},null,32),e("section",is,[e("div",ls,[e("span",null,"附件列表("+f(g.value.files.length)+")",1)]),e("div",as,[e("div",cs,[S(e("p",ds,"暂无附件",512),[[N,g.value.files.length==0]]),(i(!0),p(D,null,E(g.value.files,x=>(i(),p("div",{key:x.id,class:"file-item pointer"},[e("div",rs,f(x.suffix),1),e("div",_s,[e("div",us,f(x.original_name),1),e("div",ps,[e("span",ms,f(s(Ge)(x.size)),1),e("span",null,f(s(xe)(x.created_at)),1),e("div",vs,[d(u,{type:"primary",size:"tiny",text:"",onClick:B=>s(ce)(x.id)},{default:M(()=>[T(" 下载 ")]),_:2},1032,["onClick"])])])])]))),128))]),e("div",hs,[fs,d(u,{type:"primary",size:"medium",loading:a.value,onClick:n},{icon:M(()=>[d(C,{component:s(Oe)},null,8,["component"])]),default:M(()=>[T(" 上传附件 ")]),_:1},8,["loading"])])])])],64)}}},ws=R(gs,[["__scopeId","data-v-afa8b77e"]]);const se=m=>(K("data-v-d452caa2"),m=m(),j(),m),ys={class:"tag-box"},Cs=se(()=>e("div",{class:"header"},[e("span",null,"标签管理")],-1)),ks={class:"tag-groups"},$s=se(()=>e("div",{class:"title"},"已选择:",-1)),xs=["onClick"],bs={class:"icon flex-center"},Ss={class:"tag-groups"},Ms=se(()=>e("div",{class:"title"},"标签栏:",-1)),zs=["onClick"],Ns={__name:"TagsClipModal",setup(m){const t=Y();let g=!1;const a=X(()=>{let y=t.view.detail.tags.map(w=>w.id);return t.tags.map(w=>({id:w.id,tag_name:w.tag_name,is_check:y.includes(w.id)}))}),n=(y=[])=>{g=!0,Me({article_id:t.view.detail.id,tags:y}).then(w=>{w.code==200&&(t.view.detail.tags=y.map(u=>({id:u})))}).finally(()=>{g=!1})},_=y=>{if(g)return;let w=a.value.filter(u=>y.id===u.id?!u.is_check:u.is_check);if(!y.is_check&&w.length>5)return window.$message.info("标签不能超过5个");n(w.map(u=>u.id))};return(y,w)=>{const u=V("n-icon");return i(),p("section",ys,[Cs,e("div",ks,[$s,(i(!0),p(D,null,E(a.value,C=>S((i(),p("p",{key:C.id,class:"tag-item",onClick:x=>_(C)},[e("span",null,f(C.tag_name),1),e("span",bs,[T("  "),d(u,{size:13,component:s(He)},null,8,["component"])])],8,xs)),[[N,C.is_check]])),128))]),e("div",Ss,[Ms,(i(!0),p(D,null,E(a.value,C=>(i(),p("p",{key:C.id,class:I(["tag-item",{active:C.is_check}]),onClick:x=>_(C)},[e("span",null,f(C.tag_name),1)],10,zs))),128))])])}}},Is=R(Ns,[["__scopeId","data-v-d452caa2"]]);const L=m=>(K("data-v-63720759"),m=m(),j(),m),Ds={class:"el-main",style:{padding:"0 5px"}},Vs={class:"el-container is-vertical height100"},As={class:"el-header editor-title"},Fs=L(()=>e("img",{src:je,class:"icon-svg"},null,-1)),Ts=["contenteditable","textContent"],Ls={key:0,class:"el-header sub-header text-ellipsis"},Es={class:"el-main",style:{overflow:"auto"}},Bs={class:"el-aside nav-tools"},Us=L(()=>e("p",null,"全屏",-1)),Rs=L(()=>e("p",null,"编辑",-1)),Ks={key:0},js={key:1},Os=L(()=>e("p",null,"收藏",-1)),Ps=L(()=>e("p",null,"标签",-1)),Xs=L(()=>e("p",null,"附件",-1)),Ys=L(()=>e("p",null,"下载",-1)),Ws=L(()=>e("p",null,"删除",-1)),Gs=L(()=>e("p",null,"分享",-1)),Hs={__name:"NoteView",setup(m){const t=Y(),g=U(!1),a=X(()=>t.view.detail),n=H({title:a.value.title,markdown:a.value.md_content,html:a.value.content});Q(()=>t.view.detail.id,()=>{n.html=t.view.detail.content,n.markdown=t.view.detail.md_content,n.title=t.view.detail.title});const _=X(()=>t.view.loadStatus),y=U(!1),w=X(()=>t.view.editorMode=="preview"?!1:"plaintext-only"),u=()=>{g.value=!g.value},C=(l,r,h)=>{if(!h.length)return;let $=new FormData;$.append("image",h[0]),ze($).then(k=>{k.code==200?r({url:k.data.url,desc:h[0].name}):window.$message.info(k.message)})},x=(l,r)=>{n.markdown=l,n.html=r},B=l=>{let r=a.value;if(n.markdown==""&&r.id==0){t.close();return}y.value=!0,Ne({article_id:r.id,class_id:r.class_id,title:n.title,md_content:n.markdown,content:n.html}).then(h=>{if(h.code!=200)return window.$message.info(h.message);r.id==0?(t.loadClass(),t.loadNoteList({},!1)):t.updateNoteItem(r.id,h.data),t.view.detail.md_content=n.markdown,t.view.detail.content=n.html,t.view.detail.id=h.data.id,l&&t.setEditorMode("preview"),window.$message.success("保存成功",{duration:1e3})}).finally(()=>{y.value=!1})},O=re(l=>{B(l)},500),W=l=>{if(l.keyCode==13){l.preventDefault();return}n.title=l.target.innerText,(l.ctrlKey||l.metaKey)&&l.keyCode===83&&(l.preventDefault(),O(!1))},b=()=>{let l=a.value.is_asterisk==1?2:1;Ie({article_id:a.value.id,type:l}).then(r=>{if(r.code!==200)return!1;t.setCollectionStatus(l==1)})},z=()=>{let l=t.view.detail.title+".md",r=new Blob([t.view.detail.md_content],{type:"text/plain"}),h=new FileReader;h.readAsDataURL(r),h.onload=function($){let k=document.createElement("a");k.download=l,k.href=$.target.result,document.body.appendChild(k),k.click(),document.body.removeChild(k)}},o=(l,r)=>{console.log(l,r)},c=()=>{window.$dialog.create({showIcon:!1,title:"删除笔记？",content:"笔记删除后30天之内，可在回收站中进行恢复。",positiveText:"确定",negativeText:"取消",onPositiveClick:()=>{De({article_id:a.value.id}).then(l=>{if(l.code!==200)return!1;t.close()})}})},v=()=>{window.$message.info("开发中...")};return(l,r)=>{const h=V("v-md-editor"),$=V("n-icon"),k=ee("loading");return S((i(),p("section",{class:I(["el-container section",{full:g.value}])},[e("main",Ds,[e("section",Vs,[e("header",As,[Fs,e("h4",{contenteditable:w.value,textContent:f(n.title),onKeydown:W},null,40,Ts)]),s(t).view.editorMode=="preview"?(i(),p("header",Ls,[e("span",null,"分类: "+f(s(t).view.detail.class_name||"默认分类"),1),e("span",null,"最后更新于 "+f(s(t).view.detail.updated_at),1)])):G("",!0),e("main",Es,[s(t).view.editorMode=="preview"?(i(),F(h,{key:0,modelValue:n.markdown,"onUpdate:modelValue":r[0]||(r[0]=A=>n.markdown=A),mode:"preview",height:"100%",onImageClick:o},null,8,["modelValue"])):(i(),F(h,{key:1,modelValue:n.markdown,"onUpdate:modelValue":r[1]||(r[1]=A=>n.markdown=A),mode:s(t).view.editorMode,height:"100%","left-toolbar":"undo redo h bold italic strikethrough quote ul ol table link image code preview","right-toolbar":"","disabled-menus":[],onSave:r[2]||(r[2]=A=>s(O)(!1)),onChange:x,onUploadImage:C},null,8,["modelValue","mode"]))])])]),e("aside",Bs,[e("div",{class:"nav-item",onClick:u},[d($,{class:"icon",size:"18",component:g.value?s(Ee):s(Le)},null,8,["component"]),Us]),S(e("div",{class:"nav-item",onClick:r[3]||(r[3]=A=>s(t).setEditorMode("edit"))},[d($,{class:"icon",size:"18",component:s(ie)},null,8,["component"]),Rs],512),[[N,s(t).view.editorMode=="preview"]]),S(e("div",{class:"nav-item",onClick:r[4]||(r[4]=A=>B(!0))},[d($,{class:"icon",size:"18",component:s(ie)},null,8,["component"]),a.value.id==0&&n.markdown.length===0?(i(),p("p",Ks,"取消")):(i(),p("p",js,f(y.value?"保存中..":"保存"),1))],512),[[N,s(t).view.editorMode=="edit"]]),S(e("div",{class:I(["nav-item",{active:a.value.is_asterisk==1}]),onClick:b},[d($,{class:"icon",size:"18",component:s(Be)},null,8,["component"]),Os],2),[[N,a.value.id]]),d(s(oe),{overlap:!1,placement:"right",trigger:"click","show-arrow":!0,raw:!0,animated:!1},{trigger:M(()=>[S(e("div",{class:I(["nav-item",{active:s(t).view.detail.tags.length}])},[d($,{class:"icon",size:"18",component:s(Ue)},null,8,["component"]),Ps],2),[[N,a.value.id]])]),default:M(()=>[d(Is)]),_:1}),d(s(oe),{placement:"left",trigger:"click","show-arrow":!0,raw:!0},{trigger:M(()=>[S(e("div",{class:I(["nav-item",{active:s(t).view.detail.files.length}])},[d($,{class:"icon",size:"18",component:s(Re)},null,8,["component"]),Xs],2),[[N,a.value.id]])]),default:M(()=>[d(ws)]),_:1}),S(e("div",{class:"nav-item",onClick:z},[d($,{class:"icon",size:"18",component:s(Ke)},null,8,["component"]),Ys],512),[[N,a.value.id]]),S(e("div",{class:"nav-item",onClick:c},[d($,{class:"icon",size:"18",component:s(J)},null,8,["component"]),Ws],512),[[N,a.value.id]]),S(e("div",{class:"nav-item",onClick:v},[d($,{class:"icon",size:"18",component:s(Ye)},null,8,["component"]),Gs],512),[[N,a.value.id]])])],2)),[[k,_.value==0]])}}},qs=R(Hs,[["__scopeId","data-v-63720759"]]);const Qs={},Zs=m=>(K("data-v-eab574a1"),m=m(),j(),m),Js={class:"section flex-center"},en=Zs(()=>e("svg",{"data-v-09891987":"",focusable:"false",viewBox:"0 0 220 220","aria-hidden":"true",role:"presentation",xmlns:"http://www.w3.org/2000/svg",fill:"currentColor",width:"220",height:"220"},[e("g",null,[e("g",null,[e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",fill:"#F9FAFA",d:"M187.508,86.089l-84.87-49c-4.783-2.761-10.899-1.123-13.66,3.66 c-2.761,4.783-1.123,10.899,3.66,13.66l84.87,49c4.783,2.761,10.899,1.123,13.66-3.66 C193.929,94.966,192.291,88.85,187.508,86.089z M176.56,149.05l-30.311-17.5c4.783,2.761,10.899,1.122,13.66-3.66 c2.761-4.783,1.123-10.899-3.66-13.66L116.06,91.026l38.457,22.203c4.783,2.761,10.899,1.123,13.66-3.66 c2.761-4.783,1.123-10.899-3.66-13.66l-100.459-58c-4.783-2.761-10.899-1.123-13.66,3.66c-2.761,4.783-1.123,10.899,3.66,13.66 l6.929,4c4.782,2.762,6.421,8.877,3.66,13.66c-2.761,4.783-8.877,6.422-13.66,3.66l38.971,22.5l-65.818-38 c-4.783-2.761-10.899-1.123-13.66,3.66c-2.761,4.783-1.123,10.899,3.66,13.66l25.115,14.5c4.783,2.761,6.421,8.877,3.66,13.66 c-2.761,4.783-8.877,6.422-13.66,3.66l25.548,14.75l-26.414-15.25c-4.783-2.761-10.899-1.123-13.66,3.66 c-2.761,4.783-1.123,10.899,3.66,13.66l105.655,61c4.783,2.761,10.899,1.123,13.66-3.66c2.761-4.783,1.123-10.899-3.66-13.66 l-2.598-1.5c-4.783-2.761-6.422-8.877-3.66-13.66c2.761-4.783,8.877-6.422,13.66-3.66l25.115,14.5 c4.783,2.761,10.899,1.123,13.66-3.66C182.982,157.927,181.343,151.811,176.56,149.05z"})])]),e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",fill:"#FFFFFF",d:"M56.375,71h91v68h-91V71z"}),e("g",null,[e("g",null,[e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",fill:"#D1D1D1",d:"M201.75,85.25c-2.761,0-5,2.239-5,5s2.239,5,5,5s5-2.239,5-5 S204.511,85.25,201.75,85.25z M201.75,94.25c-2.209,0-4-1.791-4-4s1.791-4,4-4s4,1.791,4,4S203.959,94.25,201.75,94.25z M24.75,64.25c-1.657,0-3,1.343-3,3c0,1.657,1.343,3,3,3s3-1.343,3-3C27.75,65.593,26.407,64.25,24.75,64.25z M24.75,69.25 c-1.105,0-2-0.895-2-2s0.895-2,2-2s2,0.895,2,2S25.855,69.25,24.75,69.25z M196.75,144.25c-1.657,0-3,1.343-3,3 c0,1.657,1.343,3,3,3s3-1.343,3-3C199.75,145.593,198.407,144.25,196.75,144.25z M196.75,149.25c-1.105,0-2-0.895-2-2s0.895-2,2-2 s2,0.895,2,2S197.855,149.25,196.75,149.25z M186.75,173.25c-2.761,0-5,2.239-5,5s2.239,5,5,5s5-2.239,5-5 S189.511,173.25,186.75,173.25z M186.75,182.25c-2.209,0-4-1.791-4-4s1.791-4,4-4s4,1.791,4,4S188.959,182.25,186.75,182.25z"})])]),e("g",{opacity:"0.6"},[e("g",null,[e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",fill:"#CBCBCB",d:"M207.85,164.1c-0.331,0-0.6,0.269-0.6,0.6v3.8 c0,0.331,0.269,0.6,0.6,0.6c0.331,0,0.6-0.269,0.6-0.6v-3.8C208.45,164.369,208.181,164.1,207.85,164.1z M83.85,29.1 c-0.331,0-0.6,0.269-0.6,0.6v3.8c0,0.331,0.269,0.6,0.6,0.6c0.331,0,0.6-0.269,0.6-0.6v-3.8C84.45,29.369,84.181,29.1,83.85,29.1z M158.85,169.1c-0.331,0-0.6,0.269-0.6,0.6v5.8c0,0.331,0.269,0.6,0.6,0.6c0.331,0,0.6-0.269,0.6-0.6v-5.8 C159.45,169.369,159.181,169.1,158.85,169.1z"})])]),e("g",{opacity:"0.8"},[e("g",null,[e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",fill:"#CCCCCC",d:"M209.45,166.095h-3.2c-0.221,0-0.4,0.226-0.4,0.505 s0.179,0.505,0.4,0.505h3.2c0.221,0,0.4-0.226,0.4-0.505S209.671,166.095,209.45,166.095z M85.45,31.095h-3.2 c-0.221,0-0.4,0.226-0.4,0.505s0.179,0.505,0.4,0.505h3.2c0.221,0,0.4-0.226,0.4-0.505S85.671,31.095,85.45,31.095z M161.45,172.095h-5.2c-0.221,0-0.4,0.226-0.4,0.505s0.179,0.505,0.4,0.505h5.2c0.221,0,0.4-0.226,0.4-0.505 S161.671,172.095,161.45,172.095z"})])]),e("g",{opacity:"0.5"},[e("g",null,[e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",fill:"#CBCBCB",d:"M51.583,50.917h-8c-0.552,0-1,0.448-1,1c0,0.552,0.448,1,1,1h8 c0.552,0,1-0.448,1-1C52.583,51.364,52.136,50.917,51.583,50.917z M192.583,102.917h-8c-0.552,0-1,0.448-1,1c0,0.552,0.448,1,1,1 h8c0.552,0,1-0.448,1-1C193.583,103.364,193.136,102.917,192.583,102.917z"})])]),e("g",{opacity:"0.5"},[e("g",null,[e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",fill:"#CBCBCB",d:"M47.583,46.917c-0.552,0-1,0.448-1,1v8c0,0.552,0.448,1,1,1 s1-0.448,1-1v-8C48.583,47.364,48.136,46.917,47.583,46.917z M188.583,98.917c-0.552,0-1,0.448-1,1v8c0,0.552,0.448,1,1,1 s1-0.448,1-1v-8C189.583,99.364,189.136,98.917,188.583,98.917z"})])]),e("g",null,[e("g",null,[e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",fill:"#CCCCCC",d:"M89.25,91h-25v3h25V91z M64.25,116h30v-3h-30V116z M86.25,102 h-22v3h22V102z M79.25,80h-15v3h15V80z M112.25,68c0,0-4.343,0-6,0h-1c-2.447,0-3.482,1.687-3.482,3c0-1.181-1.064-3-3.518-3h-2 c-1.657,0-6,0-6,0h-37v74h46c0.625,0,1,0.483,1,1h3c0-0.544,0.428-1,1-1h46V68H112.25z M100.25,75c0,1.105,0,64,0,64h-44V71h34 c0,0,4.895,0,6,0h2c1.105,0,2,0.895,2,2V75z M147.25,139h-44c0,0,0-62.895,0-64v-2c0-1.105,0.895-2,2-2h2c1.105,0,5,0,5,0h35V139z M111.25,127h25v-3h-25V127z M111.25,94h14V80h-14V94z M114.25,83h8v8h-8V83z M111.25,116h30v-3h-30V116z M111.25,105h20v-3h-20 V105z M64.25,127h15v-3h-15V127z"})])]),e("g",{opacity:"0.2"},[e("g",null,[e("path",{"fill-rule":"evenodd","clip-rule":"evenodd",fill:"#CCCCCC",d:"M41.333,29.083c-2.209,0-4,1.791-4,4s1.791,4,4,4s4-1.791,4-4 S43.542,29.083,41.333,29.083z M41.333,36.095c-1.663,0-3.012-1.348-3.012-3.012c0-1.663,1.349-3.012,3.012-3.012 c1.663,0,3.012,1.349,3.012,3.012C44.345,34.747,42.997,36.095,41.333,36.095z"})])])],-1)),tn=[en];function sn(m,t){return i(),p("section",Js,tn)}const nn=R(Qs,[["render",sn],["__scopeId","data-v-eab574a1"]]),on={class:"el-container height100"},ln={class:"el-aside",style:{width:"230px"}},an={class:"el-aside",style:{width:"350px"}},cn={class:"el-main"},yn={__name:"index",setup(m){const t=Y(),g=X(()=>t.view.loadId);return(a,n)=>{const _=ee("dropsize");return i(),p("section",on,[e("aside",ln,[d(Bt)]),S((i(),p("aside",an,[d(ns)])),[[_,{min:200,max:500,direction:"right"}]]),e("main",cn,[(i(),F(Ve(g.value>0?qs:nn)))])])}}};export{yn as default};
