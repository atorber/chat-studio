import{_ as x,aA as k,u as S,b6 as I,r as K,m as N,b as c,c as C,i as L,f as g,g as o,w as t,a as d,X as p,aX as _,A as R,W as V,K as q,L as A,bX as B,bY as T,ax as m}from"./index-8e0b9476.js";import{S as U}from"./auth-ab04c1e0.js";const X=n=>(q("data-v-96103dd1"),n=n(),A(),n),z={class:"el-container is-vertical login-box login"},D=X(()=>g("header",{class:"el-header box-header"},"快捷登录",-1)),F={class:"el-main",style:{padding:"3px"}},$={__name:"login",setup(n){const w=k(),f=S(),h=I(),i=K(),v={username:{required:!0,trigger:["blur","input"],message:"账号不能为空"},password:{required:!0,trigger:["blur","input"],message:"密码不能为空"}},s=N({username:"",password:"",loading:!1}),y=()=>{s.loading=!0;const a=U({mobile:s.username,password:s.password,platform:"web"});a.then(async e=>{e.code==200?(window.$message.success("登录成功"),T(e.data.access_token,e.data.expires_in),w.loadSetting(),!m.isConnect()&&m.connect("onLogin..."),h.push(f.query.redirect||"/")):window.$message.warning(e.message)}),a.finally(()=>{s.loading=!1})},r=a=>{a.preventDefault(),B(!0),i.value.validate(e=>{!e&&y()})};return(a,e)=>{const u=c("n-input"),b=c("n-button");return C(),L("section",z,[D,g("main",F,[o(d(V),{ref_key:"formRef",ref:i,size:"large",model:s,rules:v},{default:t(()=>[o(d(p),{path:"username","show-label":!1},{default:t(()=>[o(u,{placeholder:"请输入空间ID",value:s.username,"onUpdate:value":e[0]||(e[0]=l=>s.username=l),maxlength:20,onKeydown:_(r,["enter"])},null,8,["value","onKeydown"])]),_:1}),o(d(p),{path:"password","show-label":!1},{default:t(()=>[o(u,{placeholder:"请输入Token",type:"password","show-password-on":"click",value:s.password,"onUpdate:value":e[1]||(e[1]=l=>s.password=l),onKeydown:_(r,["enter"])},null,8,["value","onKeydown"])]),_:1}),o(b,{type:"primary",size:"large",block:"",class:"mt-t20",onClick:r,loading:s.loading},{default:t(()=>[R(" 立即登录 ")]),_:1},8,["loading"])]),_:1},8,["model"])])])}}},W=x($,[["__scopeId","data-v-96103dd1"]]);export{W as default};
