import{_ as S,aA as C,b6 as N,r as f,m as U,b9 as $,b as _,c as y,i as I,f as p,g as t,w as o,a,e as R,l as A,F as D,A as r,X as i,t as b,a0 as k,Y as V,Z as B,$ as c,b7 as F,W as z,K as G,L as M,ba as P}from"./index-a0bcc847.js";import{A as q}from"./AvatarCropper-332de7c6.js";import{h as E}from"./strings-8042df5b.js";import"./AvatarCropper.vue_vue_type_style_index_0_scoped_9728916b_lang-827c0500.js";import"./Close-8e7baeba.js";import"./UploadOne-d325efb5.js";const K=u=>(G("data-v-fa983ddf"),u=u(),M(),u),L=K(()=>p("h3",{class:"title"},"个人信息",-1)),T={class:"el-container container"},W={class:"el-aside el-aside-left"},X={class:"el-main",style:{"padding-right":"20px"}},Y={__name:"detail",setup(u){const h=C(),v=N(),d=f(!1),e=U({avatar:"",nickname:"",mobile:"",email:"",gender:"0",motto:"0",birthday:f(),loading:!1});$().then(({data:n})=>{e.nickname=n.nickname.toString(),e.mobile=n.mobile.toString(),e.email=n.email.toString(),e.gender=n.gender.toString(),e.motto=n.motto.toString(),e.avatar=n.avatar,n.birthday&&(e.birthday=f(n.birthday))});const g=()=>{if(!e.nickname.trim())return window.$message.warning("昵称不能为空");e.loading=!0;const n=P({nickname:e.nickname.trim(),avatar:e.avatar,motto:e.motto,gender:parseInt(e.gender),birthday:e.birthday});n.then(()=>{window.$message.success("信息保存成功"),h.loadSetting()}),n.catch(()=>{window.$message.warning("信息保存失败")}),n.finally(()=>{e.loading=!1})},x=n=>{d.value=!1,e.avatar=n,g()};return(n,l)=>{const w=_("n-avatar"),m=_("n-button");return y(),I(D,null,[L,p("section",T,[p("aside",W,[t(w,{size:200,src:e.avatar,onClick:l[0]||(l[0]=s=>d.value=!0),class:"avatar-box pointer"},null,8,["src"]),t(m,{text:"",onClick:l[1]||(l[1]=s=>d.value=!0)},{default:o(()=>[r(" 点击修改头像 ")]),_:1})]),p("main",X,[t(a(z),{ref:"formRef","label-placement":"left","label-width":"auto","require-mark-placement":"right-hanging",size:"medium",style:{"max-width":"500px","margin-top":"25px"}},{default:o(()=>[t(a(i),{label:"登录账号："},{default:o(()=>[r(b(a(E)(e.mobile))+" ",1),t(m,{class:"mt-l15",type:"primary",text:"",onClick:l[2]||(l[2]=s=>a(v).push("/settings/security"))},{default:o(()=>[r(" 修改 ")]),_:1})]),_:1}),t(a(i),{label:"电子邮箱："},{default:o(()=>[r(b(e.email)+" ",1),t(m,{class:"mt-l15",type:"primary",text:"",onClick:l[3]||(l[3]=s=>a(v).push("/settings/security"))},{default:o(()=>[r(" 修改 ")]),_:1})]),_:1}),t(a(i),{label:"我的昵称："},{default:o(()=>[t(a(k),{placeholder:"我的昵称",value:e.nickname,"onUpdate:value":l[4]||(l[4]=s=>e.nickname=s),maxlength:"20","show-count":""},null,8,["value"])]),_:1}),t(a(i),{label:"我的性别："},{default:o(()=>[t(a(V),{value:e.gender,"onUpdate:value":l[5]||(l[5]=s=>e.gender=s),name:"gender"},{default:o(()=>[t(a(B),null,{default:o(()=>[t(a(c),{key:"1",value:"1"},{default:o(()=>[r(" 男 ")]),_:1}),t(a(c),{key:"2",value:"2"},{default:o(()=>[r(" 女 ")]),_:1}),t(a(c),{key:"0",value:"0"},{default:o(()=>[r(" 保密 ")]),_:1})]),_:1})]),_:1},8,["value"])]),_:1}),t(a(i),{label:"我的生日："},{default:o(()=>[t(a(F),{"formatted-value":e.birthday,"onUpdate:formattedValue":l[6]||(l[6]=s=>e.birthday=s),type:"date","value-format":"yyyy-MM-dd"},null,8,["formatted-value"])]),_:1}),t(a(i),{label:"个性签名："},{default:o(()=>[t(a(k),{placeholder:"编辑个签，展示我的独特态度",type:"textarea",maxlength:"500","show-count":"",value:e.motto,"onUpdate:value":l[7]||(l[7]=s=>e.motto=s),autosize:{minRows:3,maxRows:5}},null,8,["value"])]),_:1}),t(a(i),null,{default:o(()=>[t(m,{type:"primary",onClick:g,loading:e.loading,style:{"margin-left":"94px"}},{default:o(()=>[r(" 保存修改 ")]),_:1},8,["loading"])]),_:1})]),_:1},512)])]),d.value?(y(),R(q,{key:0,onClose:l[8]||(l[8]=s=>d.value=!1),onSuccess:x})):A("",!0)],64)}}},ee=S(Y,[["__scopeId","data-v-fa983ddf"]]);export{ee as default};
