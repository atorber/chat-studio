var m=Object.defineProperty;var c=(t,e,i)=>e in t?m(t,e,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[e]=i;var o=(t,e,i)=>(c(t,typeof e!="symbol"?e+"":e,i),i);import{dD as r}from"./index-364c5099.js";class h{constructor(e,i=60,s=a=>{}){o(this,"timer",null);o(this,"lockTime",60);o(this,"lockName","");o(this,"callBack",()=>{});this.lockTime=i,this.lockName=`SMSLOCK_${e}`,this.callBack=s,this.compute()}start(){localStorage.setItem(this.lockName,this.getCurrentTime()+this.lockTime),this.compute()}compute(){this.clear();const e=this.getExpireTime();if(e===null)return;if(e<=this.getCurrentTime()){this.callBack(0),localStorage.removeItem(this.lockName);return}const i=e-this.getCurrentTime();this.callBack(i),this.timer=setTimeout(()=>this.compute(),1e3)}getCurrentTime(){return Math.floor(new Date().getTime()/1e3)}getExpireTime(){return localStorage.getItem(this.lockName)}clear(){clearTimeout(this.timer)}}const u=t=>/^1[0-9]{10}$/.test(t),k=t=>r("/api/v1/common/sms-code",t),T=t=>r("/api/v1/common/email-code",t);export{h as S,k as a,T as b,u as i};
