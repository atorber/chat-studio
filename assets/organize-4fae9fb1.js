import{_ as Yn}from"./no-data-bde0995b.js";import{d as de,h as m,O as bn,b as se,ce as Qn,F as Jn,N as et,q as F,e as Xe,s as z,i as nt,u as M,o as tt,cf as lt,J as un,Z as kn,cg as ot,f as I,k as ee,j as $,ch as fn,g as be,l as ke,ci as at,P as it,c2 as rt,n as mn,Q as dt,bX as Ke,t as P,bM as Be,w as $e,v as st,B as ct,A as Ge,y as De,D as ut,cj as hn,H as ft,ck as ht,x as Ze,cl as gn,S as V,I as xn,a0 as gt,a1 as ne,cm as pn,a2 as vt,bx as yt,b4 as bt,aX as kt,a4 as Ye,a5 as me,a6 as _e,a7 as xe,aa as vn,aA as Qe,$ as mt,ah as xt,a8 as je,ad as pt,ai as wt,at as Nt,au as Ct}from"./index-364c5099.js";import{M as St}from"./MemberCard-a2527f3f.js";import{S as Rt}from"./Search-037f3f5a.js";import{N as Kt}from"./Checkbox-70c4d58e.js";import{V as Dt}from"./VirtualList-221da32b.js";function wn(e){return typeof e=="string"?`s-${e}`:`n-${e}`}const _t=de({name:"Switcher",render(){return m("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},m("path",{d:"M12 8l10 8l-10 8z"}))}}),Nn=bn("n-tree-select"),Le=bn("n-tree"),Lt=de({name:"NTreeSwitcher",props:{clsPrefix:{type:String,required:!0},indent:{type:Number,required:!0},expanded:Boolean,selected:Boolean,hide:Boolean,loading:Boolean,onClick:Function,tmNode:{type:Object,required:!0}},setup(e){const{renderSwitcherIconRef:l}=se(Le,null);return()=>{const{clsPrefix:c,expanded:u,hide:d,indent:a,onClick:v}=e;return m("span",{"data-switcher":!0,class:[`${c}-tree-node-switcher`,u&&`${c}-tree-node-switcher--expanded`,d&&`${c}-tree-node-switcher--hide`],style:{width:`${a}px`},onClick:v},m("div",{class:`${c}-tree-node-switcher__icon`},m(Qn,null,{default:()=>{if(e.loading)return m(Jn,{clsPrefix:c,key:"loading",radius:85,strokeWidth:20});const{value:k}=l;return k?k({expanded:e.expanded,selected:e.selected,option:e.tmNode.rawNode}):m(et,{clsPrefix:c,key:"switcher"},{default:()=>m(_t,null)})}})))}}}),Tt=de({name:"NTreeNodeCheckbox",props:{clsPrefix:{type:String,required:!0},indent:{type:Number,required:!0},right:Boolean,focusable:Boolean,disabled:Boolean,checked:Boolean,indeterminate:Boolean,onCheck:Function},setup(e){const l=se(Le);function c(d){const{onCheck:a}=e;a&&a(d)}function u(d){c(d)}return{handleUpdateValue:u,mergedTheme:l.mergedThemeRef}},render(){const{clsPrefix:e,mergedTheme:l,checked:c,indeterminate:u,disabled:d,focusable:a,indent:v,handleUpdateValue:k}=this;return m("span",{class:[`${e}-tree-node-checkbox`,this.right&&`${e}-tree-node-checkbox--right`],style:{width:`${v}px`},"data-checkbox":!0},m(Kt,{focusable:a,disabled:d,theme:l.peers.Checkbox,themeOverrides:l.peerOverrides.Checkbox,checked:c,indeterminate:u,onUpdateChecked:k}))}}),At=de({name:"TreeNodeContent",props:{clsPrefix:{type:String,required:!0},disabled:Boolean,checked:Boolean,selected:Boolean,onClick:Function,onDragstart:Function,tmNode:{type:Object,required:!0},nodeProps:Object},setup(e){const{renderLabelRef:l,renderPrefixRef:c,renderSuffixRef:u,labelFieldRef:d}=se(Le),a=F(null);function v(g){const{onClick:p}=e;p&&p(g)}function k(g){v(g)}return{selfRef:a,renderLabel:l,renderPrefix:c,renderSuffix:u,labelField:d,handleClick:k}},render(){const{clsPrefix:e,labelField:l,nodeProps:c,checked:u=!1,selected:d=!1,renderLabel:a,renderPrefix:v,renderSuffix:k,handleClick:g,onDragstart:p,tmNode:{rawNode:h,rawNode:{prefix:D,suffix:b,[l]:f}}}=this;return m("span",Object.assign({},c,{ref:"selfRef",class:[`${e}-tree-node-content`,c==null?void 0:c.class],onClick:g,draggable:p===void 0?void 0:!0,onDragstart:p}),v||D?m("div",{class:`${e}-tree-node-content__prefix`},v?v({option:h,selected:d,checked:u}):Xe(D)):null,m("div",{class:`${e}-tree-node-content__text`},a?a({option:h,selected:d,checked:u}):Xe(f)),k||b?m("div",{class:`${e}-tree-node-content__suffix`},k?k({option:h,selected:d,checked:u}):Xe(b)):null)}});function yn({position:e,offsetLevel:l,indent:c,el:u}){const d={position:"absolute",boxSizing:"border-box",right:0};if(e==="inside")d.left=0,d.top=0,d.bottom=0,d.borderRadius="inherit",d.boxShadow="inset 0 0 0 2px var(--n-drop-mark-color)";else{const a=e==="before"?"top":"bottom";d[a]=0,d.left=`${u.offsetLeft+6-l*c}px`,d.height="2px",d.backgroundColor="var(--n-drop-mark-color)",d.transformOrigin=a,d.borderRadius="1px",d.transform=e==="before"?"translateY(-4px)":"translateY(4px)"}return m("div",{style:d})}function Pt({dropPosition:e,node:l}){return l.isLeaf===!1||l.children?!0:e!=="inside"}function Et(e){return z(()=>e.leafOnly?"child":e.checkStrategy)}function ie(e,l){return!!e.rawNode[l]}function Cn(e,l,c,u){e==null||e.forEach(d=>{c(d),Cn(d[l],l,c,u),u(d)})}function Ft(e,l,c,u,d){const a=new Set,v=new Set,k=[];return Cn(e,u,g=>{if(k.push(g),d(l,g)){v.add(g[c]);for(let p=k.length-2;p>=0;--p)if(!a.has(k[p][c]))a.add(k[p][c]);else return}},()=>{k.pop()}),{expandedKeys:Array.from(a),highlightKeySet:v}}if(nt&&Image){const e=new Image;e.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw=="}function Ot(e,l,c,u,d){const a=new Set,v=new Set,k=new Set,g=[],p=[],h=[];function D(f){f.forEach(w=>{if(h.push(w),l(c,w)){a.add(w[u]),k.add(w[u]);for(let S=h.length-2;S>=0;--S){const E=h[S][u];if(!v.has(E))v.add(E),a.has(E)&&a.delete(E);else break}}const N=w[d];N&&D(N),h.pop()})}D(e);function b(f,w){f.forEach(N=>{const S=N[u],E=a.has(S),C=v.has(S);if(!E&&!C)return;const y=N[d];if(y)if(E)w.push(N);else{g.push(S);const x=Object.assign(Object.assign({},N),{[d]:[]});w.push(x),b(y,x[d])}else w.push(N)})}return b(e,p),{filteredTree:p,highlightKeySet:k,expandedKeys:g}}const It=de({name:"TreeNode",props:{clsPrefix:{type:String,required:!0},tmNode:{type:Object,required:!0}},setup(e){const l=se(Le),{droppingNodeParentRef:c,droppingMouseNodeRef:u,draggingNodeRef:d,droppingPositionRef:a,droppingOffsetLevelRef:v,nodePropsRef:k,indentRef:g,blockLineRef:p,checkboxPlacementRef:h,checkOnClickRef:D,disabledFieldRef:b,showLineRef:f}=l,w=M(()=>!!e.tmNode.rawNode.checkboxDisabled),N=M(()=>ie(e.tmNode,b.value)),S=M(()=>l.disabledRef.value||N.value),E=z(()=>{const{value:i}=k;if(i)return i({option:e.tmNode.rawNode})}),C=F(null),y={value:null};tt(()=>{y.value=C.value.$el});function x(){const{tmNode:i}=e;if(!i.isLeaf&&!i.shallowLoaded){if(!l.loadingKeysRef.value.has(i.key))l.loadingKeysRef.value.add(i.key);else return;const{onLoadRef:{value:R}}=l;R&&R(i.rawNode).then(A=>{A!==!1&&l.handleSwitcherClick(i)}).finally(()=>{l.loadingKeysRef.value.delete(i.key)})}else l.handleSwitcherClick(i)}const B=M(()=>!N.value&&l.selectableRef.value&&(l.internalTreeSelect?l.mergedCheckStrategyRef.value!=="child"||l.multipleRef.value&&l.cascadeRef.value||e.tmNode.isLeaf:!0)),_=M(()=>l.checkableRef.value&&(l.cascadeRef.value||l.mergedCheckStrategyRef.value!=="child"||e.tmNode.isLeaf)),T=M(()=>l.displayedCheckedKeysRef.value.includes(e.tmNode.key)),X=M(()=>{const{value:i}=_;if(!i)return!1;const{value:R}=D,{tmNode:A}=e;return typeof R=="boolean"?!A.disabled&&R:R(e.tmNode.rawNode)});function Te(i){const{value:R}=l.expandOnClickRef,{value:A}=B,{value:U}=X;if(!A&&!R&&!U||un(i,"checkbox")||un(i,"switcher"))return;const{tmNode:Ae}=e;A&&l.handleSelect(Ae),R&&!Ae.isLeaf&&x(),U&&we(!T.value)}function ce(i){var R,A;p.value||(S.value||Te(i),(A=(R=E.value)===null||R===void 0?void 0:R.onClick)===null||A===void 0||A.call(R,i))}function pe(i){var R,A;p.value&&(S.value||Te(i),(A=(R=E.value)===null||R===void 0?void 0:R.onClick)===null||A===void 0||A.call(R,i))}function we(i){l.handleCheck(e.tmNode,i)}function ze(i){l.handleDragStart({event:i,node:e.tmNode})}function G(i){i.currentTarget===i.target&&l.handleDragEnter({event:i,node:e.tmNode})}function te(i){i.preventDefault(),l.handleDragOver({event:i,node:e.tmNode})}function le(i){l.handleDragEnd({event:i,node:e.tmNode})}function Me(i){i.currentTarget===i.target&&l.handleDragLeave({event:i,node:e.tmNode})}function Q(i){i.preventDefault(),a.value!==null&&l.handleDrop({event:i,node:e.tmNode,dropPosition:a.value})}const oe=z(()=>{const{clsPrefix:i}=e,{value:R}=g;if(f.value){const A=[];let U=e.tmNode.parent;for(;U;)U.isLastChild?A.push(m("div",{class:`${i}-tree-node-indent`},m("div",{style:{width:`${R}px`}}))):A.push(m("div",{class:[`${i}-tree-node-indent`,`${i}-tree-node-indent--show-line`]},m("div",{style:{width:`${R}px`}}))),U=U.parent;return A.reverse()}else return lt(e.tmNode.level,m("div",{class:`${e.clsPrefix}-tree-node-indent`},m("div",{style:{width:`${R}px`}})))});return{showDropMark:M(()=>{const{value:i}=d;if(!i)return;const{value:R}=a;if(!R)return;const{value:A}=u;if(!A)return;const{tmNode:U}=e;return U.key===A.key}),showDropMarkAsParent:M(()=>{const{value:i}=c;if(!i)return!1;const{tmNode:R}=e,{value:A}=a;return A==="before"||A==="after"?i.key===R.key:!1}),pending:M(()=>l.pendingNodeKeyRef.value===e.tmNode.key),loading:M(()=>l.loadingKeysRef.value.has(e.tmNode.key)),highlight:M(()=>{var i;return(i=l.highlightKeySetRef.value)===null||i===void 0?void 0:i.has(e.tmNode.key)}),checked:T,indeterminate:M(()=>l.displayedIndeterminateKeysRef.value.includes(e.tmNode.key)),selected:M(()=>l.mergedSelectedKeysRef.value.includes(e.tmNode.key)),expanded:M(()=>l.mergedExpandedKeysRef.value.includes(e.tmNode.key)),disabled:S,checkable:_,mergedCheckOnClick:X,checkboxDisabled:w,selectable:B,expandOnClick:l.expandOnClickRef,internalScrollable:l.internalScrollableRef,draggable:l.draggableRef,blockLine:p,nodeProps:E,checkboxFocusable:l.internalCheckboxFocusableRef,droppingPosition:a,droppingOffsetLevel:v,indent:g,checkboxPlacement:h,showLine:f,contentInstRef:C,contentElRef:y,indentNodes:oe,handleCheck:we,handleDrop:Q,handleDragStart:ze,handleDragEnter:G,handleDragOver:te,handleDragEnd:le,handleDragLeave:Me,handleLineClick:pe,handleContentClick:ce,handleSwitcherClick:x}},render(){const{tmNode:e,clsPrefix:l,checkable:c,expandOnClick:u,selectable:d,selected:a,checked:v,highlight:k,draggable:g,blockLine:p,indent:h,indentNodes:D,disabled:b,pending:f,internalScrollable:w,nodeProps:N,checkboxPlacement:S}=this,E=g&&!b?{onDragenter:this.handleDragEnter,onDragleave:this.handleDragLeave,onDragend:this.handleDragEnd,onDrop:this.handleDrop,onDragover:this.handleDragOver}:void 0,C=w?wn(e.key):void 0,y=S==="right",x=c?m(Tt,{indent:h,right:y,focusable:this.checkboxFocusable,disabled:b||this.checkboxDisabled,clsPrefix:l,checked:this.checked,indeterminate:this.indeterminate,onCheck:this.handleCheck}):null;return m("div",Object.assign({class:`${l}-tree-node-wrapper`},E),m("div",Object.assign({},p?N:void 0,{class:[`${l}-tree-node`,{[`${l}-tree-node--selected`]:a,[`${l}-tree-node--checkable`]:c,[`${l}-tree-node--highlight`]:k,[`${l}-tree-node--pending`]:f,[`${l}-tree-node--disabled`]:b,[`${l}-tree-node--selectable`]:d,[`${l}-tree-node--clickable`]:d||u||this.mergedCheckOnClick},N==null?void 0:N.class],"data-key":C,draggable:g&&p,onClick:this.handleLineClick,onDragstart:g&&p&&!b?this.handleDragStart:void 0}),D,e.isLeaf&&this.showLine?m("div",{class:[`${l}-tree-node-indent`,`${l}-tree-node-indent--show-line`,e.isLeaf&&`${l}-tree-node-indent--is-leaf`,e.isLastChild&&`${l}-tree-node-indent--last-child`]},m("div",{style:{width:`${h}px`}})):m(Lt,{clsPrefix:l,expanded:this.expanded,selected:a,loading:this.loading,hide:e.isLeaf,tmNode:this.tmNode,indent:h,onClick:this.handleSwitcherClick}),y?null:x,m(At,{ref:"contentInstRef",clsPrefix:l,checked:v,selected:a,onClick:this.handleContentClick,nodeProps:p?void 0:N,onDragstart:g&&!p&&!b?this.handleDragStart:void 0,tmNode:e}),g?this.showDropMark?yn({el:this.contentElRef.value,position:this.droppingPosition,offsetLevel:this.droppingOffsetLevel,indent:h}):this.showDropMarkAsParent?yn({el:this.contentElRef.value,position:"inside",offsetLevel:this.droppingOffsetLevel,indent:h}):null:null,y?x:null))}}),Sn=It;function Bt({props:e,fNodesRef:l,mergedExpandedKeysRef:c,mergedSelectedKeysRef:u,handleSelect:d,handleSwitcherClick:a}){const{value:v}=u,k=se(Nn,null),g=k?k.pendingNodeKeyRef:F(v.length?v[v.length-1]:null);function p(h){if(!e.keyboard)return;const{value:D}=g;if(D===null){if((h.key==="ArrowDown"||h.key==="ArrowUp")&&h.preventDefault(),["ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(h.key)&&D===null){const{value:b}=l;let f=0;for(;f<b.length;){if(!b[f].disabled){g.value=b[f].key;break}f+=1}}}else{const{value:b}=l;let f=b.findIndex(w=>w.key===D);if(!~f)return;if(h.key==="Enter")d(b[f]);else if(h.key==="ArrowDown")for(h.preventDefault(),f+=1;f<b.length;){if(!b[f].disabled){g.value=b[f].key;break}f+=1}else if(h.key==="ArrowUp")for(h.preventDefault(),f-=1;f>=0;){if(!b[f].disabled){g.value=b[f].key;break}f-=1}else if(h.key==="ArrowLeft"){const w=b[f];if(w.isLeaf||!c.value.includes(D)){const N=w.getParent();N&&(g.value=N.key)}else a(w)}else if(h.key==="ArrowRight"){const w=b[f];if(w.isLeaf)return;if(!c.value.includes(D))a(w);else for(f+=1;f<b.length;){if(!b[f].disabled){g.value=b[f].key;break}f+=1}}}}return{pendingNodeKeyRef:g,handleKeydown:p}}const $t=de({name:"TreeMotionWrapper",props:{clsPrefix:{type:String,required:!0},height:Number,nodes:{type:Array,required:!0},mode:{type:String,required:!0},onAfterEnter:{type:Function,required:!0}},render(){const{clsPrefix:e}=this;return m(ot,{onAfterEnter:this.onAfterEnter,appear:!0,reverse:this.mode==="collapse"},{default:()=>m("div",{class:[`${e}-tree-motion-wrapper`,`${e}-tree-motion-wrapper--${this.mode}`],style:{height:kn(this.height)}},this.nodes.map(l=>m(Sn,{clsPrefix:e,tmNode:l})))})}}),Je=at(),jt=I("tree",`
 font-size: var(--n-font-size);
 outline: none;
`,[ee("ul, li",`
 margin: 0;
 padding: 0;
 list-style: none;
 `),ee(">",[I("tree-node",[ee("&:first-child","margin-top: 0;")])]),I("tree-motion-wrapper",[$("expand",[fn({duration:"0.2s"})]),$("collapse",[fn({duration:"0.2s",reverse:!0})])]),I("tree-node-wrapper",`
 box-sizing: border-box;
 padding: var(--n-node-wrapper-padding);
 `),I("tree-node",`
 transform: translate3d(0,0,0);
 position: relative;
 display: flex;
 border-radius: var(--n-node-border-radius);
 transition: background-color .3s var(--n-bezier);
 `,[$("highlight",[I("tree-node-content",[be("text","border-bottom-color: var(--n-node-text-color-disabled);")])]),$("disabled",[I("tree-node-content",`
 color: var(--n-node-text-color-disabled);
 cursor: not-allowed;
 `)]),ke("disabled",[$("clickable",[I("tree-node-content",`
 cursor: pointer;
 `)])])]),$("block-node",[I("tree-node-content",`
 flex: 1;
 min-width: 0;
 `)]),ke("block-line",[I("tree-node",[ke("disabled",[I("tree-node-content",[ee("&:hover","background: var(--n-node-color-hover);")]),$("selectable",[I("tree-node-content",[ee("&:active","background: var(--n-node-color-pressed);")])]),$("pending",[I("tree-node-content",`
 background: var(--n-node-color-hover);
 `)]),$("selected",[I("tree-node-content","background: var(--n-node-color-active);")])])])]),$("block-line",[I("tree-node",[ke("disabled",[ee("&:hover","background: var(--n-node-color-hover);"),$("pending",`
 background: var(--n-node-color-hover);
 `),$("selectable",[ke("selected",[ee("&:active","background: var(--n-node-color-pressed);")])]),$("selected","background: var(--n-node-color-active);")]),$("disabled",`
 cursor: not-allowed;
 `)])]),I("tree-node-indent",`
 flex-grow: 0;
 flex-shrink: 0;
 `,[$("show-line","position: relative",[ee("&::before",`
 position: absolute;
 left: 50%;
 border-left: 1px solid var(--n-border-color);
 transition: border-color .3s var(--n-bezier);
 transform: translate(-50%);
 content: "";
 top: var(--n-line-offset-top);
 bottom: var(--n-line-offset-bottom);
 `),$("last-child",[ee("&::before",`
 bottom: 50%;
 `)]),$("is-leaf",[ee("&::after",`
 position: absolute;
 content: "";
 left: calc(50% + 0.5px);
 right: 0;
 bottom: 50%;
 transition: border-color .3s var(--n-bezier);
 border-bottom: 1px solid var(--n-border-color);
 `)])]),ke("show-line","height: 0;")]),I("tree-node-switcher",`
 cursor: pointer;
 display: inline-flex;
 flex-shrink: 0;
 height: var(--n-node-content-height);
 align-items: center;
 justify-content: center;
 transition: transform .15s var(--n-bezier);
 vertical-align: bottom;
 `,[be("icon",`
 position: relative;
 height: 14px;
 width: 14px;
 display: flex;
 color: var(--n-arrow-color);
 transition: color .3s var(--n-bezier);
 font-size: 14px;
 `,[I("icon",[Je]),I("base-loading",`
 color: var(--n-loading-color);
 position: absolute;
 left: 0;
 top: 0;
 right: 0;
 bottom: 0;
 `,[Je]),I("base-icon",[Je])]),$("hide","visibility: hidden;"),$("expanded","transform: rotate(90deg);")]),I("tree-node-checkbox",`
 display: inline-flex;
 height: var(--n-node-content-height);
 vertical-align: bottom;
 align-items: center;
 justify-content: center;
 `),I("tree-node-content",`
 user-select: none;
 position: relative;
 display: inline-flex;
 align-items: center;
 min-height: var(--n-node-content-height);
 box-sizing: border-box;
 line-height: var(--n-line-height);
 vertical-align: bottom;
 padding: 0 6px 0 4px;
 cursor: default;
 border-radius: var(--n-node-border-radius);
 color: var(--n-node-text-color);
 transition:
 color .3s var(--n-bezier),
 background-color .3s var(--n-bezier),
 border-color .3s var(--n-bezier);
 `,[ee("&:last-child","margin-bottom: 0;"),be("prefix",`
 display: inline-flex;
 margin-right: 8px;
 `),be("text",`
 border-bottom: 1px solid #0000;
 transition: border-color .3s var(--n-bezier);
 flex-grow: 1;
 max-width: 100%;
 `),be("suffix",`
 display: inline-flex;
 `)]),be("empty","margin: auto;")]);var zt=globalThis&&globalThis.__awaiter||function(e,l,c,u){function d(a){return a instanceof c?a:new c(function(v){v(a)})}return new(c||(c=Promise))(function(a,v){function k(h){try{p(u.next(h))}catch(D){v(D)}}function g(h){try{p(u.throw(h))}catch(D){v(D)}}function p(h){h.done?a(h.value):d(h.value).then(k,g)}p((u=u.apply(e,l||[])).next())})};function Mt(e,l,c,u){return{getIsGroup(){return!1},getKey(a){return a[e]},getChildren:u||(a=>a[l]),getDisabled(a){return!!(a[c]||a.checkboxDisabled)}}}const Ut={allowCheckingNotLoaded:Boolean,filter:Function,defaultExpandAll:Boolean,expandedKeys:Array,keyField:{type:String,default:"key"},labelField:{type:String,default:"label"},childrenField:{type:String,default:"children"},disabledField:{type:String,default:"disabled"},defaultExpandedKeys:{type:Array,default:()=>[]},indeterminateKeys:Array,renderSwitcherIcon:Function,onUpdateIndeterminateKeys:[Function,Array],"onUpdate:indeterminateKeys":[Function,Array],onUpdateExpandedKeys:[Function,Array],"onUpdate:expandedKeys":[Function,Array]},Ht=Object.assign(Object.assign(Object.assign(Object.assign({},mn.props),{accordion:Boolean,showIrrelevantNodes:{type:Boolean,default:!0},data:{type:Array,default:()=>[]},expandOnDragenter:{type:Boolean,default:!0},expandOnClick:Boolean,checkOnClick:{type:[Boolean,Function],default:!1},cancelable:{type:Boolean,default:!0},checkable:Boolean,draggable:Boolean,blockNode:Boolean,blockLine:Boolean,showLine:Boolean,disabled:Boolean,checkedKeys:Array,defaultCheckedKeys:{type:Array,default:()=>[]},selectedKeys:Array,defaultSelectedKeys:{type:Array,default:()=>[]},multiple:Boolean,pattern:{type:String,default:""},onLoad:Function,cascade:Boolean,selectable:{type:Boolean,default:!0},scrollbarProps:Object,indent:{type:Number,default:24},allowDrop:{type:Function,default:Pt},animated:{type:Boolean,default:!0},checkboxPlacement:{type:String,default:"left"},virtualScroll:Boolean,watchProps:Array,renderLabel:Function,renderPrefix:Function,renderSuffix:Function,nodeProps:Function,keyboard:{type:Boolean,default:!0},getChildren:Function,onDragenter:[Function,Array],onDragleave:[Function,Array],onDragend:[Function,Array],onDragstart:[Function,Array],onDragover:[Function,Array],onDrop:[Function,Array],onUpdateCheckedKeys:[Function,Array],"onUpdate:checkedKeys":[Function,Array],onUpdateSelectedKeys:[Function,Array],"onUpdate:selectedKeys":[Function,Array]}),Ut),{internalTreeSelect:Boolean,internalScrollable:Boolean,internalScrollablePadding:String,internalRenderEmpty:Function,internalHighlightKeySet:Object,internalUnifySelectCheck:Boolean,internalCheckboxFocusable:{type:Boolean,default:!0},internalFocusable:{type:Boolean,default:!0},checkStrategy:{type:String,default:"all"},leafOnly:Boolean}),Vt=de({name:"Tree",props:Ht,setup(e){const{mergedClsPrefixRef:l,inlineThemeDisabled:c,mergedRtlRef:u}=it(e),d=rt("Tree",u,l),a=mn("Tree","-tree",jt,ht,e,l),v=F(null),k=F(null),g=F(null);function p(){var n;return(n=g.value)===null||n===void 0?void 0:n.listElRef}function h(){var n;return(n=g.value)===null||n===void 0?void 0:n.itemsElRef}const D=z(()=>{const{filter:n}=e;if(n)return n;const{labelField:t}=e;return(o,s)=>{if(!o.length)return!0;const r=s[t];return typeof r=="string"?r.toLowerCase().includes(o.toLowerCase()):!1}}),b=z(()=>{const{pattern:n}=e;return n?!n.length||!D.value?{filteredTree:e.data,highlightKeySet:null,expandedKeys:void 0}:Ot(e.data,D.value,n,e.keyField,e.childrenField):{filteredTree:e.data,highlightKeySet:null,expandedKeys:void 0}}),f=z(()=>dt(e.showIrrelevantNodes?e.data:b.value.filteredTree,Mt(e.keyField,e.childrenField,e.disabledField,e.getChildren))),w=se(Nn,null),N=e.internalTreeSelect?w.dataTreeMate:f,{watchProps:S}=e,E=F([]);S!=null&&S.includes("defaultCheckedKeys")?Ke(()=>{E.value=e.defaultCheckedKeys}):E.value=e.defaultCheckedKeys;const C=P(e,"checkedKeys"),y=Be(C,E),x=z(()=>N.value.getCheckedKeys(y.value,{cascade:e.cascade,allowNotLoaded:e.allowCheckingNotLoaded})),B=Et(e),_=z(()=>x.value.checkedKeys),T=z(()=>{const{indeterminateKeys:n}=e;return n!==void 0?n:x.value.indeterminateKeys}),X=F([]);S!=null&&S.includes("defaultSelectedKeys")?Ke(()=>{X.value=e.defaultSelectedKeys}):X.value=e.defaultSelectedKeys;const Te=P(e,"selectedKeys"),ce=Be(Te,X),pe=F([]),we=n=>{pe.value=e.defaultExpandAll?N.value.getNonLeafKeys():n===void 0?e.defaultExpandedKeys:n};S!=null&&S.includes("defaultExpandedKeys")?Ke(()=>{we(void 0)}):Ke(()=>{we(e.defaultExpandedKeys)});const ze=P(e,"expandedKeys"),G=Be(ze,pe),te=z(()=>f.value.getFlattenedNodes(G.value)),{pendingNodeKeyRef:le,handleKeydown:Me}=Bt({props:e,mergedSelectedKeysRef:ce,fNodesRef:te,mergedExpandedKeysRef:G,handleSelect:qe,handleSwitcherClick:on});let Q=null,oe=null;const i=F(new Set),R=z(()=>e.internalHighlightKeySet||b.value.highlightKeySet),A=Be(R,i),U=F(new Set),Ae=z(()=>G.value.filter(n=>!U.value.has(n)));let en=0;const Ne=F(null),Pe=F(null),Ee=F(null),Fe=F(null),Oe=F(0),Rn=z(()=>{const{value:n}=Pe;return n?n.parent:null});$e(P(e,"data"),()=>{U.value.clear(),le.value=null,Se()},{deep:!1});let Ue=!1;const He=()=>{Ue=!0,Ze(()=>{Ue=!1})};let Ce;$e(P(e,"pattern"),(n,t)=>{if(e.showIrrelevantNodes)if(Ce=void 0,n){const{expandedKeys:o,highlightKeySet:s}=Ft(e.data,e.pattern,e.keyField,e.childrenField,D.value);i.value=s,He(),fe(o,q(o),{node:null,action:"filter"})}else i.value=new Set;else if(!n.length)Ce!==void 0&&(He(),fe(Ce,q(Ce),{node:null,action:"filter"}));else{t.length||(Ce=G.value);const{expandedKeys:o}=b.value;o!==void 0&&(He(),fe(o,q(o),{node:null,action:"filter"}))}});function nn(n){return zt(this,void 0,void 0,function*(){const{onLoad:t}=e;if(!t){yield Promise.resolve();return}const{value:o}=U;if(!o.has(n.key)){o.add(n.key);try{(yield t(n.rawNode))===!1&&he()}catch(s){console.error(s),he()}o.delete(n.key)}})}Ke(()=>{var n;const{value:t}=f;if(!t)return;const{getNode:o}=t;(n=G.value)===null||n===void 0||n.forEach(s=>{const r=o(s);r&&!r.shallowLoaded&&nn(r)})});const ue=F(!1),ae=F([]);$e(Ae,(n,t)=>{if(!e.animated||Ue){Ze(Ie);return}const o=De(a.value.self.nodeHeight),s=new Set(t);let r=null,O=null;for(const L of n)if(!s.has(L)){if(r!==null)return;r=L}const H=new Set(n);for(const L of t)if(!H.has(L)){if(O!==null)return;O=L}if(r===null&&O===null)return;const{virtualScroll:W}=e,ve=(W?g.value.listElRef:v.value).offsetHeight,ye=Math.ceil(ve/o)+1;let Z;if(r!==null&&(Z=t),O!==null&&(Z===void 0?Z=n:Z=Z.filter(L=>L!==O)),ue.value=!0,ae.value=f.value.getFlattenedNodes(Z),r!==null){const L=ae.value.findIndex(Y=>Y.key===r);if(~L){const Y=ae.value[L].children;if(Y){const J=gn(Y,n);ae.value.splice(L+1,0,{__motion:!0,mode:"expand",height:W?J.length*o:void 0,nodes:W?J.slice(0,ye):J})}}}if(O!==null){const L=ae.value.findIndex(Y=>Y.key===O);if(~L){const Y=ae.value[L].children;if(!Y)return;ue.value=!0;const J=gn(Y,n);ae.value.splice(L+1,0,{__motion:!0,mode:"collapse",height:W?J.length*o:void 0,nodes:W?J.slice(0,ye):J})}}});const Kn=z(()=>st(te.value)),Dn=z(()=>ue.value?ae.value:te.value);function Ie(){const{value:n}=k;n&&n.sync()}function _n(){ue.value=!1,e.virtualScroll&&Ze(Ie)}function q(n){const{getNode:t}=N.value;return n.map(o=>{var s;return((s=t(o))===null||s===void 0?void 0:s.rawNode)||null})}function fe(n,t,o){const{"onUpdate:expandedKeys":s,onUpdateExpandedKeys:r}=e;pe.value=n,s&&V(s,n,t,o),r&&V(r,n,t,o)}function tn(n,t,o){const{"onUpdate:checkedKeys":s,onUpdateCheckedKeys:r}=e;E.value=n,r&&V(r,n,t,o),s&&V(s,n,t,o)}function Ln(n,t){const{"onUpdate:indeterminateKeys":o,onUpdateIndeterminateKeys:s}=e;o&&V(o,n,t),s&&V(s,n,t)}function Ve(n,t,o){const{"onUpdate:selectedKeys":s,onUpdateSelectedKeys:r}=e;X.value=n,r&&V(r,n,t,o),s&&V(s,n,t,o)}function Tn(n){const{onDragenter:t}=e;t&&V(t,n)}function An(n){const{onDragleave:t}=e;t&&V(t,n)}function Pn(n){const{onDragend:t}=e;t&&V(t,n)}function En(n){const{onDragstart:t}=e;t&&V(t,n)}function Fn(n){const{onDragover:t}=e;t&&V(t,n)}function On(n){const{onDrop:t}=e;t&&V(t,n)}function Se(){In(),re()}function In(){Ne.value=null}function re(){Oe.value=0,Pe.value=null,Ee.value=null,Fe.value=null,he()}function he(){Q&&(window.clearTimeout(Q),Q=null),oe=null}function ln(n,t){if(e.disabled||ie(n,e.disabledField))return;if(e.internalUnifySelectCheck&&!e.multiple){qe(n);return}const o=t?"check":"uncheck",{checkedKeys:s,indeterminateKeys:r}=N.value[o](n.key,_.value,{cascade:e.cascade,checkStrategy:B.value,allowNotLoaded:e.allowCheckingNotLoaded});tn(s,q(s),{node:n.rawNode,action:o}),Ln(r,q(r))}function Bn(n){if(e.disabled)return;const{key:t}=n,{value:o}=G,s=o.findIndex(r=>r===t);if(~s){const r=Array.from(o);r.splice(s,1),fe(r,q(r),{node:n.rawNode,action:"collapse"})}else{const r=f.value.getNode(t);if(!r||r.isLeaf)return;let O;if(e.accordion){const H=new Set(n.siblings.map(({key:W})=>W));O=o.filter(W=>!H.has(W)),O.push(t)}else O=o.concat(t);fe(O,q(O),{node:n.rawNode,action:"expand"})}}function on(n){e.disabled||ue.value||Bn(n)}function qe(n){if(!(e.disabled||!e.selectable)){if(le.value=n.key,e.internalUnifySelectCheck){const{value:{checkedKeys:t,indeterminateKeys:o}}=x;e.multiple?ln(n,!(t.includes(n.key)||o.includes(n.key))):tn([n.key],q([n.key]),{node:n.rawNode,action:"check"})}if(e.multiple){const t=Array.from(ce.value),o=t.findIndex(s=>s===n.key);~o?e.cancelable&&t.splice(o,1):~o||t.push(n.key),Ve(t,q(t),{node:n.rawNode,action:~o?"unselect":"select"})}else ce.value.includes(n.key)?e.cancelable&&Ve([],[],{node:n.rawNode,action:"unselect"}):Ve([n.key],q([n.key]),{node:n.rawNode,action:"select"})}}function $n(n){if(Q&&(window.clearTimeout(Q),Q=null),n.isLeaf)return;oe=n.key;const t=()=>{if(oe!==n.key)return;const{value:o}=Ee;if(o&&o.key===n.key&&!G.value.includes(n.key)){const s=G.value.concat(n.key);fe(s,q(s),{node:n.rawNode,action:"expand"})}Q=null,oe=null};n.shallowLoaded?Q=window.setTimeout(()=>{t()},1e3):Q=window.setTimeout(()=>{nn(n).then(()=>{t()})},1e3)}function jn({event:n,node:t}){!e.draggable||e.disabled||ie(t,e.disabledField)||(an({event:n,node:t},!1),Tn({event:n,node:t.rawNode}))}function zn({event:n,node:t}){!e.draggable||e.disabled||ie(t,e.disabledField)||An({event:n,node:t.rawNode})}function Mn(n){n.target===n.currentTarget&&re()}function Un({event:n,node:t}){Se(),!(!e.draggable||e.disabled||ie(t,e.disabledField))&&Pn({event:n,node:t.rawNode})}function Hn({event:n,node:t}){!e.draggable||e.disabled||ie(t,e.disabledField)||(en=n.clientX,Ne.value=t,En({event:n,node:t.rawNode}))}function an({event:n,node:t},o=!0){var s;if(!e.draggable||e.disabled||ie(t,e.disabledField))return;const{value:r}=Ne;if(!r)return;const{allowDrop:O,indent:H}=e;o&&Fn({event:n,node:t.rawNode});const W=n.currentTarget,{height:ve,top:ye}=W.getBoundingClientRect(),Z=n.clientY-ye;let L;O({node:t.rawNode,dropPosition:"inside",phase:"drag"})?Z<=8?L="before":Z>=ve-8?L="after":L="inside":Z<=ve/2?L="before":L="after";const{value:J}=Kn;let K,j;const Re=J(t.key);if(Re===null){re();return}let dn=!1;L==="inside"?(K=t,j="inside"):L==="before"?t.isFirstChild?(K=t,j="before"):(K=te.value[Re-1],j="after"):(K=t,j="after"),!K.isLeaf&&G.value.includes(K.key)&&(dn=!0,j==="after"&&(K=te.value[Re+1],K?j="before":(K=t,j="inside")));const sn=K;if(Ee.value=sn,!dn&&r.isLastChild&&r.key===K.key&&(j="after"),j==="after"){let cn=en-n.clientX,We=0;for(;cn>=H/2&&K.parent!==null&&K.isLastChild&&We<1;)cn-=H,We+=1,K=K.parent;Oe.value=We}else Oe.value=0;if((r.contains(K)||j==="inside"&&((s=r.parent)===null||s===void 0?void 0:s.key)===K.key)&&!(r.key===sn.key&&r.key===K.key)){re();return}if(!O({node:K.rawNode,dropPosition:j,phase:"drag"})){re();return}if(r.key===K.key)he();else if(oe!==K.key)if(j==="inside"){if(e.expandOnDragenter){if($n(K),!K.shallowLoaded&&oe!==K.key){Se();return}}else if(!K.shallowLoaded){Se();return}}else he();else j!=="inside"&&he();Fe.value=j,Pe.value=K}function Vn({event:n,node:t,dropPosition:o}){if(!e.draggable||e.disabled||ie(t,e.disabledField))return;const{value:s}=Ne,{value:r}=Pe,{value:O}=Fe;if(!(!s||!r||!O)&&e.allowDrop({node:r.rawNode,dropPosition:O,phase:"drag"})&&s.key!==r.key){if(O==="before"){const H=s.getNext({includeDisabled:!0});if(H&&H.key===r.key){re();return}}if(O==="after"){const H=s.getPrev({includeDisabled:!0});if(H&&H.key===r.key){re();return}}On({event:n,node:r.rawNode,dragNode:s.rawNode,dropPosition:o}),Se()}}function qn(){Ie()}function Wn(){Ie()}function Xn(n){var t;if(e.virtualScroll||e.internalScrollable){const{value:o}=k;if(!((t=o==null?void 0:o.containerRef)===null||t===void 0)&&t.contains(n.relatedTarget))return;le.value=null}else{const{value:o}=v;if(o!=null&&o.contains(n.relatedTarget))return;le.value=null}}$e(le,n=>{var t,o;if(n!==null){if(e.virtualScroll)(t=g.value)===null||t===void 0||t.scrollTo({key:n});else if(e.internalScrollable){const{value:s}=k;if(s===null)return;const r=(o=s.contentRef)===null||o===void 0?void 0:o.querySelector(`[data-key="${wn(n)}"]`);if(!r)return;s.scrollTo({el:r})}}}),ct(Le,{loadingKeysRef:U,highlightKeySetRef:A,displayedCheckedKeysRef:_,displayedIndeterminateKeysRef:T,mergedSelectedKeysRef:ce,mergedExpandedKeysRef:G,mergedThemeRef:a,mergedCheckStrategyRef:B,nodePropsRef:P(e,"nodeProps"),disabledRef:P(e,"disabled"),checkableRef:P(e,"checkable"),selectableRef:P(e,"selectable"),expandOnClickRef:P(e,"expandOnClick"),onLoadRef:P(e,"onLoad"),draggableRef:P(e,"draggable"),blockLineRef:P(e,"blockLine"),indentRef:P(e,"indent"),cascadeRef:P(e,"cascade"),checkOnClickRef:P(e,"checkOnClick"),checkboxPlacementRef:e.checkboxPlacement,droppingMouseNodeRef:Ee,droppingNodeParentRef:Rn,draggingNodeRef:Ne,droppingPositionRef:Fe,droppingOffsetLevelRef:Oe,fNodesRef:te,pendingNodeKeyRef:le,showLineRef:P(e,"showLine"),disabledFieldRef:P(e,"disabledField"),internalScrollableRef:P(e,"internalScrollable"),internalCheckboxFocusableRef:P(e,"internalCheckboxFocusable"),internalTreeSelect:e.internalTreeSelect,renderLabelRef:P(e,"renderLabel"),renderPrefixRef:P(e,"renderPrefix"),renderSuffixRef:P(e,"renderSuffix"),renderSwitcherIconRef:P(e,"renderSwitcherIcon"),labelFieldRef:P(e,"labelField"),multipleRef:P(e,"multiple"),handleSwitcherClick:on,handleDragEnd:Un,handleDragEnter:jn,handleDragLeave:zn,handleDragStart:Hn,handleDrop:Vn,handleDragOver:an,handleSelect:qe,handleCheck:ln});function Gn(n){var t;(t=g.value)===null||t===void 0||t.scrollTo(n)}const Zn={handleKeydown:Me,scrollTo:Gn,getCheckedData:()=>{if(!e.checkable)return{keys:[],options:[]};const{checkedKeys:n}=x.value;return{keys:n,options:q(n)}},getIndeterminateData:()=>{if(!e.checkable)return{keys:[],options:[]};const{indeterminateKeys:n}=x.value;return{keys:n,options:q(n)}}},rn=z(()=>{const{common:{cubicBezierEaseInOut:n},self:{fontSize:t,nodeBorderRadius:o,nodeColorHover:s,nodeColorPressed:r,nodeColorActive:O,arrowColor:H,loadingColor:W,nodeTextColor:ve,nodeTextColorDisabled:ye,dropMarkColor:Z,nodeWrapperPadding:L,nodeHeight:Y,lineHeight:J}}=a.value,K=Ge(L,"top"),j=Ge(L,"bottom"),Re=kn(De(Y)-De(K)-De(j));return{"--n-arrow-color":H,"--n-loading-color":W,"--n-bezier":n,"--n-font-size":t,"--n-node-border-radius":o,"--n-node-color-active":O,"--n-node-color-hover":s,"--n-node-color-pressed":r,"--n-node-text-color":ve,"--n-node-text-color-disabled":ye,"--n-drop-mark-color":Z,"--n-node-wrapper-padding":L,"--n-line-offset-top":`-${K}`,"--n-line-offset-bottom":`-${j}`,"--n-node-content-height":Re,"--n-line-height":J}}),ge=c?ut("tree",void 0,rn,e):void 0;return Object.assign(Object.assign({},Zn),{mergedClsPrefix:l,mergedTheme:a,rtlEnabled:d,fNodes:Dn,aip:ue,selfElRef:v,virtualListInstRef:g,scrollbarInstRef:k,handleFocusout:Xn,handleDragLeaveTree:Mn,handleScroll:qn,getScrollContainer:p,getScrollContent:h,handleAfterEnter:_n,handleResize:Wn,cssVars:c?void 0:rn,themeClass:ge==null?void 0:ge.themeClass,onRender:ge==null?void 0:ge.onRender})},render(){var e;const{fNodes:l,internalRenderEmpty:c}=this;if(!l.length&&c)return c();const{mergedClsPrefix:u,blockNode:d,blockLine:a,draggable:v,disabled:k,internalFocusable:g,checkable:p,handleKeydown:h,rtlEnabled:D,handleFocusout:b,scrollbarProps:f}=this,w=g&&!k,N=w?"0":void 0,S=[`${u}-tree`,D&&`${u}-tree--rtl`,p&&`${u}-tree--checkable`,(a||d)&&`${u}-tree--block-node`,a&&`${u}-tree--block-line`],E=y=>"__motion"in y?m($t,{height:y.height,nodes:y.nodes,clsPrefix:u,mode:y.mode,onAfterEnter:this.handleAfterEnter}):m(Sn,{key:y.key,tmNode:y,clsPrefix:u});if(this.virtualScroll){const{mergedTheme:y,internalScrollablePadding:x}=this,B=Ge(x||"0");return m(hn,Object.assign({},f,{ref:"scrollbarInstRef",onDragleave:v?this.handleDragLeaveTree:void 0,container:this.getScrollContainer,content:this.getScrollContent,class:S,theme:y.peers.Scrollbar,themeOverrides:y.peerOverrides.Scrollbar,tabindex:N,onKeydown:w?h:void 0,onFocusout:w?b:void 0}),{default:()=>{var _;return(_=this.onRender)===null||_===void 0||_.call(this),m(Dt,{ref:"virtualListInstRef",items:this.fNodes,itemSize:De(y.self.nodeHeight),ignoreItemResize:this.aip,paddingTop:B.top,paddingBottom:B.bottom,class:this.themeClass,style:[this.cssVars,{paddingLeft:B.left,paddingRight:B.right}],onScroll:this.handleScroll,onResize:this.handleResize,showScrollbar:!1,itemResizable:!0},{default:({item:T})=>E(T)})}})}const{internalScrollable:C}=this;return S.push(this.themeClass),(e=this.onRender)===null||e===void 0||e.call(this),C?m(hn,Object.assign({},f,{class:S,tabindex:N,onKeydown:w?h:void 0,onFocusout:w?b:void 0,style:this.cssVars,contentStyle:{padding:this.internalScrollablePadding}}),{default:()=>m("div",{onDragleave:v?this.handleDragLeaveTree:void 0,ref:"selfElRef"},this.fNodes.map(E))}):m("div",{class:S,tabindex:N,ref:"selfElRef",style:this.cssVars,onKeydown:w?h:void 0,onFocusout:w?b:void 0,onDragleave:v?this.handleDragLeaveTree:void 0},l.length?l.map(E):ft(this.$slots.empty,()=>[m(xn,{class:`${u}-tree__empty`,theme:this.mergedTheme.peers.Empty,themeOverrides:this.mergedTheme.peerOverrides.Empty})]))}}),qt=gt("all-application",!1,function(e){return ne("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[ne("path",{d:"M18 6H8C6.89543 6 6 6.89543 6 8V18C6 19.1046 6.89543 20 8 20H18C19.1046 20 20 19.1046 20 18V8C20 6.89543 19.1046 6 18 6Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),ne("path",{d:"M18 28H8C6.89543 28 6 28.8954 6 30V40C6 41.1046 6.89543 42 8 42H18C19.1046 42 20 41.1046 20 40V30C20 28.8954 19.1046 28 18 28Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),ne("path",{d:"M40 6H30C28.8954 6 28 6.89543 28 8V18C28 19.1046 28.8954 20 30 20H40C41.1046 20 42 19.1046 42 18V8C42 6.89543 41.1046 6 40 6Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),ne("path",{d:"M40 28H30C28.8954 28 28 28.8954 28 30V40C28 41.1046 28.8954 42 30 42H40C41.1046 42 42 41.1046 42 40V30C42 28.8954 41.1046 28 40 28Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null)])}),Wt=()=>pn("/api/v1/organize/department/all"),Xt=()=>pn("/api/v1/organize/personnel/all");const Gt=e=>(Nt("data-v-4e2ff6f8"),e=e(),Ct(),e),Zt={class:"el-container is-vertical height100"},Yt={class:"el-header me-view-header bdr-b"},Qt={style:{"font-weight":"500"}},Jt={class:"el-container"},el={key:0,class:"el-main me-scrollbar pd-10"},nl={class:"cards"},tl={key:1,class:"el-main flex-center"},ll=Gt(()=>xe("img",{src:Yn,alt:""},null,-1)),ol={key:2,class:"el-aside aside bdr-l"},al={__name:"organize",setup(e){const l=yt(),c=bt(),u=kt(),d=se("$user"),a=F(-1),v=F(""),k=F(!0),g=F([]),p=z(()=>g.value.filter(C=>C.nickname.match(v.value)!=null&&(a.value==-1||C.dept_items.some(y=>y.dept_id==a.value)))),h=F([]),D=F("全体成员"),b=C=>{c.uid!=C.user_id?u.toTalk(1,C.user_id,l):window.$message.info("禁止给自己发送消息!!!")};function f(C){const y={};C.forEach(_=>y[_.dept_id]=_);const x=_=>{let T=[];return _.split(",").forEach(X=>{y[parseInt(X)]&&T.push(y[parseInt(X)].dept_name)}),T},B=[];return C.forEach(_=>{const T=y[_.parent_id];_.breadcrumb=x(_.ancestors||"").join(" / "),T?(T.children==null&&(T.children=[]),T.children.push(_)):B.push(_)}),B}const w=C=>{d(C.user_id)},N=({option:C})=>({onClick(){D.value=C.breadcrumb||"全部成员",a.value=C.dept_id}});function S(){Wt().then(C=>{const y=C.data.items||[];y.unshift({dept_id:-1,dept_name:"全部成员",parent_id:0,ancestors:"0"});for(const x of y)x.suffix=0,x.dept_id>0&&(x.ancestors=`${x.ancestors},${x.dept_id}`);h.value=f(y)})}async function E(){const C=await Xt();if(!C||C.code!=200)return;let y=C.data.items||[];y.map(x=>{x.online=!1,x.sort=1e6,x.position_items.sort((_,T)=>_.sort-T.sort);let B=[];for(const _ of x.position_items)B.push(_.name),_.sort<x.sort&&(x.sort=_.sort);return x.position=B.join("、"),x}),g.value=y.sort((x,B)=>x.sort-B.sort)}return E(),S(),(C,y)=>{const x=Ye("n-icon"),B=Ye("n-input"),_=Ye("n-space");return me(),_e("section",Zt,[xe("header",Yt,[xe("div",Qt,vn(D.value)+" ("+vn(p.value.length)+")",1),xe("div",null,[ne(_,{style:{display:"flex","align-items":"center"}},{default:Qe(()=>[ne(B,{value:v.value,"onUpdate:value":y[0]||(y[0]=T=>v.value=T),valueModifiers:{trim:!0},placeholder:"搜索",clearable:"",style:{width:"200px"},round:""},{prefix:Qe(()=>[ne(x,{component:je(Rt)},null,8,["component"])]),_:1},8,["value"]),ne(x,{class:"pointer",style:{"margin-top":"5px"},component:je(qt),size:18,onClick:y[1]||(y[1]=T=>k.value=!k.value)},null,8,["component"])]),_:1})])]),xe("section",Jt,[p.value.length?(me(),_e("main",el,[xe("div",nl,[(me(!0),_e(mt,null,xt(p.value,T=>(me(),wt(St,{key:T.id,username:T.nickname,gender:T.gender,motto:T.position,flag:"查看",onClick:X=>w(T),onToTalk:X=>b(T)},null,8,["username","gender","motto","onClick","onToTalk"]))),128))])])):(me(),_e("main",tl,[ne(je(xn),{size:"200",description:"暂无相关数据"},{icon:Qe(()=>[ll]),_:1})])),k.value?(me(),_e("aside",ol,[ne(je(Vt),{"key-field":"dept_id","label-field":"dept_name",data:h.value,"default-expand-all":!0,cancelable:!0,"default-selected-keys":[-1],"node-props":N},null,8,["data"])])):pt("",!0)])])}}},fl=vt(al,[["__scopeId","data-v-4e2ff6f8"]]);export{fl as default};
