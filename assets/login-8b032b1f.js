import{a2 as x,b3 as k,dz as S,bw as I,q as N,ae as K,a4 as c,a5 as q,a6 as B,a7 as g,a1 as a,aA as t,a8 as d,bn as p,al as C,at as R,au as V,dA as z,dB as A,b1 as m}from"./index-60f5c441.js";import{S as L}from"./auth-f4b455ab.js";import{a as _,N as T}from"./FormItem-f7935866.js";const U=n=>(R("data-v-96103dd1"),n=n(),V(),n),D={class:"el-container is-vertical login-box login"},F=U(()=>g("header",{class:"el-header box-header"},"快捷登录",-1)),$={class:"el-main",style:{padding:"3px"}},E={__name:"login",setup(n){const w=k(),f=S(),h=I(),i=N(),v={username:{required:!0,trigger:["blur","input"],message:"账号不能为空"},password:{required:!0,trigger:["blur","input"],message:"密码不能为空"}},s=K({username:"",password:"",loading:!1}),y=()=>{s.loading=!0;const o=L({mobile:s.username,password:s.password,platform:"web"});o.then(async e=>{e.code==200?(window.$message.success("登录成功"),A(e.data.access_token,e.data.expires_in),w.loadSetting(),!m.isConnect()&&m.connect("onLogin..."),h.push(f.query.redirect||"/")):window.$message.warning(e.message)}),o.finally(()=>{s.loading=!1})},r=o=>{o.preventDefault(),z(!0),i.value.validate(e=>{!e&&y()})};return(o,e)=>{const u=c("n-input"),b=c("n-button");return q(),B("section",D,[F,g("main",$,[a(d(T),{ref_key:"formRef",ref:i,size:"large",model:s,rules:v},{default:t(()=>[a(d(_),{path:"username","show-label":!1},{default:t(()=>[a(u,{placeholder:"请输入空间ID",value:s.username,"onUpdate:value":e[0]||(e[0]=l=>s.username=l),maxlength:20,onKeydown:p(r,["enter"])},null,8,["value","onKeydown"])]),_:1}),a(d(_),{path:"password","show-label":!1},{default:t(()=>[a(u,{placeholder:"请输入Token",type:"password","show-password-on":"click",value:s.password,"onUpdate:value":e[1]||(e[1]=l=>s.password=l),onKeydown:p(r,["enter"])},null,8,["value","onKeydown"])]),_:1}),a(b,{type:"primary",size:"large",block:"",class:"mt-t20",onClick:r,loading:s.loading},{default:t(()=>[C(" 立即登录 ")]),_:1},8,["loading"])]),_:1},8,["model"])])])}}},H=x(E,[["__scopeId","data-v-96103dd1"]]);export{H as default};
