import{L as S}from"./Loading-62718f47.js";import{d as k,s as L,r as u,b as w,c as o,e as m,w as R,f as e,l as y,i as p,F as b,y as C,a as f,g as B,t as r,z as D,M as I,cX as N,_ as F,p as V}from"./index-cfea8079.js";const j={class:"main-box me-scrollbar me-scrollbar-thumb"},z=["onClick"],E={class:"right-box"},G={class:"msg-header"},U={class:"name"},W={class:"time"},X=k({__name:"ForwardRecord",props:{pid:{type:String,default:""},recordId:{type:Number,default:0}},emits:["close"],setup(_,{emit:n}){const d=n,l=_,v=L("$user"),t=u(!0),a=u([]),c=u("会话记录"),i=()=>{d("close")};return(()=>{console.log(l.pid),N({pid:l.pid,record_id:l.recordId}).then(g=>{g.code==200&&(a.value=g.data.items||[],c.value=`会话记录(${a.value.length})`)})})(),(g,x)=>{const $=w("im-avatar"),M=w("n-modal");return o(),m(M,{show:t.value,"onUpdate:show":x[0]||(x[0]=s=>t.value=s),preset:"card",title:c.value,style:{"max-width":"500px"},class:"modal-radius","on-after-leave":i,segmented:{content:!0},"header-style":{padding:"20px 15px"},"content-style":{padding:0}},{default:R(()=>[e("div",j,[a.value.length===0?(o(),m(S,{key:0})):y("",!0),(o(!0),p(b,null,C(a.value,s=>(o(),p("div",{key:s.msg_id,class:"message-item"},[e("div",{class:"left-box pointer",onClick:K=>f(v)(s.user_id)},[B($,{src:s.avatar,size:30,username:s.nickname},null,8,["src","username"])],8,z),e("div",E,[e("div",G,[e("span",U,r(s.nickname),1),e("span",W,r(s.created_at),1)]),(o(),m(D(f(I)[s.msg_type]||"unknown-message"),{extra:s.extra,data:s,pid:_.pid},null,8,["extra","data","pid"]))])]))),128))])]),_:1},8,["show","title"])}}});const q=F(X,[["__scopeId","data-v-9bd0f3b5"]]),A={class:"title"},H={class:"tips"},J=k({__name:"ForwardMessage",props:{extra:{},data:{},pid:{},maxWidth:{}},setup(_){const n=_,d=u(!1),l=V(()=>[...new Set(n.extra.records.map(a=>a.nickname))].join("、")),v=()=>{d.value=!0};let t=n.pid;return t==""||t==null?t=n.data.id:t=`${t},${n.data.id}`,(a,c)=>(o(),p("section",{class:"im-message-forward pointer",onClick:v},[e("div",A,r(l.value)+" 的会话记录",1),(o(!0),p(b,null,C(a.extra.records,(i,h)=>(o(),p("div",{class:"list",key:h},[e("p",null,[e("span",null,r(i.nickname)+": ",1),e("span",null,r(i.text),1)])]))),128)),e("div",H,[e("span",null,"转发：聊天会话记录 ("+r(a.extra.msg_ids.length)+"条)",1)]),d.value?(o(),m(q,{key:0,"record-id":a.data.id,pid:f(t),onClose:c[0]||(c[0]=i=>d.value=!1)},null,8,["record-id","pid"])):y("",!0)]))}});const Q=F(J,[["__scopeId","data-v-22047320"]]);export{Q as default};
