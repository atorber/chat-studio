import{d as R,b6 as V,r as m,m as _,V as W,b as d,c as F,i as B,g as l,w as a,a as s,A as f,W as $,k as A,X as r,b8 as M,F as O,ax as v,v as G,_ as L}from"./index-8e0b9476.js";import{T as j,u as E,B as J}from"./useForm-ee8571b5.js";import{S as K,a as X,b as z}from"./whitelist-93a61257.js";import{P as H}from"./PageTitle-51d0b4d1.js";import{P as Q}from"./PlusOutlined-a07f7215.js";import"./vuedraggable.umd-8e0bfff1.js";import"./SettingOutlined-c5ca1532.js";const Y=[{title:"编号",key:"serialNumber",width:100},{title:"所属应用",key:"app",width:150},{title:"类型",key:"type",width:100},{title:"昵称/群名称",key:"name",width:160},{title:"好友ID/群ID",key:"id",width:160},{title:"好友备注",key:"alias",width:160},{title:"配额",key:"qupta",width:160},{title:"备注说明",key:"info",width:160},{title:"状态",key:"state",width:160},{title:"同步状态",key:"syncStatus",width:100},{title:"更新时间",key:"lastOperationTime",width:160,render(w){return new Date(w.lastOperationTime).toLocaleString()}}],Z=R({__name:"white",setup(w){const k={app:{required:!0,trigger:["blur","input"],message:"请输入应用名称"},type:{required:!0,trigger:["blur","input"],message:"请输入类型，可选项：好友、群"},name:{required:!1,trigger:["blur","input"],message:"请输入昵称/群名称"},id:{required:!1,trigger:["blur","input"],message:"请输入好友ID/群ID"},alias:{required:!1,trigger:["blur","input"],message:"请输入好友备注"}},C=[{field:"name",labelMessage:"这是一个提示",component:"NInput",label:"序号",componentProps:{placeholder:"请输入记录ID",onInput:t=>{console.log(t)}},rules:[{required:!0,message:"请输入姓名",trigger:["blur"]}]},{field:"mobile",component:"NInputNumber",label:"手机",componentProps:{placeholder:"请输入手机号码",showButton:!1,onInput:t=>{console.log(t)}}},{field:"type",component:"NSelect",label:"类型",componentProps:{placeholder:"请选择类型",options:[{label:"好友",value:1},{label:"群",value:2}],onUpdateValue:t=>{console.log(t)}}},{field:"makeDate",component:"NDatePicker",label:"预约时间",defaultValue:118313526e4,componentProps:{type:"date",clearable:!0,onUpdateValue:t=>{console.log(t)}}},{field:"makeTime",component:"NTimePicker",label:"停留时间",componentProps:{clearable:!0,onUpdateValue:t=>{console.log(t)}}},{field:"status",label:"状态",slot:"statusSlot"},{field:"makeProject",component:"NCheckbox",label:"预约项目",componentProps:{placeholder:"请选择预约项目",options:[{label:"种牙",value:1},{label:"补牙",value:2},{label:"根管",value:3}],onUpdateChecked:t=>{console.log(t)}}},{field:"makeSource",component:"NRadioGroup",label:"来源",componentProps:{options:[{label:"网上",value:1},{label:"门店",value:2}],onUpdateChecked:t=>{console.log(t)}}}];V();const h=m(null),y=m(),p=m(!1),b=m(!1),n=_({app:"智能问答|qa",type:"",name:"",id:"",alias:"",quota:100,info:""}),D=_({width:220,title:"操作",key:"action",fixed:"right",render(t){return W(j,{style:"button",actions:[{label:"删除",onClick:S.bind(null,t),ifShow:()=>!0,auth:["basic_list"]}],dropDownActions:[{label:"启用",key:"enabled",ifShow:()=>!0},{label:"禁用",key:"disabled",ifShow:()=>!0}],select:e=>{window.$message.info(`您点击了，${e} 按钮`)}})}}),[ee,{getFieldsValue:I}]=E({gridProps:{cols:"1 s:1 m:2 l:3 xl:4 2xl:4"},labelWidth:80,schemas:C});function N(){p.value=!0}const P=async t=>{const{data:e}=await X({...I(),...t,fieldName:"app",value:"智能问答|qa"});return console.log("data",JSON.stringify(e)),e};function q(t){console.log(t)}function c(){y.value.reload()}function T(t){t.preventDefault(),b.value=!0,h.value.validate(async e=>{if(e)window.$message.error("请填写完整信息");else{const g=await z(n);console.log("新建res",g),window.$message.success("新建成功");const u={app:"智能问答|qa",type:"whitelist",action:"reload"},i=v.formatMsgToCommand(u);v.client.publish(v.apis.commandApi,i),setTimeout(()=>{p.value=!1,c()})}b.value=!1})}async function S(t){console.log("点击了删除",t);const e=await K({recordId:t.recordId});console.log("删除res",e),e.code===200?(window.$message.success("删除成功"),c()):window.$message.error("删除失败"),c()}return(t,e)=>{const g=d("n-icon"),u=d("n-button"),i=d("n-input"),U=d("n-space"),x=d("n-modal");return F(),B(O,null,[l(H,{title:"白名单"}),l(s(M),{bordered:!1,class:"proCard"},{default:a(()=>[l(s(J),{columns:s(Y),request:P,"row-key":o=>o.id,ref_key:"actionRef",ref:y,actionColumn:D,"onUpdate:checkedRowKeys":q,"scroll-x":1090},{tableTitle:a(()=>[l(u,{type:"primary",onClick:N},{icon:a(()=>[l(g,null,{default:a(()=>[l(s(Q))]),_:1})]),default:a(()=>[f(" 新建 ")]),_:1})]),toolbar:a(()=>[l(u,{type:"primary",onClick:c},{default:a(()=>[f("刷新数据")]),_:1})]),_:1},8,["columns","row-key","actionColumn"]),l(x,{show:p.value,"onUpdate:show":e[8]||(e[8]=o=>p.value=o),"show-icon":!1,preset:"dialog",title:"新建"},{action:a(()=>[l(U,null,{default:a(()=>[l(u,{onClick:e[7]||(e[7]=()=>p.value=!1)},{default:a(()=>[f("取消")]),_:1}),l(u,{type:"info",loading:b.value,onClick:T},{default:a(()=>[f("确定")]),_:1},8,["loading"])]),_:1})]),default:a(()=>[l(s($),{model:n,rules:k,ref_key:"formRef",ref:h,"label-placement":"left","label-width":125,class:"py-4"},{default:a(()=>[A(l(s(r),{label:"所属应用",path:"app"},{default:a(()=>[l(i,{placeholder:"请输入所属应用",value:n.app,"onUpdate:value":e[0]||(e[0]=o=>n.app=o)},null,8,["value"])]),_:1},512),[[G,!1]]),l(s(r),{label:"类型",path:"type"},{default:a(()=>[l(i,{placeholder:"可选项：好友、群",value:n.type,"onUpdate:value":e[1]||(e[1]=o=>n.type=o)},null,8,["value"])]),_:1}),l(s(r),{label:"昵称/群名称",path:"name"},{default:a(()=>[l(i,{placeholder:"请输入昵称/群名称",value:n.name,"onUpdate:value":e[2]||(e[2]=o=>n.name=o)},null,8,["value"])]),_:1}),l(s(r),{label:"好友ID/群ID",path:"type"},{default:a(()=>[l(i,{placeholder:"请输入好友ID/群ID",value:n.id,"onUpdate:value":e[3]||(e[3]=o=>n.id=o)},null,8,["value"])]),_:1}),l(s(r),{label:"好友备注",path:"alias"},{default:a(()=>[l(i,{placeholder:"请输入好友备注",value:n.alias,"onUpdate:value":e[4]||(e[4]=o=>n.alias=o)},null,8,["value"])]),_:1}),l(s(r),{label:"配额",path:"quota"},{default:a(()=>[l(i,{placeholder:"请输入配额",value:n.quota,"onUpdate:value":e[5]||(e[5]=o=>n.quota=o)},null,8,["value"])]),_:1}),l(s(r),{label:"备注说明",path:"info"},{default:a(()=>[l(i,{type:"textarea",placeholder:"请输入备注说明",value:n.info,"onUpdate:value":e[6]||(e[6]=o=>n.info=o)},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show"])]),_:1})],64)}}});const re=L(Z,[["__scopeId","data-v-3c5200b8"]]);export{re as default};
