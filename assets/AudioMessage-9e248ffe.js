import{a0 as k,a1 as n,a2 as w,q as c,ae as L,a4 as j,a5 as d,a6 as u,a7 as t,an as P,a8 as _,$ as A,ah as C,ab as x,ac as M,dd as T,aa as b}from"./index-60f5c441.js";const z=k("pause-one",!1,function(e){return n("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[n("path",{d:"M24 44C35.0457 44 44 35.0457 44 24C44 12.9543 35.0457 4 24 4C12.9543 4 4 12.9543 4 24C4 35.0457 12.9543 44 24 44Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M19 18V30",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M29 18V30",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),V=k("play-one",!0,function(e){return n("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[n("path",{d:"M15 24V11.8756L25.5 17.9378L36 24L25.5 30.0622L15 36.1244V24Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null)])});const B={class:"im-message-audio"},E=["src"],I={class:"play"},W=["onClick"],O={class:"desc"},D={class:"time"},S={__name:"AudioMessage",props:{extra:Object,data:Object},setup(e){const a=c(),l=c("-"),o=L({isAudioPlay:!1,progress:0,duration:0,currentTime:0,loading:!0}),f=()=>{o.isAudioPlay?a.value.pause():a.value.play(),o.isAudioPlay=!o.isAudioPlay},h=()=>{o.isAudioPlay=!1,o.progress=0},m=()=>{o.duration=a.value.duration,l.value=g(parseInt(a.value.duration)),o.loading=!1},y=s=>{console.log("音频播放异常===>",s)},v=()=>{let s=a.value;s.duration==0?o.progress=0:(o.currentTime=s.currentTime,o.progress=s.currentTime/s.duration*100)},g=(s=0)=>{if(s==0)return"0";let i=parseInt(s/60),r=s;return i>0&&(r=parseInt(s-i*60)),`${i}'${r}"`};return(s,i)=>{const r=j("n-icon");return d(),u("div",B,[t("audio",{ref_key:"audioRef",ref:a,preload:"auto",type:"audio/mp3,audio/wav",src:e.extra.url,onTimeupdate:v,onEnded:h,onCanplay:m,onError:y},null,40,E),t("div",I,[t("div",{class:"btn pointer",onClick:P(f,["stop"])},[n(r,{size:18,component:o.isAudioPlay?_(z):_(V)},null,8,["component"])],8,W)]),t("div",O,[(d(),u(A,null,C(23,p=>t("span",{class:"line",key:p})),64)),x(t("span",{class:"indicator",style:T({left:o.progress+"%"})},null,4),[[M,o.progress>0]])]),t("div",D,b(l.value),1)])}}},N=w(S,[["__scopeId","data-v-254f3b78"]]);export{N as default};
