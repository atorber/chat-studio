import{d as b,q as v,b as f,P as w,o as u,bX as m,dU as p,a as O,B as S,t as P,h as g,dV as I}from"./index-364c5099.js";import{i as E,a as j,b as y,c as L}from"./ImageGroup-44b793b7.js";const C=Object.assign({alt:String,height:[String,Number],imgProps:Object,previewedImgProps:Object,lazy:Boolean,intersectionObserverOptions:Object,objectFit:{type:String,default:"fill"},previewSrc:String,fallbackSrc:String,width:[String,Number],src:String,previewDisabled:Boolean,loadDescription:String,onError:Function,onLoad:Function},L),N=b({name:"Image",props:C,inheritAttrs:!1,setup(r){const a=v(null),n=v(!1),s=v(null),o=f(E,null),{mergedClsPrefixRef:h}=o||w(r),d={click:()=>{if(r.previewDisabled||n.value)return;const e=r.previewSrc||r.src;if(o){o.setPreviewSrc(e),o.setThumbnailEl(a.value),o.toggleShow();return}const{value:i}=s;i&&(i.setPreviewSrc(e),i.setThumbnailEl(a.value),i.toggleShow())}},l=v(!r.lazy);u(()=>{var e;(e=a.value)===null||e===void 0||e.setAttribute("data-group-id",(o==null?void 0:o.groupId)||"")}),u(()=>{if(r.lazy&&r.intersectionObserverOptions){let e;const i=m(()=>{e==null||e(),e=void 0,e=p(a.value,r.intersectionObserverOptions,l)});O(()=>{i(),e==null||e()})}}),m(()=>{var e;r.src,(e=r.imgProps)===null||e===void 0||e.src,n.value=!1});const c=v(!1);return S(j,{previewedImgPropsRef:P(r,"previewedImgProps")}),Object.assign({mergedClsPrefix:h,groupId:o==null?void 0:o.groupId,previewInstRef:s,imageRef:a,showError:n,shouldStartLoading:l,loaded:c,mergedOnClick:e=>{var i,t;d.click(),(t=(i=r.imgProps)===null||i===void 0?void 0:i.onClick)===null||t===void 0||t.call(i,e)},mergedOnError:e=>{if(!l.value)return;n.value=!0;const{onError:i,imgProps:{onError:t}={}}=r;i==null||i(e),t==null||t(e)},mergedOnLoad:e=>{const{onLoad:i,imgProps:{onLoad:t}={}}=r;i==null||i(e),t==null||t(e),c.value=!0}},d)},render(){var r,a;const{mergedClsPrefix:n,imgProps:s={},loaded:o,$attrs:h,lazy:d}=this,l=(a=(r=this.$slots).placeholder)===null||a===void 0?void 0:a.call(r),c=this.src||s.src,e=g("img",Object.assign(Object.assign({},s),{ref:"imageRef",width:this.width||s.width,height:this.height||s.height,src:this.showError?this.fallbackSrc:d&&this.intersectionObserverOptions?this.shouldStartLoading?c:void 0:c,alt:this.alt||s.alt,"aria-label":this.alt||s.alt,onClick:this.mergedOnClick,onError:this.mergedOnError,onLoad:this.mergedOnLoad,loading:I&&d&&!this.intersectionObserverOptions?"lazy":"eager",style:[s.style||"",l&&!o?{height:"0",width:"0",visibility:"hidden"}:"",{objectFit:this.objectFit}],"data-error":this.showError,"data-preview-src":this.previewSrc||this.src}));return g("div",Object.assign({},h,{role:"none",class:[h.class,`${n}-image`,(this.previewDisabled||this.showError)&&`${n}-image--preview-disabled`]}),this.groupId?e:g(y,{theme:this.theme,themeOverrides:this.themeOverrides,clsPrefix:n,ref:"previewInstRef",showToolbar:this.showToolbar,showToolbarTooltip:this.showToolbarTooltip},{default:()=>e}),!o&&l)}});export{N};
