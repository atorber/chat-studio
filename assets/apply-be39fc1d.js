import{b as T,aW as N,r as C,ah as F,T as q,M as E,o as B,e as d,B as V,q as S,f as u,k as f,c as o,w as i,v as P,F as L,l as U,i as n,t as h,j as a,Y as j,bQ as M,Z as R,C as A,bR as J,bS as K,bT as D,x as W,y as Y,z as Z,bU as Q,bV as X,bW as H,ac as O,aF as ee,bX as se,bY as ne,h as oe,bZ as te,bJ as G,bK as ae}from"./index-29374566.js";const ce=l=>(W("data-v-fb65c410"),l=l(),Y(),l),ie={style:{"min-height":"300px"}},le=ce(()=>n("img",{src:Z,alt:""},null,-1)),re=["onClick"],_e=["onClick"],de={class:"username"},pe={class:"time"},ue={class:"remark text-ellipsis"},me={class:"tools"},ve={__name:"FriendApply",setup(l){const p=N(),r=C([]),k=C(!0),$=F("$user"),m=q(()=>p.isContactApply),v=(s=!1)=>{K().then(t=>{t.code===200&&(r.value=t.data.items||[],s&&(p.isContactApply=!1))}).finally(()=>{k.value=!1})},x=s=>{$(s.user_id)},I=D(s=>{const t=window.$message.loading("请稍等，正在处理");Q({apply_id:s.id,remark:s.nickname}).then(({code:c,message:y})=>{t.destroy(),c===200?(v(),window.$message.success("已同意")):window.$message.info(y)})},1e3),_=D(s=>{const t=window.$message.loading("请稍等，正在处理");X({apply_id:s.id,remark:"拒绝"}).then(({code:c,message:y})=>{t.destroy(),c===200?(v(),window.$message.success("已拒绝")):window.$message.info(y)})},1e3);return E(m,()=>{v(!1)}),B(()=>{v(!0)}),(s,t)=>{const c=d("n-empty"),y=d("im-avatar"),w=d("n-icon"),b=d("n-button"),z=V("loading");return S((u(),f("section",ie,[S(o(c,{size:"200",description:"暂无相关数据",style:{"margin-top":"10%"}},{icon:i(()=>[le]),_:1},512),[[P,r.value.length===0]]),(u(!0),f(L,null,U(r.value,e=>(u(),f("div",{class:"item",key:e.id},[n("div",{class:"avatar",onClick:g=>x(e)},[o(y,{size:40,src:e.avatar,username:e.nickname},null,8,["src","username"])],8,re),n("div",{class:"content pointer o-hidden",onClick:g=>x(e)},[n("div",de,[n("span",null,h(e.nickname),1),n("span",pe,h(a(j)(e.created_at,"{m}/{d} {h}:{i}")),1)]),n("div",ue,"备注: "+h(e.remark),1)],8,_e),n("div",me,[o(b,{onClick:g=>a(I)(e),strong:"",secondary:"",circle:"",type:"primary",size:"small"},{icon:i(()=>[o(w,{component:a(M)},null,8,["component"])]),_:2},1032,["onClick"]),o(a(J),{onPositiveClick:g=>a(_)(e)},{trigger:i(()=>[o(b,{strong:"",secondary:"",circle:"",type:"tertiary",size:"small"},{icon:i(()=>[o(w,{component:a(R)},null,8,["component"])]),_:1})]),default:i(()=>[A(" 确认要拒绝申请吗？ ")]),_:2},1032,["onPositiveClick"])])]))),128))])),[[z,k.value]])}}},ye=T(ve,[["__scopeId","data-v-fb65c410"]]);const ge=l=>(W("data-v-3eedc6c5"),l=l(),Y(),l),he={style:{"min-height":"300px"}},fe=ge(()=>n("img",{src:Z,alt:""},null,-1)),ke=["onClick"],$e=["onClick"],we={class:"username"},be={class:"time"},Ce={class:"remark text-ellipsis"},Ae={class:"tools"},xe={__name:"GroupApply",setup(l){const p=N(),r=C([]),k=C(!0),$=F("$user"),m=(_=!1)=>{H().then(s=>{s.code===200&&(r.value=s.data.items||[])}).finally(()=>{k.value=!1})},v=_=>{$(_.user_id)},x=D(_=>{const s=window.$message.loading("请稍等，正在处理");ne({apply_id:_.id}).then(t=>{s.destroy(),t.code===200?window.$message.success("已同意"):window.$message.info(t.message),m()})},1e3),I=_=>{let s="";const t=window.$dialog.create({title:"拒绝入群申请",content:()=>O(ee,{defaultValue:"",placeholder:"请填写拒绝原因",style:{marginTop:"20px"},onInput:c=>s=c,autofocus:!0}),negativeText:"取消",positiveText:"提交",onPositiveClick:()=>(s.length&&(t.loading=!0,se({apply_id:_.id,remark:s}).then(c=>{t.destroy(),c.code===200?window.$message.success("已拒绝"):window.$message.info(c.message),m()})),!1)})};return B(()=>{m(!0),p.isGroupApply=!1}),(_,s)=>{const t=d("n-empty"),c=d("im-avatar"),y=d("n-tag"),w=d("n-icon"),b=d("n-button"),z=V("loading");return S((u(),f("section",he,[S(o(t,{style:{"margin-top":"10%"},size:"200",description:"暂无相关数据"},{icon:i(()=>[fe]),_:1},512),[[P,r.value.length===0]]),(u(!0),f(L,null,U(r.value,e=>(u(),f("div",{class:"item",key:e.id},[n("div",{class:"avatar",onClick:g=>v(e)},[o(c,{size:40,src:e.avatar,username:e.nickname},null,8,["src","username"])],8,ke),n("div",{class:"content pointer o-hidden",onClick:g=>v(e)},[n("div",we,[n("span",null,[o(y,{bordered:!1,size:"small",type:"primary"},{default:i(()=>[A(h(e.group_name),1)]),_:2},1024),A(" "+h(e.nickname),1)]),n("span",be,h(a(j)(e.created_at,"{m}/{d} {h}:{i}")),1)]),n("div",Ce,"备注: "+h(e.remark),1)],8,$e),n("div",Ae,[o(b,{onClick:g=>a(x)(e),strong:"",secondary:"",circle:"",size:"small",type:"primary"},{icon:i(()=>[o(w,{component:a(M)},null,8,["component"])]),_:2},1032,["onClick"]),o(b,{onClick:g=>I(e),strong:"",secondary:"",circle:"",type:"tertiary",size:"small"},{icon:i(()=>[o(w,{component:a(R)},null,8,["component"])]),_:2},1032,["onClick"])])]))),128))])),[[z,k.value]])}}},Se=T(xe,[["__scopeId","data-v-3eedc6c5"]]);const Ie={class:"el-container is-vertical height100"},ze={class:"el-header header bdr-b"},De={class:"el-main me-scrollbar me-scrollbar-thumb"},Te={__name:"apply",setup(l){const p=C("friend"),r={friend:ye,group:Se};return(k,$)=>(u(),f("section",Ie,[n("header",ze,[o(a(ae),{value:p.value,"onUpdate:value":$[0]||($[0]=m=>p.value=m)},{default:i(()=>[o(a(G),{name:"friend"},{default:i(()=>[A(" 好友申请 ")]),_:1}),o(a(G),{name:"group"},{default:i(()=>[A(" 入群申请 ")]),_:1})]),_:1},8,["value"])]),n("main",De,[(u(),oe(te(r[p.value])))])]))}},Ne=T(Te,[["__scopeId","data-v-d58cef2e"]]);export{Ne as default};
