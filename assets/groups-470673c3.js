import{ab as E,aW as F,b_ as M,r as _,d as O,T as y,o as J,e as v,f as r,k as m,i,c as t,w as s,j as n,bJ as h,C as b,t as k,bK as K,S as W,P as q,b0 as A,F as T,l as H,h as G,b$ as Q,E as R,c0 as X,by as N,c1 as Y,c2 as Z,x as ee,y as ae,z as oe,b as te}from"./index-a7f9a8b1.js";import{G as se}from"./GroupCard-b977ce01.js";const ne=c=>(ee("data-v-525362ec"),c=c(),ae(),c),le={id:"drawer-target",class:"el-container is-vertical height100"},re={class:"el-header from-header bdr-b"},ue={key:0,class:"el-main flex-center"},ie=ne(()=>i("img",{src:oe,alt:""},null,-1)),ce={key:1,class:"el-main me-scrollbar me-scrollbar-thumb pd-10"},de={class:"cards"},pe=E({__name:"groups",setup(c){const $=F(),B=M(),d=_(!1),f=_(""),u=_([]),l=O({isShow:!1,id:0}),p=_("all"),{uid:g}=$,w=y(()=>u.value.filter(a=>a.creator_id===g)),S=y(()=>u.value.filter(a=>p.value==="create"&&a.creator_id!==g||p.value==="join"&&a.creator_id===g?!1:a.group_name.toLowerCase().indexOf(f.value.toLowerCase())!==-1)),C=async()=>{const a=await Z();console.debug(a),a.code===200&&(u.value=a.data.items||[])},L=a=>{l.isShow=!0,l.id=a.id},I=a=>{N(2,a.id)},U=a=>{d.value=!1,C(),B.loadTalkList()};return J(()=>{C()}),(a,o)=>{const x=v("n-icon"),V=v("n-input"),j=v("n-button"),D=v("n-empty");return r(),m(T,null,[i("section",le,[i("header",re,[i("div",null,[t(n(K),{value:p.value,"onUpdate:value":o[0]||(o[0]=e=>p.value=e)},{default:s(()=>[t(n(h),{name:"all"},{default:s(()=>[b(" 全部群聊("+k(u.value.length)+") ",1)]),_:1}),t(n(h),{name:"create"},{default:s(()=>[b(" 我创建的("+k(w.value.length)+") ",1)]),_:1}),t(n(h),{name:"join"},{default:s(()=>[b(" 我加入的("+k(u.value.length-w.value.length)+") ",1)]),_:1})]),_:1},8,["value"])]),t(n(A),null,{default:s(()=>[t(V,{value:f.value,"onUpdate:value":o[1]||(o[1]=e=>f.value=e),valueModifiers:{trim:!0},placeholder:"搜索",clearable:"",style:{"max-width":"200px"},round:""},{prefix:s(()=>[t(x,{component:n(W)},null,8,["component"])]),_:1},8,["value"]),t(j,{circle:"",onClick:o[2]||(o[2]=e=>d.value=!0)},{icon:s(()=>[t(x,{component:n(q)},null,8,["component"])]),_:1})]),_:1})]),S.value.length===0?(r(),m("main",ue,[t(D,{size:"200",description:"暂无相关数据"},{icon:s(()=>[ie]),_:1})])):(r(),m("main",ce,[i("div",de,[(r(!0),m(T,null,H(S.value,(e,P)=>(r(),G(se,{key:P,avatar:e.avatar,username:e.group_name,gender:e.gender,motto:e.profile,flag:"查看","is-member":!0,onClick:z=>L(e),onTalk:z=>I(e)},null,8,["avatar","username","gender","motto","onClick","onTalk"]))),128))])]))]),d.value?(r(),G(Q,{key:0,onClose:o[3]||(o[3]=e=>d.value=!1),onOnSubmit:U})):R("",!0),t(n(Y),{show:l.isShow,"onUpdate:show":o[6]||(o[6]=e=>l.isShow=e),width:400,placement:"right","trap-focus":!1,"block-scroll":!1,to:"#drawer-target","show-mask":"transparent"},{default:s(()=>[t(X,{gid:l.id,onClose:o[4]||(o[4]=e=>l.isShow=!1),onToTalk:o[5]||(o[5]=e=>n(N)(2,l.id))},null,8,["gid"])]),_:1},8,["show"])],64)}}});const me=te(pe,[["__scopeId","data-v-525362ec"]]);export{me as default};
