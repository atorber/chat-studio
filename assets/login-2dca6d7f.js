import{_ as x,aA as k,u as S,bt as I,r as N,m as C,b as u,c as K,i as L,f as g,g as a,w as n,a as d,X as p,b9 as _,A as R,W as V,K as q,L as A,ci as B,cj as T,ax as m}from"./index-da544b70.js";import{S as U}from"./auth-5ca066b6.js";const z=t=>(q("data-v-96103dd1"),t=t(),A(),t),D={class:"el-container is-vertical login-box login"},F=z(()=>g("header",{class:"el-header box-header"},"快捷登录",-1)),$={class:"el-main",style:{padding:"3px"}},j={__name:"login",setup(t){const f=k(),w=S(),h=I(),i=N(),v={username:{required:!0,trigger:["blur","input"],message:"账号不能为空"},password:{required:!0,trigger:["blur","input"],message:"密码不能为空"}},s=C({username:"",password:"",loading:!1}),b=()=>{s.loading=!0;const o=U({mobile:s.username,password:s.password,platform:"web"});o.then(async e=>{e.code==200?(window.$message.success("登录成功"),T(e.data.access_token,e.data.expires_in),f.loadSetting(),!m.isConnect()&&m.connect("onLogin..."),h.push(w.query.redirect||"/")):window.$message.warning(e.message)}),o.finally(()=>{s.loading=!1})},r=o=>{o.preventDefault(),B(!0),i.value.validate(e=>{!e&&b()})};return(o,e)=>{const c=u("n-input"),y=u("n-button");return K(),L("section",D,[F,g("main",$,[a(d(V),{ref_key:"formRef",ref:i,size:"large",model:s,rules:v},{default:n(()=>[a(d(p),{path:"username","show-label":!1},{default:n(()=>[a(c,{placeholder:"请输入空间ID",value:s.username,"onUpdate:value":e[0]||(e[0]=l=>s.username=l),maxlength:20,onKeydown:_(r,["enter"])},null,8,["value"])]),_:1}),a(d(p),{path:"password","show-label":!1},{default:n(()=>[a(c,{placeholder:"请输入Token",type:"password","show-password-on":"click",value:s.password,"onUpdate:value":e[1]||(e[1]=l=>s.password=l),onKeydown:_(r,["enter"])},null,8,["value"])]),_:1}),a(y,{type:"primary",size:"large",block:"",class:"mt-t20",onClick:r,loading:s.loading},{default:n(()=>[R(" 立即登录 ")]),_:1},8,["loading"])]),_:1},8,["model"])])])}}},W=x(j,[["__scopeId","data-v-96103dd1"]]);export{W as default};
