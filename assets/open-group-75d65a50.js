import{I,g as o,r as w,b as y,c as p,e as x,w as r,f as s,A as b,a as c,W as L,X as N,a0 as G,a1 as j,bU as M,d as V,m as S,i as k,t as W,bV as $,F as C,y as A,k as B,v as F,l as z,bW as D,aZ as J,K as U,L as O,_ as Z}from"./index-8e0b9476.js";import{_ as q}from"./no-data-bde0995b.js";import{G as E}from"./GroupCard-c3bf9085.js";import{S as K}from"./Search-1b784b96.js";const T=I("add-one",!1,function(e){return o("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[o("path",{d:"M24 44C35.0457 44 44 35.0457 44 24C44 12.9543 35.0457 4 24 4C12.9543 4 4 12.9543 4 24C4 35.0457 12.9543 44 24 44Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),o("path",{d:"M24 16V32",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),o("path",{d:"M16 24L32 24",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),X={style:{width:"100%","text-align":"right"}},H={__name:"GroupApply",props:{gid:{type:Number,default:0}},emits:["close"],setup(e,{emit:d}){const t=w(""),u=e,m=d,g=w(!0),_=w(!1),h=()=>{m("close")},n=()=>{_.value=!0;let l=M({group_id:u.gid,remark:t.value});l.then(a=>{a.code==200?(window.$message.success("入群申请提交成功..."),h()):window.$message.warning(a.message)}),l.finally(()=>{_.value=!1})};return(l,a)=>{const v=y("n-button");return p(),x(c(j),{show:g.value,"onUpdate:show":a[1]||(a[1]=f=>g.value=f),preset:"card",title:"入群申请",class:"modal-radius",style:{"max-width":"450px"},"on-after-leave":h},{footer:r(()=>[s("div",X,[o(v,{type:"tertiary",onClick:h},{default:r(()=>[b(" 取消 ")]),_:1}),o(v,{type:"primary",class:"mt-l15",loading:_.value,disabled:!t.value,onClick:n},{default:r(()=>[b(" 提交 ")]),_:1},8,["loading","disabled"])])]),default:r(()=>[o(c(L),null,{default:r(()=>[o(c(N),{label:"申请备注",required:""},{default:r(()=>[o(c(G),{placeholder:"请填写申请备注",type:"textarea",value:t.value,"onUpdate:value":a[0]||(a[0]=f=>t.value=f)},null,8,["value"])]),_:1})]),_:1})]),_:1},8,["show"])}}},P=e=>(U("data-v-65f1b5da"),e=e(),O(),e),Q={class:"el-container height100"},R={class:"el-main"},Y={class:"el-container is-vertical height100"},ee={class:"el-header me-view-header bdr-b"},te={key:0,class:"el-main flex-center"},oe=P(()=>s("img",{src:q,alt:""},null,-1)),ne={key:1,class:"el-main me-scrollbar me-scrollbar-thumb pd-10"},ae={class:"cards"},se=V({__name:"open-group",setup(e){const d=S({isShow:!1,groupId:0}),t=S({page:1,next:!1,name:"",loading:!1}),u=w([]),m=()=>{t.loading||(t.loading=!0,D({page:t.page,name:t.name}).then(n=>{if(n.code==200){let l=n.data.items||[];t.page==1?u.value=l:u.value.push(...l),t.next=n.data.next}}).finally(()=>{t.loading=!1}))},g=()=>{t.page++,m()},_=J(n=>{t.page=1,t.name=n,m()},300),h=n=>{d.isShow=!0,d.groupId=n.id};return m(),(n,l)=>{const a=y("n-icon"),v=y("n-input"),f=y("n-empty");return p(),k(C,null,[s("section",Q,[s("main",R,[s("section",Y,[s("header",ee,[s("div",null,"公开群聊("+W(u.value.length)+")",1),s("div",null,[o(v,{placeholder:"搜索",clearable:"",style:{width:"200px"},"on-input":c(_),round:""},{prefix:r(()=>[o(a,{component:c(K)},null,8,["component"])]),_:1},8,["on-input"])])]),u.value.length==0?(p(),k("main",te,[o(f,{size:"200",description:"暂无相关数据"},{icon:r(()=>[oe]),_:1})])):(p(),k("main",ne,[o(c($),{type:"info",bordered:!1,closable:"",class:"mt-b10"},{default:r(()=>[b(" 公开群聊可自行添加入群申请，待群主（管理员）同意后方可入群！ ")]),_:1}),s("div",ae,[(p(!0),k(C,null,A(u.value,i=>(p(),x(E,{key:i.id,avatar:i.avatar,username:i.name,gender:i.gender,motto:i.profile,flag:i.count+"/"+i.max_num,onJoin:le=>h(i)},null,8,["avatar","username","gender","motto","flag","onJoin"]))),128)),B(s("div",{class:"flex-center more",onClick:g},[o(a,{component:c(T)},null,8,["component"]),b("  加载更多 ")],512),[[F,t.next]])])]))])])]),d.isShow?(p(),x(H,{key:0,gid:d.groupId,onClose:l[0]||(l[0]=i=>d.isShow=!1)},null,8,["gid"])):z("",!0)],64)}}});const ue=Z(se,[["__scopeId","data-v-65f1b5da"]]);export{ue as default};
