import{I as f,g as n,d as w,r as d,m as L,b as M,c,i as u,f as t,C as P,a as _,F as A,y as C,k as j,v as x,b$ as T,t as z,_ as V}from"./index-0666afcb.js";const W=f("pause-one",!1,function(e){return n("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[n("path",{d:"M24 44C35.0457 44 44 35.0457 44 24C44 12.9543 35.0457 4 24 4C12.9543 4 4 12.9543 4 24C4 35.0457 12.9543 44 24 44Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M19 18V30",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M29 18V30",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),B=f("play-one",!0,function(e){return n("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[n("path",{d:"M15 24V11.8756L25.5 17.9378L36 24L25.5 30.0622L15 36.1244V24Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null)])}),E={class:"im-message-audio"},I=["src"],b={class:"play"},D={class:"desc"},S={class:"time"},$=w({__name:"AudioMessage",props:{extra:{},data:{},maxWidth:{}},setup(e){const i=d(),l=d("-"),o=L({isAudioPlay:!1,progress:0,duration:0,currentTime:0,loading:!0}),h=()=>{o.isAudioPlay?i.value.pause():i.value.play(),o.isAudioPlay=!o.isAudioPlay},k=()=>{o.isAudioPlay=!1,o.progress=0},m=()=>{o.duration=i.value.duration,l.value=g(parseInt(i.value.duration)),o.loading=!1},v=s=>{console.log("音频播放异常===>",s)},y=()=>{let s=i.value;s.duration==0?o.progress=0:(o.currentTime=s.currentTime,o.progress=s.currentTime/s.duration*100)},g=(s=0)=>{if(s==0)return"-";const a=Math.floor(s/60);let r=s;return a>0&&(r=Math.floor(s-a*60)),`${a}'${r}"`};return(s,a)=>{const r=M("n-icon");return c(),u("div",E,[t("audio",{ref_key:"audioRef",ref:i,preload:"auto",type:"audio/mp3,audio/wav",src:s.extra.url,onTimeupdate:y,onEnded:k,onCanplay:m,onError:v},null,40,I),t("div",b,[t("div",{class:"btn pointer",onClick:P(h,["stop"])},[n(r,{size:18,component:o.isAudioPlay?_(W):_(B)},null,8,["component"])])]),t("div",D,[(c(),u(A,null,C(23,p=>t("span",{class:"line",key:p})),64)),j(t("span",{class:"indicator",style:T({left:o.progress+"%"})},null,4),[[x,o.progress>0]])]),t("div",S,z(l.value),1)])}}});const N=V($,[["__scopeId","data-v-d2addc68"]]);export{N as default};
