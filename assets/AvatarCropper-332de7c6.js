import{I as g,g as t,_ as M,m as p,r as W,b as m,c as j,i as z,f as r,w as a,a as l,b8 as R,A as h,k as U,v as A,a1 as T,F as V,bT as F}from"./index-a0bcc847.js";import{W as N}from"./AvatarCropper.vue_vue_type_style_index_0_scoped_9728916b_lang-827c0500.js";import{C as D}from"./Close-8e7baeba.js";import{U as I,a as H}from"./UploadOne-d325efb5.js";const O=g("redo",!0,function(e){return t("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[t("path",{d:"M36.7279 36.7279C33.4706 39.9853 28.9706 42 24 42C14.0589 42 6 33.9411 6 24C6 14.0589 14.0589 6 24 6C28.9706 6 33.4706 8.01472 36.7279 11.2721C38.3859 12.9301 42 17 42 17",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M42 8V17H33",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),S=g("refresh-one",!0,function(e){return t("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[t("rect",{x:"17",y:"24.071",width:"10",height:"10",rx:"2",transform:"rotate(-45 17 24.071)",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),t("path",{d:"M40.1201 16C37.1747 10.0731 31.0586 6 23.9912 6C16.9237 6 10.9454 10.0731 8 16",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap},null),t("path",{d:"M8 8V16",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap},null),t("path",{d:"M14.7803 16L8.00013 16",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap},null),t("path",{d:"M8 32C10.9454 37.9269 17.0615 42 24.129 42C31.1964 42 37.1747 37.9269 40.1201 32",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap},null),t("path",{d:"M40.1201 40V32",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap},null),t("path",{d:"M33.3398 32L40.12 32",stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap},null)])}),E={class:"content"},$={class:"canvas"},q={class:"view"},G={class:"preview"},J=["src"],K={class:"el-container",style:{height:"38px"}},P={class:"el-aside",style:{width:"400px","justify-content":"space-between","align-items":"center",display:"flex",padding:"0 5px"}},Q={class:"el-main",style:{"text-align":"center"}},X={__name:"AvatarCropper",emits:["close","success"],setup(e,{emit:w}){const f=w,k=p({show:!0,src:""}),d=W("cropper"),o=p({img:"",size:1,full:!1,outputType:"png",canMove:!0,fixedBox:!0,original:!1,canMoveBox:!0,autoCrop:!0,autoCropWidth:250,autoCropHeight:250,centerBox:!1,high:!0,preview:""}),v=()=>{f("close")};function _(){document.getElementById("upload-avatar").click()}const C=u=>{let s=u.target.files[0],i=new FileReader;i.onload=n=>{let c;typeof n.target.result=="object"?(c=window.URL.createObjectURL(new Blob([n.target.result])),console.log(c,n.target.result)):c=n.target.result,o.img=c},i.readAsArrayBuffer(s)},x=u=>{d.value.getCropData(s=>{o.preview=s})},y=()=>{d.value.rotateLeft()},b=()=>{d.value.rotateRight()},L=()=>{d.value.refresh()},B=()=>{d.value.getCropBlob(u=>{let s=new File([u],"avatar.png",{type:u.type,lastModified:Date.now()});const i=new FormData;i.append("file",s),F(i).then(n=>{n.code==200?f("success",n.data.avatar):window.$message.info(n.message)})})};return(u,s)=>{const i=m("n-icon"),n=m("n-button");return j(),z(V,null,[r("input",{id:"upload-avatar",type:"file",accept:"image/png, image/jpeg, image/jpg, image/webp",onChange:C},null,32),t(l(T),{show:k.show,"onUpdate:show":s[1]||(s[1]=c=>k.show=c),"on-after-leave":v},{default:a(()=>[t(l(R),{style:{width:"800px"},title:"选择头像",bordered:!1,class:"modal-radius"},{"header-extra":a(()=>[t(i,{size:"22",component:l(D),onClick:s[0]||(s[0]=c=>k.show=!1),class:"pointer"},null,8,["component"])]),footer:a(()=>[r("section",K,[r("aside",P,[t(n,{onClick:_,type:"primary",ghost:""},{icon:a(()=>[t(i,{component:l(I)},null,8,["component"])]),default:a(()=>[h(" 上传图片 ")]),_:1}),t(n,{onClick:L},{icon:a(()=>[t(i,{component:l(S)},null,8,["component"])]),default:a(()=>[h(" 重置 ")]),_:1}),t(n,{onClick:y},{icon:a(()=>[t(i,{component:l(H)},null,8,["component"])]),default:a(()=>[h(" 左转 ")]),_:1}),t(n,{onClick:b},{icon:a(()=>[t(i,{component:l(O)},null,8,["component"])]),default:a(()=>[h(" 右转 ")]),_:1})]),r("main",Q,[t(n,{type:"primary",onClick:B},{default:a(()=>[h("保存头像")]),_:1})])])]),default:a(()=>[r("div",E,[r("div",$,[t(l(N),{ref_key:"cropper",ref:d,img:o.img,"output-size":o.size,"output-type":o.outputType,info:!0,full:o.full,"can-move":o.canMove,"can-move-box":o.canMoveBox,"fixed-box":o.fixedBox,original:o.original,"auto-crop":o.autoCrop,"auto-crop-width":o.autoCropWidth,"auto-crop-height":o.autoCropHeight,"center-box":o.centerBox,onRealTime:x},null,8,["img","output-size","output-type","full","can-move","can-move-box","fixed-box","original","auto-crop","auto-crop-width","auto-crop-height","center-box"])]),r("div",q,[r("div",G,[U(r("img",{src:o.preview},null,8,J),[[A,o.preview]])])])])]),_:1})]),_:1},8,["show"])],64)}}},oe=M(X,[["__scopeId","data-v-9728916b"]]);export{oe as A,S as R};
