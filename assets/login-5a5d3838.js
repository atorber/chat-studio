import{a2 as x,b4 as k,dA as S,bx as I,q as N,ae as C,a4 as c,a5 as K,a6 as q,a7 as g,a1 as a,aA as n,a8 as d,bo as p,al as B,at as R,au as V,dB as A,dC as L,b2 as m}from"./index-364c5099.js";import{S as T}from"./auth-25dc869f.js";import{a as _,N as U}from"./FormItem-0aeeb3fa.js";const z=t=>(R("data-v-2621bd33"),t=t(),V(),t),D={class:"el-container is-vertical login-box login"},F=z(()=>g("header",{class:"el-header box-header"},"快捷登录",-1)),$={class:"el-main",style:{padding:"3px"}},E={__name:"login",setup(t){const f=k(),w=S(),b=I(),i=N(),h={username:{required:!0,trigger:["blur","input"],message:"账号不能为空"},password:{required:!0,trigger:["blur","input"],message:"密码不能为空"}},s=C({username:"",password:"",loading:!1}),v=()=>{s.loading=!0;const o=T({mobile:s.username,password:s.password,platform:"web"});o.then(async e=>{e.code==200?(window.$message.success("登录成功"),L(e.data.access_token,e.data.expires_in),f.loadSetting(),!m.isConnect()&&m.connect("onLogin..."),b.push(w.query.redirect||"/")):window.$message.warning(e.message)}),o.finally(()=>{s.loading=!1})},r=o=>{o.preventDefault(),A(!0),i.value.validate(e=>{!e&&v()})};return(o,e)=>{const u=c("n-input"),y=c("n-button");return K(),q("section",D,[F,g("main",$,[a(d(U),{ref_key:"formRef",ref:i,size:"large",model:s,rules:h},{default:n(()=>[a(d(_),{path:"username","show-label":!1},{default:n(()=>[a(u,{placeholder:"请输入空间ID",value:s.username,"onUpdate:value":e[0]||(e[0]=l=>s.username=l),maxlength:20,onKeydown:p(r,["enter"])},null,8,["value","onKeydown"])]),_:1}),a(d(_),{path:"password","show-label":!1},{default:n(()=>[a(u,{placeholder:"请输入Token",type:"password","show-password-on":"click",value:s.password,"onUpdate:value":e[1]||(e[1]=l=>s.password=l),onKeydown:p(r,["enter"])},null,8,["value","onKeydown"])]),_:1}),a(y,{type:"primary",size:"large",block:"",class:"mt-t20",onClick:r,loading:s.loading},{default:n(()=>[B(" 立即登录 ")]),_:1},8,["loading"])]),_:1},8,["model"])])])}}},H=x(E,[["__scopeId","data-v-2621bd33"]]);export{H as default};
