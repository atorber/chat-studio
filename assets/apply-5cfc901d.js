import{a2 as N,b4 as T,q as b,b as F,s as J,w as K,o as B,a4 as p,aL as L,ab as S,a5 as u,a6 as f,a1 as o,aA as i,ac as P,$ as V,ah as j,a7 as n,aa as h,a8 as a,am as E,al as A,cD as O,a_ as G,at as U,au as q,cE as Q,cF as W,cG as X,h as Y,aC as Z,cH as ee,cI as se,ai as ne,aj as oe}from"./index-4fb8a37c.js";import{_ as H}from"./no-data-bde0995b.js";import{C as M,N as te}from"./CheckSmall-ba2ea70b.js";import{C as R}from"./Close-08d73b6e.js";import{a as z,N as ae}from"./Tabs-522874b3.js";const ce=l=>(U("data-v-de5bca49"),l=l(),q(),l),ie={style:{"min-height":"300px"}},le=ce(()=>n("img",{src:H,alt:""},null,-1)),re=["onClick"],de=["onClick"],pe={class:"username"},_e={class:"time"},ue={class:"remark text-ellipsis"},me={class:"tools"},ve={__name:"FriendApply",setup(l){const _=T(),r=b([]),$=b(!0),k=F("$user"),m=J(()=>_.isContactApply),v=(s=!1)=>{O().then(t=>{t.code==200&&(r.value=t.data.items||[],s&&(_.isContactApply=!1))}).finally(()=>{$.value=!1})},x=s=>{k(s.user_id)},I=G(s=>{let t=window.$message.loading("请稍等，正在处理");Q({apply_id:s.id,remark:s.nickname}).then(({code:c,message:y})=>{t.destroy(),c==200?(v(),window.$message.success("已同意")):window.$message.info(y)})},1e3),d=G(s=>{let t=window.$message.loading("请稍等，正在处理");W({apply_id:s.id,remark:"拒绝"}).then(({code:c,message:y})=>{t.destroy(),c==200?(v(),window.$message.success("已拒绝")):window.$message.info(y)})},1e3);return K(m,()=>{v(!1)}),B(()=>{v(!0)}),(s,t)=>{const c=p("n-empty"),y=p("im-avatar"),w=p("n-icon"),C=p("n-button"),D=L("loading");return S((u(),f("section",ie,[S(o(c,{size:"200",description:"暂无相关数据",style:{"margin-top":"10%"}},{icon:i(()=>[le]),_:1},512),[[P,r.value.length==0]]),(u(!0),f(V,null,j(r.value,e=>(u(),f("div",{class:"item",key:e.id},[n("div",{class:"avatar",onClick:g=>x(e)},[o(y,{size:40,src:e.avatar,username:e.nickname},null,8,["src","username"])],8,re),n("div",{class:"content pointer o-hidden",onClick:g=>x(e)},[n("div",pe,[n("span",null,h(e.nickname),1),n("span",_e,h(a(E)(e.created_at,"{m}/{d} {h}:{i}")),1)]),n("div",ue,"备注: "+h(e.remark),1)],8,de),n("div",me,[o(C,{onClick:g=>a(I)(e),strong:"",secondary:"",circle:"",type:"primary",size:"small"},{icon:i(()=>[o(w,{component:a(M)},null,8,["component"])]),_:2},1032,["onClick"]),o(a(te),{onPositiveClick:g=>a(d)(e)},{trigger:i(()=>[o(C,{strong:"",secondary:"",circle:"",type:"tertiary",size:"small"},{icon:i(()=>[o(w,{component:a(R)},null,8,["component"])]),_:1})]),default:i(()=>[A(" 确认要拒绝申请吗？ ")]),_:2},1032,["onPositiveClick"])])]))),128))])),[[D,$.value]])}}},ye=N(ve,[["__scopeId","data-v-de5bca49"]]);const ge=l=>(U("data-v-488d21bd"),l=l(),q(),l),he={style:{"min-height":"300px"}},fe=ge(()=>n("img",{src:H,alt:""},null,-1)),$e=["onClick"],ke=["onClick"],we={class:"username"},Ce={class:"time"},be={class:"remark text-ellipsis"},Ae={class:"tools"},xe={__name:"GroupApply",setup(l){const _=T(),r=b([]),$=b(!0),k=F("$user"),m=(d=!1)=>{X().then(s=>{s.code==200&&(r.value=s.data.items||[])}).finally(()=>{$.value=!1})},v=d=>{k(d.user_id)},x=G(d=>{let s=window.$message.loading("请稍等，正在处理");se({apply_id:d.id}).then(t=>{s.destroy(),t.code==200?window.$message.success("已同意"):window.$message.info(t.message),m()})},1e3),I=d=>{let s="",t=window.$dialog.create({title:"拒绝入群申请",content:()=>Y(Z,{defaultValue:"",placeholder:"请填写拒绝原因",style:{marginTop:"20px"},onInput:c=>s=c,autofocus:!0}),negativeText:"取消",positiveText:"提交",onPositiveClick:()=>(s.length&&(t.loading=!0,ee({apply_id:d.id,remark:s}).then(c=>{t.destroy(),c.code==200?window.$message.success("已拒绝"):window.$message.info(c.message),m()})),!1)})};return B(()=>{m(!0),_.isGroupApply=!1}),(d,s)=>{const t=p("n-empty"),c=p("im-avatar"),y=p("n-tag"),w=p("n-icon"),C=p("n-button"),D=L("loading");return S((u(),f("section",he,[S(o(t,{style:{"margin-top":"10%"},size:"200",description:"暂无相关数据"},{icon:i(()=>[fe]),_:1},512),[[P,r.value.length==0]]),(u(!0),f(V,null,j(r.value,e=>(u(),f("div",{class:"item",key:e.id},[n("div",{class:"avatar",onClick:g=>v(e)},[o(c,{size:40,src:e.avatar,username:e.nickname},null,8,["src","username"])],8,$e),n("div",{class:"content pointer o-hidden",onClick:g=>v(e)},[n("div",we,[n("span",null,[o(y,{bordered:!1,size:"small",type:"primary"},{default:i(()=>[A(h(e.group_name),1)]),_:2},1024),A(" "+h(e.nickname),1)]),n("span",Ce,h(a(E)(e.created_at,"{m}/{d} {h}:{i}")),1)]),n("div",be,"备注: "+h(e.remark),1)],8,ke),n("div",Ae,[o(C,{onClick:g=>a(x)(e),strong:"",secondary:"",circle:"",size:"small",type:"primary"},{icon:i(()=>[o(w,{component:a(M)},null,8,["component"])]),_:2},1032,["onClick"]),o(C,{onClick:g=>I(e),strong:"",secondary:"",circle:"",type:"tertiary",size:"small"},{icon:i(()=>[o(w,{component:a(R)},null,8,["component"])]),_:2},1032,["onClick"])])]))),128))])),[[D,$.value]])}}},Se=N(xe,[["__scopeId","data-v-488d21bd"]]),Ie={class:"el-container is-vertical height100"},De={class:"el-header me-view-header bdr-b"},Ge={class:"el-main me-scrollbar me-scrollbar-thumb"},Le={__name:"apply",setup(l){const _=b("friend"),r={friend:ye,group:Se};return($,k)=>(u(),f("section",Ie,[n("header",De,[o(a(ae),{value:_.value,"onUpdate:value":k[0]||(k[0]=m=>_.value=m)},{default:i(()=>[o(a(z),{name:"friend"},{default:i(()=>[A(" 好友申请 ")]),_:1}),o(a(z),{name:"group"},{default:i(()=>[A(" 入群申请 ")]),_:1})]),_:1},8,["value"])]),n("main",Ge,[(u(),ne(oe(r[_.value])))])]))}};export{Le as default};
