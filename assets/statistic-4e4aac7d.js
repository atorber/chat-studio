import{T as B,u as $,B as q}from"./useForm-45171ba2.js";import{bZ as h,b5 as A,d as E,b6 as G,r as f,m as w,V as M,b as c,c as O,i as W,g as l,w as a,a as s,A as b,W as j,X as r,b7 as J,b8 as K,F as L,_ as X}from"./index-a0bcc847.js";import{c as Z}from"./columns-6ddd926c.js";import{P as z}from"./PageTitle-38dd6c24.js";import{P as H}from"./PlusOutlined-0ad81303.js";import"./vuedraggable.umd-93acb65f.js";import"./SettingOutlined-458c1674.js";const Q=i=>A("/api/v1/statistic/list",i),Y=i=>h("/api/v1/statistic/create",i),ee=i=>h("/api/v1/statistic/delete",i),le=E({__name:"statistic",setup(i){const k={name:{required:!0,trigger:["blur","input"],message:"请输入名称"},address:{required:!0,trigger:["blur","input"],message:"请输入地址"},date:{type:"number",required:!0,trigger:["blur","change"],message:"请选择日期"}},C=[{field:"name",labelMessage:"这是一个提示",component:"NInput",label:"姓名",componentProps:{placeholder:"请输入姓名",onInput:t=>{console.log(t)}},rules:[{required:!0,message:"请输入姓名",trigger:["blur"]}]},{field:"mobile",component:"NInputNumber",label:"手机",componentProps:{placeholder:"请输入手机号码",showButton:!1,onInput:t=>{console.log(t)}}},{field:"type",component:"NSelect",label:"类型",componentProps:{placeholder:"请选择类型",options:[{label:"舒适性",value:1},{label:"经济性",value:2}],onUpdateValue:t=>{console.log(t)}}},{field:"makeDate",component:"NDatePicker",label:"预约时间",defaultValue:118313526e4,componentProps:{type:"date",clearable:!0,onUpdateValue:t=>{console.log(t)}}},{field:"makeTime",component:"NTimePicker",label:"停留时间",componentProps:{clearable:!0,onUpdateValue:t=>{console.log(t)}}},{field:"status",label:"状态",slot:"statusSlot"},{field:"makeProject",component:"NCheckbox",label:"预约项目",componentProps:{placeholder:"请选择预约项目",options:[{label:"种牙",value:1},{label:"补牙",value:2},{label:"根管",value:3}],onUpdateChecked:t=>{console.log(t)}}},{field:"makeSource",component:"NRadioGroup",label:"来源",componentProps:{options:[{label:"网上",value:1},{label:"门店",value:2}],onUpdateChecked:t=>{console.log(t)}}}],P=G(),_=f(null),y=f(),d=f(!1),v=f(!1),n=w({type:"",startTime:null,desc:"",duration:2,maximum:20,location:"",cycle:"",topic:"",roomid:""}),x=w({width:220,title:"操作",key:"action",fixed:"right",render(t){return M(B,{style:"button",actions:[{label:"删除",onClick:R.bind(null,t),ifShow:()=>!0,auth:["basic_list"]},{label:"编辑",onClick:I.bind(null,t),ifShow:()=>!0,auth:["basic_list"]}],dropDownActions:[{label:"启用",key:"enabled",ifShow:()=>!0},{label:"禁用",key:"disabled",ifShow:()=>!0}],select:e=>{window.$message.info(`您点击了，${e} 按钮`)}})}}),[te,{getFieldsValue:T}]=$({gridProps:{cols:"1 s:1 m:2 l:3 xl:4 2xl:4"},labelWidth:80,schemas:C});function U(){d.value=!0}const N=async t=>{const{data:e}=await Q({...T(),...t});return console.log("data",JSON.stringify(e)),e};function S(t){console.log(t)}function p(){y.value.reload()}function D(t){t.preventDefault(),v.value=!0,_.value.validate(async e=>{if(e)window.$message.error("请填写完整信息");else{const g=await Y(n);console.log("创建活动res",g),window.$message.success("新建成功"),setTimeout(()=>{d.value=!1,p()})}v.value=!1})}function I(t){console.log("点击了编辑",t),P.push({name:"basic-info",params:{id:t.id}})}async function R(t){console.log("点击了删除",t);const e=await ee({recordId:t.recordId});console.log("删除res",e),e.code===200?(window.$message.success("删除成功"),p()):window.$message.error("删除失败"),p()}return(t,e)=>{const g=c("n-icon"),m=c("n-button"),u=c("n-input"),V=c("n-space"),F=c("n-modal");return O(),W(L,null,[l(z,{title:"统计"}),l(s(K),{bordered:!1,class:"proCard"},{default:a(()=>[l(s(q),{columns:s(Z),request:N,"row-key":o=>o.id,ref_key:"actionRef",ref:y,actionColumn:x,"onUpdate:checkedRowKeys":S,"scroll-x":1090},{tableTitle:a(()=>[l(m,{type:"primary",onClick:U},{icon:a(()=>[l(g,null,{default:a(()=>[l(s(H))]),_:1})]),default:a(()=>[b(" 新建 ")]),_:1})]),toolbar:a(()=>[l(m,{type:"primary",onClick:p},{default:a(()=>[b("刷新数据")]),_:1})]),_:1},8,["columns","row-key","actionColumn"]),l(F,{show:d.value,"onUpdate:show":e[10]||(e[10]=o=>d.value=o),"show-icon":!1,preset:"dialog",title:"新建"},{action:a(()=>[l(V,null,{default:a(()=>[l(m,{onClick:e[9]||(e[9]=()=>d.value=!1)},{default:a(()=>[b("取消")]),_:1}),l(m,{type:"info",loading:v.value,onClick:D},{default:a(()=>[b("确定")]),_:1},8,["loading"])]),_:1})]),default:a(()=>[l(s(j),{model:n,rules:k,ref_key:"formRef",ref:_,"label-placement":"left","label-width":125,class:"py-4"},{default:a(()=>[l(s(r),{label:"类型",path:"type"},{default:a(()=>[l(u,{placeholder:"请输入类型",value:n.type,"onUpdate:value":e[0]||(e[0]=o=>n.type=o)},null,8,["value"])]),_:1}),l(s(r),{label:"描述",path:"desc"},{default:a(()=>[l(u,{type:"textarea",placeholder:"请输入描述",value:n.desc,"onUpdate:value":e[1]||(e[1]=o=>n.desc=o)},null,8,["value"])]),_:1}),l(s(r),{label:"开始时间(选填)",path:"startTime"},{default:a(()=>[l(s(J),{type:"datetime",placeholder:"请选择开始时间",value:n.startTime,"onUpdate:value":e[2]||(e[2]=o=>n.startTime=o)},null,8,["value"])]),_:1}),l(s(r),{label:"时长(小时，选填)",path:"duration"},{default:a(()=>[l(u,{placeholder:"请输入时长",value:n.duration,"onUpdate:value":e[3]||(e[3]=o=>n.duration=o)},null,8,["value"])]),_:1}),l(s(r),{label:"限制人数(选填)",path:"maximum"},{default:a(()=>[l(u,{placeholder:"请输入限制人数",value:n.maximum,"onUpdate:value":e[4]||(e[4]=o=>n.maximum=o)},null,8,["value"])]),_:1}),l(s(r),{label:"地点(选填)",path:"location"},{default:a(()=>[l(u,{placeholder:"请输入地点",value:n.location,"onUpdate:value":e[5]||(e[5]=o=>n.location=o)},null,8,["value"])]),_:1}),l(s(r),{label:"周期(选填)",path:"cycle"},{default:a(()=>[l(u,{placeholder:"请输入周期",value:n.cycle,"onUpdate:value":e[6]||(e[6]=o=>n.cycle=o)},null,8,["value"])]),_:1}),l(s(r),{label:"关联群名称",path:"topic"},{default:a(()=>[l(u,{placeholder:"请输入群名称",value:n.topic,"onUpdate:value":e[7]||(e[7]=o=>n.topic=o)},null,8,["value"])]),_:1}),l(s(r),{label:"关联群ID(选填)",path:"roomid"},{default:a(()=>[l(u,{placeholder:"请输入群ID",value:n.roomid,"onUpdate:value":e[8]||(e[8]=o=>n.roomid=o)},null,8,["value"])]),_:1})]),_:1},8,["model"])]),_:1},8,["show"])]),_:1})],64)}}});const de=X(le,[["__scopeId","data-v-c2a5b301"]]);export{de as default};
