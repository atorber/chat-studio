import{I as k,g as n,_ as w,r as c,m as L,b as j,c as d,i as u,f as t,C,a as _,F as P,y as A,k as x,v as M,b$ as b,t as T}from"./index-a0bcc847.js";const z=k("pause-one",!1,function(e){return n("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[n("path",{d:"M24 44C35.0457 44 44 35.0457 44 24C44 12.9543 35.0457 4 24 4C12.9543 4 4 12.9543 4 24C4 35.0457 12.9543 44 24 44Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M19 18V30",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null),n("path",{d:"M29 18V30",stroke:e.colors[2],"stroke-width":e.strokeWidth,"stroke-linecap":e.strokeLinecap,"stroke-linejoin":e.strokeLinejoin},null)])}),I=k("play-one",!0,function(e){return n("svg",{width:e.size,height:e.size,viewBox:"0 0 48 48",fill:"none"},[n("path",{d:"M15 24V11.8756L25.5 17.9378L36 24L25.5 30.0622L15 36.1244V24Z",fill:e.colors[1],stroke:e.colors[0],"stroke-width":e.strokeWidth,"stroke-linejoin":e.strokeLinejoin},null)])});const V={class:"im-message-audio"},B=["src"],E={class:"play"},W=["onClick"],O={class:"desc"},D={class:"time"},S={__name:"AudioMessage",props:{extra:Object,data:Object},setup(e){const i=c(),l=c("-"),o=L({isAudioPlay:!1,progress:0,duration:0,currentTime:0,loading:!0}),f=()=>{o.isAudioPlay?i.value.pause():i.value.play(),o.isAudioPlay=!o.isAudioPlay},h=()=>{o.isAudioPlay=!1,o.progress=0},m=()=>{o.duration=i.value.duration,l.value=g(parseInt(i.value.duration)),o.loading=!1},y=s=>{console.log("音频播放异常===>",s)},v=()=>{let s=i.value;s.duration==0?o.progress=0:(o.currentTime=s.currentTime,o.progress=s.currentTime/s.duration*100)},g=(s=0)=>{if(s==0)return"0";let a=parseInt(s/60),r=s;return a>0&&(r=parseInt(s-a*60)),`${a}'${r}"`};return(s,a)=>{const r=j("n-icon");return d(),u("div",V,[t("audio",{ref_key:"audioRef",ref:i,preload:"auto",type:"audio/mp3,audio/wav",src:e.extra.url,onTimeupdate:v,onEnded:h,onCanplay:m,onError:y},null,40,B),t("div",E,[t("div",{class:"btn pointer",onClick:C(f,["stop"])},[n(r,{size:18,component:o.isAudioPlay?_(z):_(I)},null,8,["component"])],8,W)]),t("div",O,[(d(),u(P,null,A(23,p=>t("span",{class:"line",key:p})),64)),x(t("span",{class:"indicator",style:b({left:o.progress+"%"})},null,4),[[M,o.progress>0]])]),t("div",D,T(l.value),1)])}}},F=w(S,[["__scopeId","data-v-254f3b78"]]);export{F as default};
