import{L}from"./Loading-643e674a.js";import{d as w,b as M,q as _,a4 as k,a5 as o,ai as m,aA as R,a7 as e,ad as y,a6 as p,$ as b,ah as C,a8 as h,a1 as B,aa as r,aj as D,ak as I,dJ as N,a2 as $,s as j}from"./index-60f5c441.js";const V={class:"main-box me-scrollbar me-scrollbar-thumb"},q=["onClick"],z={class:"right-box"},A={class:"msg-header"},E={class:"name"},G={class:"time"},J=w({__name:"ForwardRecord",props:{pid:{type:String,default:""},recordId:{type:Number,default:0}},emits:["close"],setup(u,{emit:n}){const d=n,l=u,v=M("$user"),t=_(!0),s=_([]),c=_("会话记录"),i=()=>{d("close")};return(()=>{console.log(l.pid),N({pid:l.pid,record_id:l.recordId}).then(g=>{g.code==200&&(s.value=g.data.items||[],c.value=`会话记录(${s.value.length})`)})})(),(g,x)=>{const F=k("im-avatar"),S=k("n-modal");return o(),m(S,{show:t.value,"onUpdate:show":x[0]||(x[0]=a=>t.value=a),preset:"card",title:c.value,style:{"max-width":"500px"},class:"modal-radius","on-after-leave":i,segmented:{content:!0},"header-style":{padding:"20px 15px"},"content-style":{padding:0}},{default:R(()=>[e("div",V,[s.value.length===0?(o(),m(L,{key:0})):y("",!0),(o(!0),p(b,null,C(s.value,a=>(o(),p("div",{key:a.msg_id,class:"message-item"},[e("div",{class:"left-box pointer",onClick:O=>h(v)(a.user_id)},[B(F,{src:a.avatar,size:30,username:a.nickname},null,8,["src","username"])],8,q),e("div",z,[e("div",A,[e("span",E,r(a.nickname),1),e("span",G,r(a.created_at),1)]),(o(),m(D(h(I)[a.msg_type]||"unknown-message"),{extra:a.extra,data:a,pid:u.pid},null,8,["extra","data","pid"]))])]))),128))])]),_:1},8,["show","title"])}}});const U=$(J,[["__scopeId","data-v-9bd0f3b5"]]),W={class:"title"},H={class:"tips"},K=w({__name:"ForwardMessage",props:{extra:{},data:{},pid:{},maxWidth:{}},setup(u){const n=u,d=_(!1),l=j(()=>[...new Set(n.extra.records.map(s=>s.nickname))].join("、")),v=()=>{d.value=!0};let t=n.pid;return t==""||t==null?t=n.data.id:t=`${t},${n.data.id}`,(s,c)=>(o(),p("section",{class:"im-message-forward pointer",onClick:v},[e("div",W,r(l.value)+" 的会话记录",1),(o(!0),p(b,null,C(s.extra.records,(i,f)=>(o(),p("div",{class:"list",key:f},[e("p",null,[e("span",null,r(i.nickname)+": ",1),e("span",null,r(i.text),1)])]))),128)),e("div",H,[e("span",null,"转发：聊天会话记录 ("+r(s.extra.msg_ids.length)+"条)",1)]),d.value?(o(),m(U,{key:0,"record-id":s.data.id,pid:h(t),onClose:c[0]||(c[0]=i=>d.value=!1)},null,8,["record-id","pid"])):y("",!0)]))}});const T=$(K,[["__scopeId","data-v-22047320"]]);export{T as default};
